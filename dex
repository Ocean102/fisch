









local a={}
local b

local function missing(c,d,e)
if type(d)==c then return d end
return e
end

local c=missing("function",cloneref,function(...)return...end)
local d=setmetatable({},{
__index=function(d,e)
d[e]=c(game:GetService(e))
return d[e]
end
})




local e=game
local f=workspace.Parent

local aa={
Explorer=function()







local g,h,i,j
local k,l,m,n
local o,p,q,r,s,t,u

local function initDeps(v)
g=v.Main
h=v.Lib
i=v.Apps
j=v.Settings

o=v.API
p=v.RMD
q=v.env
r=v.service
s=v.plr
t=v.create
u=v.createSimple
end

local function initAfterMain()
k=i.Explorer
l=i.Properties
m=i.ScriptViewer
n=i.Notebook
end

local function main()
local v={}local
w, x, y, z={}, {}, {}, {}
local A
local B,C,D,E,F,G
local H=f.FindFirstAncestorWhichIsA
local I=f.GetDescendants
local J=r.TextService.GetTextSize
local K,L=false,false
local M={Obj=Instance.new"Folder"}
local N=0
local O,P,Q
local R,S,T
local U,V
local W,X=table,math
local Y,Z={},{}
local _=f.DescendantAdded.Connect
local aa,ab,ac

aa=function(ad)
if a[ad]then return end

local ae=false
local af=H(ad,"Instance")
local ag=a[af]


if not ag then
if Y[ad]then
Z[ad]=Z[ad]or{
_(ad.ChildAdded,aa),
_(ad.AncestryChanged,ac),
}
ag=M
ae=true
else
return
end
elseif Y[af]or ag==M then
Y[ad]=true
Z[ad]=Z[ad]or{
_(ad.ChildAdded,aa),
_(ad.AncestryChanged,ac),
}
ae=true
end

local ah={Obj=ad,Parent=ag}
a[ad]=ah


if U and A[ag]and ag.Sorted then
local ai,aj=1,#ag
local ak=X.floor
local al=v.NodeSorter
local am=(aj==0 and 1)

if not am then
while true do
if ai>=aj then
if al(ah,ag[ai])then
am=ai
else
am=ai+1
end
break
end

local an=ak((ai+aj)/2)
if al(ah,ag[an])then
aj=an-1
else
ai=an+1
end
end
end

W.insert(ag,am,ah)
else
ag[#ag+1]=ah
ag.Sorted=nil
end

local ai=I(ad)
for aj=1,#ai do
local ak=ai[aj]
if a[ak]then continue end

local al=a[H(ak,"Instance")]
if not al then continue end
local am={Obj=ak,Parent=al}
a[ak]=am
al[#al+1]=am


if ae then
Y[ak]=true
Z[ak]=Z[ak]or{
_(ak.ChildAdded,aa),
_(ak.AncestryChanged,ac),
}
end
end

if T and V then
T{ah}
end

if not K and v.IsNodeVisible(ag)then
if A[ag]then
v.PerformUpdate()
elseif not L then
v.PerformRefresh()
end
end
end

ab=function(ad)
local ae=a[ad]
if not ae then return end


if Y[ae.Obj]then
ac(ae.Obj)
return
end

local af=ae.Parent
if af then
af.HasDel=true
end

local function recur(ag)
for ah=1,#ag do
local ai=ag[ah]
if not ai.Del then
a[ai.Obj]=nil
if#ai>0 then recur(ai)end
end
end
end
recur(ae)
ae.Del=true
a[ad]=nil

if af and not K and v.IsNodeVisible(af)then
if A[af]then
v.PerformUpdate()
elseif not L then
v.PerformRefresh()
end
end
end

ac=function(ad)
local ae=a[ad]
if not ae then return end

local af=ae.Parent
local ag=a[H(ad,"Instance")]
if af==ag then return end


if not ag then
if Y[ad]then
ag=M
else
return
end
elseif Y[ag.Obj]or ag==M then
Y[ad]=true
Z[ad]=Z[ad]or{
_(ad.ChildAdded,aa),
_(ad.AncestryChanged,ac),
}
end

if af then
local ah=W.find(af,ae)
if ah then W.remove(af,ah)end
end

ae.Id=nil
ae.Parent=ag

if U and A[ag]and ag.Sorted then
local ah,ai=1,#ag
local aj=X.floor
local ak=v.NodeSorter
local al=(ai==0 and 1)

if not al then
while true do
if ah>=ai then
if ak(ae,ag[ah])then
al=ah
else
al=ah+1
end
break
end

local am=aj((ah+ai)/2)
if ak(ae,ag[am])then
ai=am-1
else
ah=am+1
end
end
end

W.insert(ag,al,ae)
else
ag[#ag+1]=ae
ag.Sorted=nil
end

if T and z[ae]then
local ah=ae.Parent
while ah and(not z[ah]or A[ah]==0)do
A[ah]=true
z[ah]=true
ah=ah.Parent
end
end

if not K and(v.IsNodeVisible(ag)or v.IsNodeVisible(af))then
if A[ag]or A[af]then
v.PerformUpdate()
elseif not L then
v.PerformRefresh()
end
end
end

v.ViewWidth=0
v.Index=0
v.EntryIndent=20
v.FreeWidth=32
v.GuiElems={}

v.InitRenameBox=function()
R=t{{1,"TextBox",{BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderColor3=Color3.new(0.062745101749897,0.51764708757401,1),BorderMode=2,ClearTextOnFocus=false,Font=3,Name="RenameBox",PlaceholderColor3=Color3.new(0.69803923368454,0.69803923368454,0.69803923368454),Position=UDim2.new(0,26,0,2),Size=UDim2.new(0,200,0,16),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,TextXAlignment=0,Visible=false,ZIndex=2}}}

R.Parent=v.Window.GuiElems.Content.List

R.FocusLost:Connect(function()
if not S then return end

pcall(function()S.Obj.Name=R.Text end)
S=nil
v.Refresh()
end)

R.Focused:Connect(function()
R.SelectionStart=1
R.CursorPosition=#R.Text+1
end)
end

v.SetRenamingNode=function(ad)
S=ad
R.Text=tostring(ad.Obj)
R:CaptureFocus()
v.Refresh()
end

v.SetSortingEnabled=function(ad)
U=ad
j.Explorer.Sorting=ad
end

v.UpdateView=function()
local ad=X.ceil(C.AbsoluteSize.Y/20)
local ae=C.AbsoluteSize.X
local af=v.ViewWidth+v.FreeWidth

O.VisibleSpace=ad
O.TotalSpace=#w+1
P.VisibleSpace=ae
P.TotalSpace=af

O.Gui.Visible=#w+1>ad
P.Gui.Visible=af>ae

local ag=C.Size
C.Size=UDim2.new(1,(O.Gui.Visible and-16 or 0),1,(P.Gui.Visible and-39 or-23))
if ag~=C.Size then
v.UpdateView()
else
O:Update()
P:Update()

R.Size=UDim2.new(0,ae-100,0,16)

if O.Gui.Visible and P.Gui.Visible then
O.Gui.Size=UDim2.new(0,16,1,-39)
P.Gui.Size=UDim2.new(1,-16,0,16)
v.Window.GuiElems.Content.ScrollCorner.Visible=true
else
O.Gui.Size=UDim2.new(0,16,1,-23)
P.Gui.Size=UDim2.new(1,0,0,16)
v.Window.GuiElems.Content.ScrollCorner.Visible=false
end

v.Index=O.Index
end
end

v.NodeSorter=function(ad,ae)
if ad.Del or ae.Del then return false end

local af=ad.Class
local ag=ae.Class
if not af then af=ad.Obj.ClassName ad.Class=af end
if not ag then ag=ae.Obj.ClassName ae.Class=ag end

local ah=y[af]
local ai=y[ag]
if not ah then ah=p.Classes[af]and tonumber(p.Classes[af].ExplorerOrder)or 9999 y[af]=ah end
if not ai then ai=p.Classes[ag]and tonumber(p.Classes[ag].ExplorerOrder)or 9999 y[ag]=ai end

if ah~=ai then
return ah<ai
else
local aj,ak=tostring(ad.Obj),tostring(ae.Obj)
if aj~=ak then
return aj<ak
elseif af~=ag then
return af<ag
else
local al=ad.Id if not al then al=N N=(N+0.001)%999999999 ad.Id=al end
local am=ae.Id if not am then am=N N=(N+0.001)%999999999 ae.Id=am end
return al<am
end
end
end

v.Update=function()
W.clear(w)
local ad,ae,af=0,1,1
local ag={}
local ah=Enum.Font.SourceSans
local ai=Vector2.new(X.huge,20)
local aj=j.Explorer.UseNameWidth
local ak=W.sort
local al=v.NodeSorter
local am=(A==v.SearchExpanded)
local an=r.TextService

local function recur(ao,ap)
if ap>ae then ae=ap end
ap=ap+1
if U and not ao.Sorted then
ak(ao,al)
ao.Sorted=true
end
for aq=1,#ao do
local ar=ao[aq]

if(am and not z[ar])or ar.Del then continue end

if aj then
local as=ar.NameWidth
if not as then
local at=tostring(ar.Obj)
as=ag[at]
if not as then
as=J(an,at,14,ah,ai).X
ag[at]=as
end
ar.NameWidth=as
end
if as>ad then
ad=as
end
end

w[af]=ar
af=af+1
if A[ar]and#ar>0 then
recur(ar,ap)
end
end
end

recur(a[f],1)


if q.getnilinstances then
if not(am and not z[M])then
w[af]=M
af=af+1
if A[M]then
recur(M,2)
end
end
end

v.MaxNameWidth=ad
v.MaxDepth=ae
v.ViewWidth=aj and v.EntryIndent*ae+ad+26 or v.EntryIndent*ae+226
v.UpdateView()
end

v.StartDrag=function(ad,ae)
if v.Dragging then return end
for af,ag in next,b.List do
local ah=ag.Obj
if ah.Parent==f or ah:IsA"Player"then
return
end
end
v.Dragging=true

local af=C:Clone()
af:ClearAllChildren()

for ag,ah in pairs(x)do
local ai=w[ag+v.Index]
if ai and b.Map[ai]then
local aj=ah:Clone()
aj.Active=false
aj.Indent.Expand.Visible=false
aj.Parent=af
end
end

local ag=Instance.new"ScreenGui"
ag.DisplayOrder=g.DisplayOrders.Menu
af.Parent=ag
h.ShowGui(ag)

local ah=t{
{1,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Name="DragSelect",Size=UDim2.new(1,0,1,0),}},
{2,"Frame",{BackgroundColor3=Color3.new(1,1,1),BorderSizePixel=0,Name="Line",Parent={1},Size=UDim2.new(1,0,0,1),ZIndex=2,}},
{3,"Frame",{BackgroundColor3=Color3.new(1,1,1),BorderSizePixel=0,Name="Line",Parent={1},Position=UDim2.new(0,0,1,-1),Size=UDim2.new(1,0,0,1),ZIndex=2,}},
{4,"Frame",{BackgroundColor3=Color3.new(1,1,1),BorderSizePixel=0,Name="Line",Parent={1},Size=UDim2.new(0,1,1,0),ZIndex=2,}},
{5,"Frame",{BackgroundColor3=Color3.new(1,1,1),BorderSizePixel=0,Name="Line",Parent={1},Position=UDim2.new(1,-1,0,0),Size=UDim2.new(0,1,1,0),ZIndex=2,}},
}
ah.Parent=C

local ai=g.Mouse or r.Players.LocalPlayer:GetMouse()
local function move()
local aj=ai.X-ad
local ak=ai.Y-ae
af.Position=UDim2.new(0,aj,0,ak)

for al=1,#x do
local am=x[al]
if h.CheckMouseInGui(am)then
ah.Position=UDim2.new(0,am.Indent.Position.X.Offset-P.Index,0,am.Position.Y.Offset)
ah.Size=UDim2.new(0,am.Size.X.Offset-am.Indent.Position.X.Offset,0,20)
ah.Visible=true
return
end
end
ah.Visible=false
end
move()

local aj=r.UserInputService
local ak,al

ak=aj.InputChanged:Connect(function(am)
if am.UserInputType==Enum.UserInputType.MouseMovement or am.UserInputType==Enum.UserInputType.Touch then
move()
end
end)

al=aj.InputEnded:Connect(function(am)
if am.UserInputType==Enum.UserInputType.MouseButton1 or am.UserInputType==Enum.UserInputType.Touch then
al:Disconnect()
ak:Disconnect()
ag:Destroy()
ah:Destroy()
v.Dragging=false

for an=1,#x do
if h.CheckMouseInGui(x[an])then
local ao=w[an+v.Index]
if ao then
if b.Map[ao]then return end
local ap=ao.Obj
local aq=b.List
for ar=1,#aq do
local as=aq[ar]
pcall(function()as.Obj.Parent=ap end)
end
v.ViewNode(aq[1])
end
break
end
end
end
end)
end

v.NewListEntry=function(ad)
local ae=B:Clone()
ae.Position=UDim2.new(0,0,0,20*(ad-1))

local af=false

ae.InputBegan:Connect(function(ag)
local ah=w[ad+v.Index]
if not ah or b.Map[ah]or(ag.UserInputType~=Enum.UserInputType.MouseMovement and ag.UserInputType~=Enum.UserInputType.Touch)then return end

ae.Indent.BackgroundColor3=j.Theme.Button
ae.Indent.BorderSizePixel=0
ae.Indent.BackgroundTransparency=0
end)

ae.InputEnded:Connect(function(ag)
local ah=w[ad+v.Index]
if not ah or b.Map[ah]or(ag.UserInputType~=Enum.UserInputType.MouseMovement and ag.UserInputType~=Enum.UserInputType.Touch)then return end

ae.Indent.BackgroundTransparency=1
end)

ae.MouseButton1Down:Connect(function()

end)

ae.MouseButton1Up:Connect(function()

end)

ae.InputBegan:Connect(function(ag)
if ag.UserInputType==Enum.UserInputType.MouseButton1 or ag.UserInputType==Enum.UserInputType.Touch then
local ah,ai

local aj=g.Mouse or s:GetMouse()
local ak,al

if ag.UserInputType==Enum.UserInputType.Touch then
ak=ag.Position.X
al=ag.Position.Y
else
ak=aj.X
al=aj.Y
end

local am=ak-C.AbsolutePosition.X
local an=al-C.AbsolutePosition.Y

ah=r.UserInputService.InputEnded:Connect(function(ao)
if ao.UserInputType==Enum.UserInputType.MouseButton1 or ao.UserInputType==Enum.UserInputType.Touch then
ah:Disconnect()
ai:Disconnect()
end
end)

ai=r.UserInputService.InputChanged:Connect(function(ao)
if ao.UserInputType==Enum.UserInputType.MouseMovement or ao.UserInputType==Enum.UserInputType.Touch then
local ap,aq

if ao.UserInputType==Enum.UserInputType.Touch then
ap=ao.Position.X
aq=ao.Position.Y
else
ap=aj.X
aq=aj.Y
end

local ar=ap-ak
local as=aq-al
local at=X.sqrt(ar^2+as^2)

if at>5 then
ah:Disconnect()
ai:Disconnect()
af=false
v.StartDrag(am,an)
end
end
end)
end
end)

ae.MouseButton2Down:Connect(function()

end)

ae.Indent.Expand.InputBegan:Connect(function(ag)
local ah=w[ad+v.Index]
if not ah or(ag.UserInputType~=Enum.UserInputType.MouseMovement and ag.UserInputType~=Enum.UserInputType.Touch)then return end

if ag.UserInputType==Enum.UserInputType.Touch then
v.MiscIcons:DisplayByKey(ae.Indent.Expand.Icon,A[ah]and"Collapse_Over"or"Expand_Over")
elseif ag.UserInputType==Enum.UserInputType.MouseMovement then
v.MiscIcons:DisplayByKey(ae.Indent.Expand.Icon,A[ah]and"Collapse_Over"or"Expand_Over")
end
end)

ae.Indent.Expand.InputEnded:Connect(function(ag)
local ah=w[ad+v.Index]
if not ah or(ag.UserInputType~=Enum.UserInputType.MouseMovement and ag.UserInputType~=Enum.UserInputType.Touch)then return end

if ag.UserInputType==Enum.UserInputType.Touch then
v.MiscIcons:DisplayByKey(ae.Indent.Expand.Icon,A[ah]and"Collapse"or"Expand")
elseif ag.UserInputType==Enum.UserInputType.MouseMovement then
v.MiscIcons:DisplayByKey(ae.Indent.Expand.Icon,A[ah]and"Collapse"or"Expand")
end
end)

ae.Indent.Expand.MouseButton1Down:Connect(function()
local ag=w[ad+v.Index]
if not ag or#ag==0 then return end

A[ag]=not A[ag]
v.Update()
v.Refresh()
end)

ae.Parent=C
return ae
end

v.Refresh=function()
local ad=X.max(X.ceil((C.AbsoluteSize.Y)/20),0)
local ae=false local af=
f.IsA

for ag=1,ad do
local ah=x[ag]
if not x[ag]then ah=v.NewListEntry(ag)x[ag]=ah v.ClickSystem:Add(ah)end

local ai=w[ag+v.Index]
if ai then
local aj=ai.Obj
local ak=v.EntryIndent*v.NodeDepth(ai)

ah.Visible=true
ah.Position=UDim2.new(0,-P.Index,0,ah.Position.Y.Offset)
ah.Size=UDim2.new(0,v.ViewWidth,0,20)
ah.Indent.EntryName.Text=tostring(ai.Obj)
ah.Indent.Position=UDim2.new(0,ak,0,0)
ah.Indent.Size=UDim2.new(1,-ak,1,0)

ah.Indent.EntryName.TextTruncate=(j.Explorer.UseNameWidth and Enum.TextTruncate.None or Enum.TextTruncate.AtEnd)

v.MiscIcons:DisplayExplorerIcons(ah.Indent.Icon,aj.ClassName)

if b.Map[ai]then
ah.Indent.BackgroundColor3=j.Theme.ListSelection
ah.Indent.BorderSizePixel=0
ah.Indent.BackgroundTransparency=0
else
if h.CheckMouseInGui(ah)then
ah.Indent.BackgroundColor3=j.Theme.Button
else
ah.Indent.BackgroundTransparency=1
end
end

if ai==S then
ae=true
R.Position=UDim2.new(0,ak+25-P.Index,0,ah.Position.Y.Offset+2)
R.Visible=true
end

if#ai>0 and A[ai]~=0 then
if h.CheckMouseInGui(ah.Indent.Expand)then
v.MiscIcons:DisplayByKey(ah.Indent.Expand.Icon,A[ai]and"Collapse_Over"or"Expand_Over")
else
v.MiscIcons:DisplayByKey(ah.Indent.Expand.Icon,A[ai]and"Collapse"or"Expand")
end
ah.Indent.Expand.Visible=true
else
ah.Indent.Expand.Visible=false
end
else
ah.Visible=false
end
end

if not ae then
R.Visible=false
end

for ag=ad+1,#x do
v.ClickSystem:Remove(x[ag])
x[ag]:Destroy()
x[ag]=nil
end
end

v.PerformUpdate=function(ad)
K=true
h.FastWait(not ad and 0.1)
if not K then return end
K=false
if not v.Window:IsVisible()then return end
v.Update()
v.Refresh()
end

v.ForceUpdate=function(ad)
K=false
v.Update()
if not ad then v.Refresh()end
end

v.PerformRefresh=function()
L=true
h.FastWait(0.1)
L=false
if K or not v.Window:IsVisible()then return end
v.Refresh()
end

v.IsNodeVisible=function(ad)
if not ad then return end

local ae=ad.Parent
while ae do
if not A[ae]then return false end
ae=ae.Parent
end
return true
end

v.NodeDepth=function(ad)
local ae=0

if ad==M then
return 1
end

local af=ad.Parent
while af do
if af==M then ae=ae+1 end
af=af.Parent
ae=ae+1
end
return ae
end

v.SetupConnections=function()
if E then E:Disconnect()end
if F then F:Disconnect()end
if G then G:Disconnect()end

if g.Elevated then
E=f.DescendantAdded:Connect(aa)
F=f.DescendantRemoving:Connect(ab)
else
E=f.DescendantAdded:Connect(function(ad)pcall(aa,ad)end)
F=f.DescendantRemoving:Connect(function(ad)pcall(ab,ad)end)
end

if j.Explorer.UseNameWidth then
G=f.ItemChanged:Connect(function(ad,ae)
if ae=="Parent"and a[ad]then
ac(ad)
elseif ae=="Name"and a[ad]then
a[ad].NameWidth=nil
end
end)
else
G=f.ItemChanged:Connect(function(ad,ae)
if ae=="Parent"and a[ad]then
ac(ad)
end
end)
end
end

v.ViewNode=function(ad)
if not ad then return end

v.MakeNodeVisible(ad)
v.ForceUpdate(true)
local ae=O.VisibleSpace

for af,ag in next,w do
if ag==ad then
local ah=af-1
if v.Index>ah then
O.Index=ah
elseif v.Index+ae-1<=ah then
O.Index=ah-ae+2
end
end
end

O:Update()v.Index=O.Index
v.Refresh()
end

v.ViewObj=function(ad)
v.ViewNode(a[ad])
end

v.MakeNodeVisible=function(ad,ae)
if not ad then return end

local af=false

if ae and not A[ad]then
A[ad]=true
af=true
end

local ag=ad.Parent
while ag do
af=true
A[ag]=true
ag=ag.Parent
end

if af and not K then
coroutine.wrap(v.PerformUpdate)(true)
end
end

v.ShowRightClick=function(ad)
local ae=ad or g.Mouse
local af=v.RightClickContext
local ag=af.Gui.AbsoluteSize
af.MaxHeight=(ag.Y<=600 and(ag.Y-40))or nil
af:Clear()

local ah=b.List
local ai=b.Map
local aj=#Q==0
local ak={}
local al=o.Classes

for am=1,#ah do
local an=ah[am]
local ao=an.Class
local ap=an.Obj

if not ak.isViableDecompileScript then
ak.isViableDecompileScript=q.isViableDecompileScript(ap)
end
if not ao then
ao=ap.ClassName
an.Class=ao
end

local aq=al[ao]
while aq and not ak[aq.Name]do
ak[aq.Name]=true
aq=aq.Superclass
end
end

af:AddRegistered"CUT"
af:AddRegistered"COPY"
af:AddRegistered("PASTE",aj)
af:AddRegistered"DUPLICATE"
af:AddRegistered"DELETE"
af:AddRegistered("RENAME",#ah~=1)

af:AddDivider()
af:AddRegistered"GROUP"
af:AddRegistered"UNGROUP"
af:AddRegistered"SELECT_CHILDREN"
af:AddRegistered"JUMP_TO_PARENT"
af:AddRegistered"EXPAND_ALL"
af:AddRegistered"COLLAPSE_ALL"

af:AddDivider()

if A==v.SearchExpanded then af:AddRegistered"CLEAR_SEARCH_AND_JUMP_TO"end
if q.setclipboard then af:AddRegistered"COPY_PATH"end
af:AddRegistered"INSERT_OBJECT"






af:QueueDivider()

if ak.BasePart or ak.Model then
af:AddRegistered"TELEPORT_TO"
af:AddRegistered"VIEW_OBJECT"
end
if ak.Tween then af:AddRegistered"PLAY_TWEEN"end
if ak.Animation then
af:AddRegistered"LOAD_ANIMATION"
af:AddRegistered"STOP_ANIMATION"
end

if ak.TouchTransmitter then af:AddRegistered("FIRE_TOUCHTRANSMITTER",firetouchinterest==nil)end
if ak.ClickDetector then af:AddRegistered("FIRE_CLICKDETECTOR",fireclickdetector==nil)end
if ak.ProximityPrompt then af:AddRegistered("FIRE_PROXIMITYPROMPT",fireproximityprompt==nil)end

if ak.Player then af:AddRegistered"SELECT_CHARACTER"af:AddRegistered"VIEW_PLAYER"end
if ak.Players then
af:AddRegistered"SELECT_LOCAL_PLAYER"
af:AddRegistered"SELECT_ALL_CHARACTERS"
end

if ak.LuaSourceContainer then
af:AddRegistered("VIEW_SCRIPT",not ak.isViableDecompileScript or q.decompile==nil)
af:AddRegistered("SAVE_SCRIPT",not ak.isViableDecompileScript or q.decompile==nil or q.writefile==nil)
af:AddRegistered("SAVE_BYTECODE",not ak.isViableDecompileScript or q.getscriptbytecode==nil or q.writefile==nil)
end

if ai[M]then
af:AddRegistered"REFRESH_NIL"
af:AddRegistered"HIDE_NIL"
end

v.LastRightClickX,v.LastRightClickY=ae.X,ae.Y
af:Show(ae.X,ae.Y)
end

v.InitRightClick=function()
local ad=h.ContextMenu.new()

ad:Register("CUT",{Name="Cut",IconMap=v.MiscIcons,Icon="Cut",DisabledIcon="Cut_Disabled",Shortcut="Ctrl+Z",OnClick=function()
local ae,af=f.Destroy,f.Clone
local ag,ah=b.List,{}
local ai=1
for aj=1,#ag do
local ak=ag[aj].Obj
local al,am=pcall(af,ak)
if al and am then
ah[ai]=am
ai=ai+1
end
pcall(ae,ak)
end
Q=ah
b:Clear()
end})

ad:Register("COPY",{Name="Copy",IconMap=v.MiscIcons,Icon="Copy",DisabledIcon="Copy_Disabled",Shortcut="Ctrl+C",OnClick=function()
local ae=f.Clone
local af,ag=b.List,{}
local ah=1
for ai=1,#af do
local aj=af[ai].Obj
local ak,al=pcall(ae,aj)
if ak and al then
ag[ah]=al
ah=ah+1
end
end
Q=ag
end})

ad:Register("PASTE",{Name="Paste Into",IconMap=v.MiscIcons,Icon="Paste",DisabledIcon="Paste_Disabled",Shortcut="Ctrl+Shift+V",OnClick=function()
local ae=b.List
local af={}
local ag=1
for ah=1,#ae do
local ai=ae[ah]
local aj=ai.Obj
v.MakeNodeVisible(ai,true)
for ak=1,#Q do
local al=Q[ak]:Clone()
if al then
al.Parent=aj
local am=a[al]
if am then af[ag]=am ag=ag+1 end
end
end
end
b:SetTable(af)

if#af>0 then
v.ViewNode(af[1])
end
end})

ad:Register("DUPLICATE",{Name="Duplicate",IconMap=v.MiscIcons,Icon="Copy",DisabledIcon="Copy_Disabled",Shortcut="Ctrl+D",OnClick=function()
local ae=f.Clone
local af=b.List
local ag={}
local ah=1
for ai=1,#af do
local aj=af[ai]
local ak=aj.Obj
local al=aj.Parent and aj.Parent.Obj
v.MakeNodeVisible(aj)
local am,an=pcall(ae,ak)
if am and an then
an.Parent=al
local ao=a[an]
if ao then ag[ah]=ao ah=ah+1 end
end
end

b:SetTable(ag)
if#ag>0 then
v.ViewNode(ag[1])
end
end})

ad:Register("DELETE",{Name="Delete",IconMap=v.MiscIcons,Icon="Delete",DisabledIcon="Delete_Disabled",Shortcut="Del",OnClick=function()
local ae=f.Destroy
local af=b.List
for ag=1,#af do
pcall(ae,af[ag].Obj)
end
b:Clear()
end})

ad:Register("RENAME",{Name="Rename",IconMap=v.MiscIcons,Icon="Rename",DisabledIcon="Rename_Disabled",Shortcut="F2",OnClick=function()
local ae=b.List
if ae[1]then
v.SetRenamingNode(ae[1])
end
end})

ad:Register("GROUP",{Name="Group",IconMap=v.MiscIcons,Icon="Group",DisabledIcon="Group_Disabled",Shortcut="Ctrl+G",OnClick=function()
local ae=b.List
if#ae==0 then return end

local af=Instance.new("Model",ae[#ae].Obj.Parent)
for ag=1,#ae do
pcall(function()ae[ag].Obj.Parent=af end)
end

if a[af]then
b:Set(a[af])
v.ViewNode(a[af])
end
end})

ad:Register("UNGROUP",{Name="Ungroup",IconMap=v.MiscIcons,Icon="Ungroup",DisabledIcon="Ungroup_Disabled",Shortcut="Ctrl+U",OnClick=function()
local ae={}
local af=1
local ag=f.IsA

local function ungroup(ah)
local ai=ah.Parent.Obj
local aj={}
local ak=1

for al=1,#ah do
local am=ah[al]
ae[af]=am
aj[ak]=am
af=af+1
ak=ak+1
end

for al=1,#aj do
pcall(function()aj[al].Obj.Parent=ai end)
end

ah.Obj:Destroy()
end

for ah,ai in next,b.List do
if ag(ai.Obj,"Model")then
ungroup(ai)
end
end

b:SetTable(ae)
if#ae>0 then
v.ViewNode(ae[1])
end
end})

ad:Register("SELECT_CHILDREN",{Name="Select Children",IconMap=v.MiscIcons,Icon="SelectChildren",DisabledIcon="SelectChildren_Disabled",OnClick=function()
local ae={}
local af=1
local ag=b.List

for ah=1,#ag do
local ai=ag[ah]
for aj=1,#ai do
local ak=ai[aj]
if aj==1 then v.MakeNodeVisible(ak)end

ae[af]=ak
af=af+1
end
end

b:SetTable(ae)
if#ae>0 then
v.ViewNode(ae[1])
else
v.Refresh()
end
end})

ad:Register("JUMP_TO_PARENT",{Name="Jump to Parent",IconMap=v.MiscIcons,Icon="JumpToParent",OnClick=function()
local ae={}
local af=1
local ag=b.List

for ah=1,#ag do
local ai=ag[ah]
if ai.Parent then
ae[af]=ai.Parent
af=af+1
end
end

b:SetTable(ae)
if#ae>0 then
v.ViewNode(ae[1])
else
v.Refresh()
end
end})

ad:Register("TELEPORT_TO",{Name="Teleport To",IconMap=v.MiscIcons,Icon="TeleportTo",OnClick=function()
local ae=b.List
local af=s.Character and s.Character:FindFirstChild"HumanoidRootPart"

if not af then return end

for ag,ah in next,ae do
local ai=ah.Obj

if ai:IsA"BasePart"then
if ai.CanCollide then
s.Character:MoveTo(ai.Position)
else
af.CFrame=CFrame.new(ai.Position+j.Explorer.TeleportToOffset)
end
break
elseif ai:IsA"Model"then
if ai.PrimaryPart then
if ai.PrimaryPart.CanCollide then
s.Character:MoveTo(ai.PrimaryPart.Position)
else
af.CFrame=CFrame.new(ai.PrimaryPart.Position+j.Explorer.TeleportToOffset)
end
break
else
local aj=ai:FindFirstChildWhichIsA("BasePart",true)
if aj and a[aj]then
if aj.CanCollide then
s.Character:MoveTo(aj.Position)
else
af.CFrame=CFrame.new(aj.Position+j.Explorer.TeleportToOffset)
end
break
elseif ai.WorldPivot then
af.CFrame=ai.WorldPivot
end
end
end
end
end})


ad:Register("PLAY_TWEEN",{Name="Play Tween",IconMap=v.MiscIcons,Icon="Play",OnClick=function()
local ae=b.List

for af=1,#ae do
local ag=ae[af]
local ah=ag.Obj

if ah:IsA"Tween"then ah:Play()end
end
end})

local ae
ad:Register("LOAD_ANIMATION",{Name="Load Animation",IconMap=v.MiscIcons,Icon="Play",OnClick=function()
local af=b.List

local ag=s.Character and s.Character:FindFirstChild"Humanoid"
if not ag then return end

for ah=1,#af do
local ai=af[ah]
local aj=ai.Obj

if aj:IsA"Animation"then
if ae then ae:Stop()end
ae=ag:LoadAnimation(aj)
ae:Play()
break
end
end
end})

ad:Register("STOP_ANIMATION",{Name="Stop Animation",IconMap=v.MiscIcons,Icon="Pause",OnClick=function()
local af=b.List

local ag=s.Character and s.Character:FindFirstChild"Humanoid"
if not ag then return end

for ah=1,#af do
local ai=af[ah]
local aj=ai.Obj

if aj:IsA"Animation"then
if ae then ae:Stop()end
ag:LoadAnimation(aj):Stop()
break
end
end
end})

ad:Register("EXPAND_ALL",{Name="Expand All",OnClick=function()
local af=b.List

local function expand(ag)
A[ag]=true
for ah=1,#ag do
if#ag[ah]>0 then
expand(ag[ah])
end
end
end

for ag=1,#af do
expand(af[ag])
end

v.ForceUpdate()
end})

ad:Register("COLLAPSE_ALL",{Name="Collapse All",OnClick=function()
local af=b.List

local function expand(ag)
A[ag]=nil
for ah=1,#ag do
if#ag[ah]>0 then
expand(ag[ah])
end
end
end

for ag=1,#af do
expand(af[ag])
end

v.ForceUpdate()
end})

ad:Register("CLEAR_SEARCH_AND_JUMP_TO",{Name="Clear Search and Jump to",OnClick=function()
local af={}
local ag=1
local ah=b.List

for ai=1,#ah do
af[ag]=ah[ai]
ag=ag+1
end

b:SetTable(af)
v.ClearSearch()
if#af>0 then
v.ViewNode(af[1])
end
end})


local af=function(af)
if af:sub(1,28)=="game:GetService(\"Workspace\")"then af=af:gsub("game:GetService%(\"Workspace\"%)","workspace",1)end
if af:sub(1,27+#s.Name)=="game:GetService(\"Players\")."..s.Name then af=af:gsub("game:GetService%(\"Players\"%)."..s.Name,"game:GetService(\"Players\").LocalPlayer",1)end
return af
end

ad:Register("COPY_PATH",{Name="Copy Path",IconMap=v.ClassIcons,Icon=50,OnClick=function()
local ag=b.List
if#ag==1 then
q.setclipboard(af(v.GetInstancePath(ag[1].Obj)))
elseif#ag>1 then
local ah={"{"}
local ai=2
for aj=1,#ag do
local ak="\t"..af(v.GetInstancePath(ag[aj].Obj))..","
if#ak>0 then
ah[ai]=ak
ai=ai+1
end
end
ah[ai]="}"
q.setclipboard(W.concat(ah,"\n"))
end
end})

ad:Register("INSERT_OBJECT",{Name="Insert Object",IconMap=v.MiscIcons,Icon="InsertObject",OnClick=function()
local ag=g.Mouse
local ah,ai=v.LastRightClickX or ag.X,v.LastRightClickY or ag.Y
v.InsertObjectContext:Show(ah,ai)
end})





















ad:Register("VIEW_OBJECT",{Name="View Object (Right click to reset)",IconMap=v.ClassIcons,Icon=5,OnClick=function()
local ag=b.List
local ah=f.IsA

for ai=1,#ag do
local aj=ag[ai]

if ah(aj.Obj,"BasePart")or ah(aj.Obj,"Model")then
workspace.CurrentCamera.CameraSubject=aj.Obj
break
end
end
end,OnRightClick=function()
workspace.CurrentCamera.CameraSubject=s.Character
end})

ad:Register("FIRE_TOUCHTRANSMITTER",{Name="Fire TouchTransmitter",IconMap=v.ClassIcons,Icon=37,OnClick=function()
local ag=s.Character and s.Character:FindFirstChild"HumanoidRootPart"
if not ag then return end
for ah,ai in ipairs(b.List)do if ai.Obj and ai.Obj:IsA"TouchTransmitter"then firetouchinterest(ag,ai.Obj.Parent,0)end end
end})

ad:Register("FIRE_CLICKDETECTOR",{Name="Fire ClickDetector",IconMap=v.ClassIcons,Icon=41,OnClick=function()
local ag=s.Character and s.Character:FindFirstChild"HumanoidRootPart"
if not ag then return end
for ah,ai in ipairs(b.List)do if ai.Obj and ai.Obj:IsA"ClickDetector"then fireclickdetector(ai.Obj)end end
end})

ad:Register("FIRE_PROXIMITYPROMPT",{Name="Fire ProximityPrompt",IconMap=v.ClassIcons,Icon=124,OnClick=function()
local ag=s.Character and s.Character:FindFirstChild"HumanoidRootPart"
if not ag then return end
for ah,ai in ipairs(b.List)do if ai.Obj and ai.Obj:IsA"ProximityPrompt"then fireproximityprompt(ai.Obj)end end
end})

ad:Register("VIEW_SCRIPT",{Name="View Script",IconMap=v.MiscIcons,Icon="ViewScript",OnClick=function()
local ag=b.List[1]and b.List[1].Obj
if ag then m.ViewScript(ag)end
end})

ad:Register("SAVE_SCRIPT",{Name="Save Script",IconMap=v.MiscIcons,Icon="Save",OnClick=function()
for ag,ah in next,b.List do
if ah.Obj:IsA"LuaSourceContainer"and q.isViableDecompileScript(ah.Obj)then
local ai,aj=pcall(q.decompile,ah.Obj)
if not ai or not aj then aj=("-- DEX - %s failed to decompile %s"):format(q.executor,ah.Obj.ClassName)end
local ak=("%i.%s.%s.Source.txt"):format(f.PlaceId,ah.Obj.ClassName,q.parsefile(ah.Obj.Name))
q.writefile(ak,aj)
task.wait(0.2)
end
end
end})

ad:Register("SAVE_BYTECODE",{Name="Save Script Bytecode",IconMap=v.MiscIcons,Icon="Save",OnClick=function()
for ag,ah in next,b.List do
if ah.Obj:IsA"LuaSourceContainer"and q.isViableDecompileScript(ah.Obj)then
local ai,aj=pcall(getscriptbytecode,ah.Obj)
if ai and type(aj)=="string"then
local ak=("%i.%s.%s.Bytecode.txt"):format(f.PlaceId,ah.Obj.ClassName,q.parsefile(ah.Obj.Name))
q.writefile(ak,aj)
task.wait(0.2)
end
end
end
end})

ad:Register("SELECT_CHARACTER",{Name="Select Character",IconMap=v.ClassIcons,Icon=9,OnClick=function()
local ag={}
local ah=1
local ai=b.List
local aj=f.IsA

for ak=1,#ai do
local al=ai[ak]
if aj(al.Obj,"Player")and a[al.Obj.Character]then
ag[ah]=a[al.Obj.Character]
ah=ah+1
end
end

b:SetTable(ag)
if#ag>0 then
v.ViewNode(ag[1])
else
v.Refresh()
end
end})

ad:Register("VIEW_PLAYER",{Name="View Player",IconMap=v.ClassIcons,Icon=5,OnClick=function()


local ag=b.List local ah=
f.IsA

for ai=1,#ag do
local aj=ag[ai]
local ak=aj.Obj
if ak:IsA"Player"and ak.Character then
workspace.CurrentCamera.CameraSubject=ak.Character
break
end
end
end})

ad:Register("SELECT_LOCAL_PLAYER",{Name="Select Local Player",IconMap=v.ClassIcons,Icon=9,OnClick=function()
pcall(function()if a[s]then b:Set(a[s])v.ViewNode(a[s])end end)
end})

ad:Register("SELECT_ALL_CHARACTERS",{Name="Select All Characters",IconMap=v.ClassIcons,Icon=2,OnClick=function()
local ag={}local ah=
b.List

for ai,aj in next,r.Players:GetPlayers()do
if aj.Character and a[aj.Character]then
if ai==1 then v.MakeNodeVisible(aj.Character)end
W.insert(ag,a[aj.Character])
end
end

b:SetTable(ag)
if#ag>0 then
v.ViewNode(ag[1])
else
v.Refresh()
end
end})

ad:Register("REFRESH_NIL",{Name="Refresh Nil Instances",OnClick=function()
v.RefreshNilInstances()
end})

ad:Register("HIDE_NIL",{Name="Hide Nil Instances",OnClick=function()
v.HideNilInstances()
end})

v.RightClickContext=ad
end

v.HideNilInstances=function()
W.clear(Y)

local ad=Instance.new"Folder".ChildAdded:Connect(function()end).Disconnect
for ae,af in next,Z do
ad(af[1])
ad(af[2])
end
W.clear(Z)

for ae=1,#M do
coroutine.wrap(ab)(M[ae].Obj)
end

v.Update()
v.Refresh()
end

v.RefreshNilInstances=function()
if not q.getnilinstances then return end

local ad=q.getnilinstances()
local ae=f
local af=ae.GetDescendants







for ag=1,#ad do
local ah=ad[ag]
if ah~=ae then
Y[ah]=true


local ai=af(ah)
for aj=1,#ai do
Y[ai[aj] ]=true
end
end
end












for ag=1,#ad do
local ah=ad[ag]
local ai=a[ah]
if not ai then coroutine.wrap(aa)(ah)end
end























v.Update()
v.Refresh()
end

v.GetInstancePath=function(ad)
local ae=f.FindFirstChild
local af=f.GetChildren
local ag=""
local ah=ad
local ai=tostring
local aj=string.match local ak=
string.gsub
local al=W.find
local am=j.Explorer.CopyPathUseGetChildren
local an=h.FormatLuaString

while ah do
if ah==f then
ag="game"..ag
break
end

local ao=ah.ClassName
local ap=ai(ah)
local aq
if aj(ap,"^[%a_][%w_]*$")then
aq="."..ap
else
local ar=an(ap)
aq='["'..ar..'"]'
end

local ar=ah.Parent
if ar then
local as=ae(ar,ap)
if am and as and as~=ah then
local at=af(ar)
local au=al(at,ah)
aq=":GetChildren()["..au.."]"
elseif ar==f and o.Classes[ao]and o.Classes[ao].Tags.Service then
aq=':GetService("'..ao..'")'
end
elseif ar==nil then
local as="local getNil = function(name, class) for _, v in next, getnilinstances() do if v.ClassName == class and v.Name == name then return v end end end"
local at="\n\ngetNil(\"%s\", \"%s\")"
aq=as..at:format(ah.Name,ao)
end

ag=aq..ag
ah=ar
end

return ag
end

v.DefaultProps={BasePart=
{
Position=function(ad)
local ae=r.Players.LocalPlayer
if ae.Character and ae.Character:FindFirstChild"HumanoidRootPart"then
ad.Position=(ae.Character.HumanoidRootPart.CFrame*CFrame.new(0,0,-10)).p
end
return ad.Position
end,
Anchored=true
},GuiObject=
{
Position=function(ad)return(ad.Parent:IsA"ScreenGui"and UDim2.new(0.5,0,0.5,0))or ad.Position end,
Active=true
}
}

v.InitInsertObject=function()
local ad=h.ContextMenu.new()
ad.SearchEnabled=true
ad.MaxHeight=400
ad:ApplyTheme{
ContentColor=j.Theme.Main2,
OutlineColor=j.Theme.Outline1,
DividerColor=j.Theme.Outline1,
TextColor=j.Theme.Text,
HighlightColor=j.Theme.ButtonHover
}

local ae={}
for af,ag in next,o.Classes do
local ah=ag.Tags
if not ah.NotCreatable and not ah.Service then
local ai=p.Classes[ag.Name]
ae[#ae+1]={ag,ai and ai.ClassCategory or"Uncategorized"}
end
end
W.sort(ae,function(af,ag)
if af[2]~=ag[2]then
return af[2]<ag[2]
else
return af[1].Name<ag[1].Name
end
end)

local function defaultProps(af)
for ag,ah in pairs(v.DefaultProps)do
if af:IsA(ag)then
for ai,aj in pairs(ah)do
af[ai]=(type(aj)=="function"and aj(af))or aj
end
end
end
end

local function onClick(af)
local ag=b.List
local ah=Instance.new
for ai=1,#ag do
local aj=ag[ai]
local ak=aj.Obj
v.MakeNodeVisible(aj,true)
local al,am=pcall(ah,af,ak)
if al and am then defaultProps(am)end
end
end

local af=""
for ag=1,#ae do
local ah=ae[ag][1]
local ai=p.Classes[ah.Name]
local aj=ai and tonumber(ai.ExplorerImageIndex)or 0
local al=ae[ag][2]

if af~=al then
ad:AddDivider(al)
af=al
end
ad:Add{Name=ah.Name,IconMap=v.ClassIcons,Icon=aj,OnClick=onClick}
end

v.InsertObjectContext=ad
end

v._SearchFilters={}do
local ad=v._SearchFilters

local function NewFilter(ae,af)
for ag,ah in next,ae do
ad[ah:lower()..":"]=af
end
end

local ae={
remotes={"RemoteEvent","RemoteFunction","BindableEvent","BindableFunction"},
scripts={"Script","LocalScript","ModuleScript"},
players={"Player"}
}

NewFilter({"parent","p"},function(af,ag)return af.Parent and(af.Parent.Name:lower()):find(ag)end)
NewFilter({"class","c"},function(af,ag)return(af.ClassName:lower()):find(ag)end)
NewFilter({"isa","i"},function(af,ag)return af:IsA(ag)end)

NewFilter({"only","o"},function(af,ag)
local ah=ae[ag]
return ah and W.find(ah,af.ClassName)
end)
end

v.DoSearch=function(ad)
W.clear(v.SearchExpanded)
W.clear(z)
A=(#ad==0 and v.Expanded)or v.SearchExpanded local ae=


W.find;

local af=v._SearchFilters
local ag=v.SearchExpanded

local ah=a[f]

local ai=(function(ai,aj)return(ai.Name:lower()):find(aj,1,true)end)

local function searchTable(aj,al,am)
local an=false
for ao,ap in ipairs(aj)do
if am(ap.Obj,al)then
ag[ap]=0
z[ap]=true
if not an then
local aq=ap.Parent
while aq and(not z[aq]or ag[aq]==0)do
A[aq]=true
z[aq]=true
aq=aq.Parent
end
an=true
end
end

if#ap>0 then searchTable(ap,al,am)end
end
end

local function Search(aj)
if aj:len()==0 then return end

local al=aj:lower()
local am=al:split":"
local an=(af[am[1]..":"])or nil

if an then
searchTable(ah,(am[2]or""),an)
else
searchTable(ah,(al or""),ai)
end
end

for aj,al in ipairs(ad:split",")do
if al:len()>0 then
Search(al)
end
end




































































v.ForceUpdate()
end

v.ClearSearch=function()
v.GuiElems.SearchBar.Text=""
A=v.Expanded
T=nil
end

v.InitSearch=function()
local ad=r.TweenService
local ae=v.GuiElems.ToolBar.SearchFrame
local af=ae.SearchBox
v.GuiElems.SearchBar=af

local ag=TweenInfo.new(0.2,Enum.EasingStyle.Quint)
local ah={
Start=ad:Create(ae.UIStroke,ag,{Color=Color3.fromRGB(0,120,215)}),
End=ad:Create(ae.UIStroke,ag,{Color=Color3.fromRGB(42,42,42)})
}

af.FocusLost:Connect(function()ah.End:Play()end)
af.Focused:Connect(function()ah.Start:Play()end)

h.ViewportTextBox.convert(af)

af.FocusLost:Connect(function()
v.DoSearch(af.Text)
end)
end

v.InitEntryTemplate=function()
B=t{
{1,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0,0,0),BackgroundTransparency=1,BorderColor3=Color3.new(0,0,0),Font=3,Name="Entry",Position=UDim2.new(0,1,0,1),Size=UDim2.new(0,250,0,20),Text="",TextSize=14,}},
{2,"Frame",{BackgroundColor3=Color3.new(0.04313725605607,0.35294118523598,0.68627452850342),BackgroundTransparency=1,BorderColor3=Color3.new(0.33725491166115,0.49019610881805,0.73725491762161),BorderSizePixel=0,Name="Indent",Parent={1},Position=UDim2.new(0,20,0,0),Size=UDim2.new(1,-20,1,0),}},
{3,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="EntryName",Parent={2},Position=UDim2.new(0,26,0,0),Size=UDim2.new(1,-26,1,0),Text="Workspace",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
{4,"TextButton",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,ClipsDescendants=true,Font=3,Name="Expand",Parent={2},Position=UDim2.new(0,-20,0,0),Size=UDim2.new(0,20,0,20),Text="",TextSize=14,}},
{5,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://5642383285",ImageRectOffset=Vector2.new(144,16),ImageRectSize=Vector2.new(16,16),Name="Icon",Parent={4},Position=UDim2.new(0,2,0,2),ScaleType=4,Size=UDim2.new(0,16,0,16),}},
{6,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,ImageRectOffset=Vector2.new(304,0),ImageRectSize=Vector2.new(16,16),Name="Icon",Parent={2},Position=UDim2.new(0,4,0,2),ScaleType=4,Size=UDim2.new(0,16,0,16),}},
}

local ad=h.ClickSystem.new()
ad.AllowedButtons={1,2}
ad.OnDown:Connect(function(ae,af,ag)
local ah=W.find(x,ae)
if not ah then return end
local ai=w[ah+v.Index]
if not ai then return end local aj=

x[ah]

if ag==1 then
if af==2 then
if ai.Obj:IsA"LuaSourceContainer"then
m.ViewScript(ai.Obj)
elseif#ai>0 and A[ai]~=0 then
A[ai]=not A[ai]
v.Update()
end
end

if l.SelectObject(ai.Obj)then
ad.IsRenaming=false
return
end

ad.IsRenaming=b.Map[ai]

if h.IsShiftDown()then
if not b.Piviot then return end

local al=W.find(w,b.Piviot)
local am=W.find(w,ai)
if not al or not am then return end
al,am=X.min(al,am),X.max(al,am)

local an=b.List
for ao=#an,1,-1 do
local ap=an[ao]
if b.ShiftSet[ap]then
b.Map[ap]=nil
W.remove(an,ao)
end
end
b.ShiftSet={}
for ao=al,am do
local ap=w[ao]
if not b.Map[ap]then
b.ShiftSet[ap]=true
b.Map[ap]=true
an[#an+1]=ap
end
end
b.Changed:Fire()
elseif h.IsCtrlDown()then
b.ShiftSet={}
if b.Map[ai]then b:Remove(ai)else b:Add(ai)end
b.Piviot=ai
ad.IsRenaming=false
elseif not b.Map[ai]then
b.ShiftSet={}
b:Set(ai)
b.Piviot=ai
end
elseif ag==2 then
if l.SelectObject(ai.Obj)then
return
end

if not h.IsCtrlDown()and not b.Map[ai]then
b.ShiftSet={}
b:Set(ai)
b.Piviot=ai
v.Refresh()
end
end

v.Refresh()
end)

ad.OnRelease:Connect(function(ae,af,ag,ah)
local ai=W.find(x,ae)
if not ai then return end
local aj=w[ai+v.Index]
if not aj then return end

if ag==1 then
if b.Map[aj]and not h.IsShiftDown()and not h.IsCtrlDown()then
b.ShiftSet={}
b:Set(aj)
b.Piviot=aj
v.Refresh()
end

local al=ad.ClickId
h.FastWait(ad.ComboTime)
if af==1 and al==ad.ClickId and ad.IsRenaming and b.Map[aj]then
v.SetRenamingNode(aj)
end
elseif ag==2 then
v.ShowRightClick(ah)
end
end)
v.ClickSystem=ad
end

v.InitDelCleaner=function()
coroutine.wrap(function()
local ad=h.FastWait
while true do
local ae=false
local af=0
for ag,ah in next,a do
if ah.HasDel then
local ai
for aj=1,#ah do
if ah[aj].Del then
ai=aj
break
end
end
if ai then
for aj=ai+1,#ah do
local al=ah[aj]
if not al.Del then
ah[ai]=al
ai=ai+1
end
end
for aj=ai,#ah do
ah[aj]=nil
end
end
ah.HasDel=false
ae=true
ad()
end
af=af+1
if af>10000 then
af=0
ad()
end
end
if ae and not L then v.PerformRefresh()end
ad(0.5)
end
end)()
end

v.UpdateSelectionVisuals=function()
local ad=v.SelectionVisualsHolder
local ae=f.IsA
local af=f.Clone
if not ad then
ad=Instance.new"ScreenGui"
ad.Name="ExplorerSelections"
ad.DisplayOrder=g.DisplayOrders.Core
h.ShowGui(ad)
v.SelectionVisualsHolder=ad
v.SelectionVisualCons={}

local ag=t{
{1,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Size=UDim2.new(0,100,0,100),}},
{2,"Frame",{BackgroundColor3=Color3.new(0.04313725605607,0.35294118523598,0.68627452850342),BorderSizePixel=0,Parent={1},Position=UDim2.new(0,-1,0,-1),Size=UDim2.new(1,2,0,1),}},
{3,"Frame",{BackgroundColor3=Color3.new(0.04313725605607,0.35294118523598,0.68627452850342),BorderSizePixel=0,Parent={1},Position=UDim2.new(0,-1,1,0),Size=UDim2.new(1,2,0,1),}},
{4,"Frame",{BackgroundColor3=Color3.new(0.04313725605607,0.35294118523598,0.68627452850342),BorderSizePixel=0,Parent={1},Position=UDim2.new(0,-1,0,0),Size=UDim2.new(0,1,1,0),}},
{5,"Frame",{BackgroundColor3=Color3.new(0.04313725605607,0.35294118523598,0.68627452850342),BorderSizePixel=0,Parent={1},Position=UDim2.new(1,0,0,0),Size=UDim2.new(0,1,1,0),}},
}
v.SelectionVisualGui=ag

local ah=Instance.new"SelectionBox"
ah.LineThickness=0.03
ah.Color3=Color3.fromRGB(0,170,255)
v.SelectionVisualBox=ah
end
ad:ClearAllChildren()


for ag,ah in pairs(v.SelectionVisualGui:GetChildren())do
ah.BackgroundColor3=Color3.fromRGB(0,170,255)
end

local ag=v.SelectionVisualCons
for ah=1,#ag do
ag[ah].Destroy()
end
W.clear(ag)

local ah=j.Explorer.PartSelectionBox
local ai=j.Explorer.GuiSelectionBox
if not ah and not ai then return end

local aj=v.SelectionVisualGui
local al=v.SelectionVisualBox
local am=h.AttachTo
local an=b.List
local ao=1
local ap=0
local aq=a[workspace]
for ar=1,#an do
if ap>1000 then break end
local as=an[ar]
local at=as.Obj

if as~=aq then
if ae(at,"GuiObject")and ai then
local au=af(aj)
ag[ao]=am(au,{Target=at,Resize=true})
ao=ao+1
au.Parent=ad
ap=ap+1
elseif ae(at,"PVInstance")and ah then
local au=af(al)
au.Adornee=at
au.Parent=ad
ap=ap+1
end
end
end
end

v.Init=function()
v.ClassIcons=h.IconMap.newLinear("rbxasset://textures/ClassImages.PNG",16,16)
v.MiscIcons=g.MiscIcons

Q={}

b=h.Set.new()
b.ShiftSet={}
b.Changed:Connect(l.ShowExplorerProps)
v.Selection=b

v.InitRightClick()
v.InitInsertObject()
v.SetSortingEnabled(j.Explorer.Sorting)
v.Expanded=setmetatable({},{__mode="k"})
v.SearchExpanded=setmetatable({},{__mode="k"})
A=v.Expanded

M.Obj.Name="Nil Instances"
M.Locked=true

local ad=t{
{1,"Folder",{Name="ExplorerItems",}},
{2,"Frame",{BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BorderSizePixel=0,Name="ToolBar",Parent={1},Size=UDim2.new(1,0,0,22),}},
{3,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.1176470592618,0.1176470592618,0.1176470592618),BorderSizePixel=0,Name="SearchFrame",Parent={2},Position=UDim2.new(0,3,0,1),Size=UDim2.new(1,-6,0,18),}},
{4,"TextBox",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,ClearTextOnFocus=false,Font=3,Name="SearchBox",Parent={3},PlaceholderColor3=Color3.new(0.39215689897537,0.39215689897537,0.39215689897537),PlaceholderText="Search workspace",Position=UDim2.new(0,4,0,0),Size=UDim2.new(1,-24,0,18),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,TextXAlignment=0,}},
{5,"UICorner",{CornerRadius=UDim.new(0,2),Parent={3},}},
{6,"UIStroke",{Thickness=1.4,Parent={3},Color=Color3.fromRGB(42,42,42)}},
{7,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Reset",Parent={3},Position=UDim2.new(1,-17,0,1),Size=UDim2.new(0,16,0,16),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,}},
{8,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://5034718129",ImageColor3=Color3.new(0.39215686917305,0.39215686917305,0.39215686917305),Parent={7},Size=UDim2.new(0,16,0,16),}},
{9,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Refresh",Parent={2},Position=UDim2.new(1,-20,0,1),Size=UDim2.new(0,18,0,18),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,Visible=false,}},
{10,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://5642310344",Parent={9},Position=UDim2.new(0,3,0,3),Size=UDim2.new(0,12,0,12),}},
{11,"Frame",{BackgroundColor3=Color3.new(0.15686275064945,0.15686275064945,0.15686275064945),BorderSizePixel=0,Name="ScrollCorner",Parent={1},Position=UDim2.new(1,-16,1,-16),Size=UDim2.new(0,16,0,16),Visible=false,}},
{12,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,ClipsDescendants=true,Name="List",Parent={1},Position=UDim2.new(0,0,0,23),Size=UDim2.new(1,0,1,-23),}}
}

D=ad.ToolBar
C=ad.List

v.GuiElems.ToolBar=D
v.GuiElems.TreeFrame=C

O=h.ScrollBar.new()
O.WheelIncrement=3
O.Gui.Position=UDim2.new(1,-16,0,23)
O:SetScrollFrame(C)
O.Scrolled:Connect(function()
v.Index=O.Index
v.Refresh()
end)

P=h.ScrollBar.new(true)
P.Increment=5
P.WheelIncrement=v.EntryIndent
P.Gui.Position=UDim2.new(0,0,1,-16)
P.Scrolled:Connect(function()
v.Refresh()
end)

local ae=h.Window.new()
v.Window=ae
ae:SetTitle"Explorer"
ae.GuiElems.Line.Position=UDim2.new(0,0,0,22)

v.InitEntryTemplate()
D.Parent=ae.GuiElems.Content
C.Parent=ae.GuiElems.Content
ad.ScrollCorner.Parent=ae.GuiElems.Content
O.Gui.Parent=ae.GuiElems.Content
P.Gui.Parent=ae.GuiElems.Content


v.InitRenameBox()
v.InitSearch()
v.InitDelCleaner()
b.Changed:Connect(v.UpdateSelectionVisuals)


ae.GuiElems.Main:GetPropertyChangedSignal"AbsoluteSize":Connect(function()
if v.Active then
v.UpdateView()
v.Refresh()
end
end)
ae.OnActivate:Connect(function()
v.Active=true
v.UpdateView()
v.Update()
v.Refresh()
end)
ae.OnRestore:Connect(function()
v.Active=true
v.UpdateView()
v.Update()
v.Refresh()
end)
ae.OnDeactivate:Connect(function()v.Active=false end)
ae.OnMinimize:Connect(function()v.Active=false end)


V=j.Explorer.AutoUpdateSearch


a[f]={Obj=f}
A[a[f] ]=true


if q.getnilinstances then
a[M.Obj]=M
end

v.SetupConnections()

local af=I(f)
if g.Elevated then
for ag=1,#af do
local ah=af[ag]
local ai=a[H(ah,"Instance")]
if not ai then continue end
local aj={
Obj=ah,
Parent=ai,
}
a[ah]=aj
ai[#ai+1]=aj
end
else
for ag=1,#af do
local ah=af[ag]local
ai, aj=pcall(H,ah,"Instance")
local al=a[aj]
if not al then continue end
local am={
Obj=ah,
Parent=al,
}
a[ah]=am
al[#al+1]=am
end
end
end

return v
end

return{InitDeps=initDeps,InitAfterMain=initAfterMain,Main=main}
end,
Properties=function()







local aa,ab,ac,ad
local ae,af,ag,ah
local ai,aj,al,am,an,ao,ap

local function initDeps(aq)
aa=aq.Main
ab=aq.Lib
ac=aq.Apps
ad=aq.Settings

ai=aq.API
aj=aq.RMD
al=aq.env
am=aq.service
an=aq.plr
ao=aq.create
ap=aq.createSimple
end

local function initAfterMain()
ae=ac.Explorer
af=ac.Properties
ag=ac.ScriptViewer
ah=ac.Notebook
end

local function main()
local aq={}

local ar,as,at
local au,g
local h
local i,j,k,l,m,n={},{},{},{},{},{}
local o,p,q
local r,s={},{}
local t,u=table,string
local v=f.GetPropertyChangedSignal
local w=f.GetAttributeChangedSignal
local x=f.IsA
local y=f.GetAttribute
local z=f.SetAttribute

aq.GuiElems={}
aq.Index=0
aq.ViewWidth=0
aq.MinInputWidth=100
aq.EntryIndent=16
aq.EntryOffset=4
aq.NameWidthCache={}
aq.SubPropCache={}
aq.ClassLists={}
aq.SearchText=""

aq.AddAttributeProp={Category="Attributes",Class="",Name="",SpecialRow="AddAttribute",Tags={}}
aq.SoundPreviewProp={Category="Data",ValueType={Name="SoundPlayer"},Class="Sound",Name="Preview",Tags={}}

aq.IgnoreProps={DataModel=
{PrivateServerId=
true,PrivateServerOwnerId=
true,VIPServerId=
true,VIPServerOwnerId=
true
}
}

aq.ExpandableTypes={Vector2=
true,Vector3=
true,UDim=
true,UDim2=
true,CFrame=
true,Rect=
true,PhysicalProperties=
true,Ray=
true,NumberRange=
true,Faces=
true,Axes=
true
}

aq.ExpandableProps={
["Sound.SoundId"]=true
}

aq.CollapsedCategories={
["Surface Inputs"]=true,Surface=
true
}

aq.ConflictSubProps={Vector2=
{"X","Y"},Vector3=
{"X","Y","Z"},UDim=
{"Scale","Offset"},UDim2=
{"X","X.Scale","X.Offset","Y","Y.Scale","Y.Offset"},CFrame=
{"Position","Position.X","Position.Y","Position.Z",
"RightVector","RightVector.X","RightVector.Y","RightVector.Z",
"UpVector","UpVector.X","UpVector.Y","UpVector.Z",
"LookVector","LookVector.X","LookVector.Y","LookVector.Z"},Rect=
{"Min.X","Min.Y","Max.X","Max.Y"},PhysicalProperties=
{"Density","Elasticity","ElasticityWeight","Friction","FrictionWeight"},Ray=
{"Origin","Origin.X","Origin.Y","Origin.Z","Direction","Direction.X","Direction.Y","Direction.Z"},NumberRange=
{"Min","Max"},Faces=
{"Back","Bottom","Front","Left","Right","Top"},Axes=
{"X","Y","Z"}
}

aq.ConflictIgnore={BasePart=
{ResizableFaces=
true
}
}

aq.RoundableTypes={float=
true,double=
true,Color3=
true,UDim=
true,UDim2=
true,Vector2=
true,Vector3=
true,NumberRange=
true,Rect=
true,NumberSequence=
true,ColorSequence=
true,Ray=
true,CFrame=
true
}

aq.TypeNameConvert={number=
"double",boolean=
"bool"
}

aq.ToNumberTypes={int=
true,int64=
true,float=
true,double=
true
}

aq.DefaultPropValue={
string="",
bool=false,
double=0,
UDim=UDim.new(0,0),
UDim2=UDim2.new(0,0,0,0),
BrickColor=BrickColor.new"Medium stone grey",
Color3=Color3.new(1,1,1),
Vector2=Vector2.new(0,0),
Vector3=Vector3.new(0,0,0),
NumberSequence=NumberSequence.new(1),
ColorSequence=ColorSequence.new(Color3.new(1,1,1)),
NumberRange=NumberRange.new(0),
Rect=Rect.new(0,0,0,0)
}

aq.AllowedAttributeTypes={"string","boolean","number","UDim","UDim2","BrickColor","Color3","Vector2","Vector3","NumberSequence","ColorSequence","NumberRange","Rect"}

aq.StringToValue=function(A,B)
local C=A.ValueType
local D=C.Name

if D=="string"or D=="Content"then
return B
elseif aq.ToNumberTypes[D]then
return tonumber(B)
elseif D=="Vector2"then
local E=B:split","
local F,G=tonumber(E[1]),tonumber(E[2])
if F and G and#E>=2 then return Vector2.new(F,G)end
elseif D=="Vector3"then
local E=B:split","
local F,G,H=tonumber(E[1]),tonumber(E[2]),tonumber(E[3])
if F and G and H and#E>=3 then return Vector3.new(F,G,H)end
elseif D=="UDim"then
local E=B:split","
local F,G=tonumber(E[1]),tonumber(E[2])
if F and G and#E>=2 then return UDim.new(F,G)end
elseif D=="UDim2"then
local E=B:gsub("[{}]",""):split","
local F,G,H,I=tonumber(E[1]),tonumber(E[2]),tonumber(E[3]),tonumber(E[4])
if F and G and H and I and#E>=4 then return UDim2.new(F,G,H,I)end
elseif D=="CFrame"then
local E=B:split","
local F,G=pcall(CFrame.new,unpack(E))
if F and#E>=12 then return G end
elseif D=="Rect"then
local E=B:split","
local F,G=pcall(Rect.new,unpack(E))
if F and#E>=4 then return G end
elseif D=="Ray"then
local E=B:gsub("[{}]",""):split","
local F,G=pcall(Vector3.new,unpack(E,1,3))
local H,I=pcall(Vector3.new,unpack(E,4,6))
if F and H and#E>=6 then return Ray.new(G,I)end
elseif D=="NumberRange"then
local E=B:split","
local F,G=pcall(NumberRange.new,unpack(E))
if F and#E>=1 then return G end
elseif D=="Color3"then
local E=B:gsub("[{}]",""):split","
local F,G=pcall(Color3.fromRGB,unpack(E))
if F and#E>=3 then return G end
end

return nil
end

aq.ValueToString=function(A,B)
local C=A.ValueType
local D=C.Name

if D=="Color3"then
return ab.ColorToBytes(B)
elseif D=="NumberRange"then
return B.Min..", "..B.Max
end

return tostring(B)
end

aq.GetIndexableProps=function(A,B)
if not aa.Elevated then
if not pcall(function()return A.ClassName end)then return nil end
end

local C=aq.IgnoreProps[B.Name]or{}

local D={}
local E=1
local F=B.Properties
for G=1,#F do
local H=F[G]
if not C[H.Name]then
local I=pcall(function()return A[H.Name]end)
if I then
D[E]=H
E=E+1
end
end
end

return D
end

aq.FindFirstObjWhichIsA=function(A)
local B=aq.ClassLists[A]or{}
if B and#B>0 then
return B[1]
end

return nil
end

aq.ComputeConflicts=function(A)
local B=ad.Properties.MaxConflictCheck
local C=ae.Selection.List
local D=aq.ClassLists
local E=u.split
local F=t.clear
local G=aq.ConflictIgnore
local H={}
local I=A and{A}or i

if A then
local J=A.Class.."."..A.Name
n[J]=nil
local K=aq.ConflictSubProps[A.ValueType.Name]or{}
for L=1,#K do
n[J.."."..K[L] ]=nil
end
else
t.clear(n)
end

if#C>0 then
for J=1,#I do
local K=I[J]
local L,M=K.Name,K.Class
local N=K.RootType or K.ValueType
local O=N.Name
local P=K.AttributeName
local Q=M.."."..L

local R=0
local S=aq.ConflictSubProps[O]or{}
local T=#S
local U=T+1
local V=0
local W={}
local X=G[M]and G[M][L]
local Y=(O=="PhysicalProperties")
local Z=K.IsAttribute
local _=K.MultiType

F(H)

if not _ then
local av,aw,ax
local ay=D[K.Class]or{}
for az=1,#ay do
local aA=ay[az]
if not ax then
if Z then
av=y(aA,P)
if av~=nil then
aw=aA
ax=true
end
else
av=aA[L]
aw=aA
ax=true
end
if X then break end
else
local aB,aC
if Z then
aB=y(aA,P)
if aB==nil then aC=true end
else
aB=aA[L]
end

if not aC then
if not H[1]then
if Y then
if(av and true or false)~=(aB and true or false)then
H[1]=true
V=V+1
end
elseif av~=aB then
H[1]=true
V=V+1
end
end

if T>0 then
for aD=1,T do
local aE=W[aD]
if not aE then aE=E(S[aD],".")W[aD]=aE end

local aF=av
local aG=aB

for aH=1,#aE do
if not aF or not aG then break end
local aI=aE[aH]
aF=aF[aI]
aG=aG[aI]
end

local aH=aD+1
if not H[aH]and aF~=aG then
H[aH]=true
V=V+1
end
end
end

if V==U then break end
end
end

R=R+1
if R==B then break end
end

if not H[1]then n[Q]=aw end
for az=1,T do
if not H[az+1]then
n[Q.."."..S[az] ]=aw
end
end
end
end
end

if A then
aq.Refresh()
end
end


ad.Properties.ShowAttributes=true
aq.ShowExplorerProps=function()local av=
ad.Properties.MaxConflictCheck
local aw=ae.Selection.List
local ax={}
local ay=1 local az=
aa.Elevated
local aA,aB=ad.Properties.ShowDeprecated,ad.Properties.ShowHidden
local aC=ai.Classes
local aD={}
local aE=u.lower
local aF=aj.PropertyOrders
local aG=f.GetAttributes
local aH=ad.Properties.MaxAttributes
local aI=ad.Properties.ShowAttributes
local A={}
local B=0
local C=typeof
local D=aq.TypeNameConvert

t.clear(i)

for E=1,#aw do
local F=aw[E]
local G=F.Obj
local H=F.Class
if not H then H=G.ClassName F.Class=H end

local I=aC[H]
while I do
local J=I.Name
if not ax[J]then
local K=l[J]
if not K then K=aq.GetIndexableProps(G,I)l[J]=K end

for L=1,#K do
local M=K[L]
local N=M.Tags
if(not N.Deprecated or aA)and(not N.Hidden or aB)then
i[ay]=M
ay=ay+1
end
end
ax[J]=true
end

local K=aD[J]
if not K then K={}aD[J]=K end
K[#K+1]=G

I=I.Superclass
end

if aI and B<aH then
local J=aG(G)
for K,L in pairs(J)do
local M=C(L)
if not A[K]then
local N=(M=="Instance"and"Class")or(M=="EnumItem"and"Enum")or"Other"
local O={Name=D[M]or M,Category=N}
local P={IsAttribute=true,Name="ATTR_"..K,AttributeName=K,DisplayName=K,Class="Instance",ValueType=O,Category="Attributes",Tags={}}
i[ay]=P
ay=ay+1
B=B+1
A[K]={M,P}
if B==aH then break end
elseif A[K][1]~=M then
A[K][2].MultiType=true
A[K][2].Tags.ReadOnly=true
A[K][2].ValueType={Name="string"}
end
end
end
end

t.sort(i,function(E,F)
if E.Category~=F.Category then
return(h[E.Category]or 9999)<(h[F.Category]or 9999)
else
local G=(aF[E.Class]and aF[E.Class][E.Name])or 9999999
local H=(aF[F.Class]and aF[F.Class][F.Name])or 9999999
if G~=H then
return G<H
else
return aE(E.Name)<aE(F.Name)
end
end
end)


aq.ClassLists=aD
aq.ComputeConflicts()

if#i>0 then
i[#i+1]=aq.AddAttributeProp
end

aq.Update()
aq.Refresh()
end

aq.UpdateView=function()
local aw=math.ceil(at.AbsoluteSize.Y/23)
local ax=at.AbsoluteSize.X
local ay=aq.ViewWidth+aq.MinInputWidth

au.VisibleSpace=aw
au.TotalSpace=#j+1
g.VisibleSpace=ax
g.TotalSpace=ay

au.Gui.Visible=#j+1>aw
g.Gui.Visible=ad.Properties.ScaleType==0 and ay>ax

local az=at.Size
at.Size=UDim2.new(1,(au.Gui.Visible and-16 or 0),1,(g.Gui.Visible and-39 or-23))
if az~=at.Size then
aq.UpdateView()
else
au:Update()
g:Update()

if au.Gui.Visible and g.Gui.Visible then
au.Gui.Size=UDim2.new(0,16,1,-39)
g.Gui.Size=UDim2.new(1,-16,0,16)
aq.Window.GuiElems.Content.ScrollCorner.Visible=true
else
au.Gui.Size=UDim2.new(0,16,1,-23)
g.Gui.Size=UDim2.new(1,0,0,16)
aq.Window.GuiElems.Content.ScrollCorner.Visible=false
end

aq.Index=au.Index
end
end

aq.MakeSubProp=function(aw,ax,ay,az)
local aA={}
for aB,aC in pairs(aw)do
aA[aB]=aC
end
aA.RootType=aA.RootType or aA.ValueType
aA.ValueType=ay
aA.SubName=aA.SubName and(aA.SubName..ax)or ax
aA.DisplayName=az

return aA
end

aq.GetExpandedProps=function(aw)
local ax={}
local ay=aw.ValueType
local az=ay.Name
local aA=aq.MakeSubProp

if az=="Vector2"then
ax[1]=aA(aw,".X",{Name="float"})
ax[2]=aA(aw,".Y",{Name="float"})
elseif az=="Vector3"then
ax[1]=aA(aw,".X",{Name="float"})
ax[2]=aA(aw,".Y",{Name="float"})
ax[3]=aA(aw,".Z",{Name="float"})
elseif az=="CFrame"then
ax[1]=aA(aw,".Position",{Name="Vector3"})
ax[2]=aA(aw,".RightVector",{Name="Vector3"})
ax[3]=aA(aw,".UpVector",{Name="Vector3"})
ax[4]=aA(aw,".LookVector",{Name="Vector3"})
elseif az=="UDim"then
ax[1]=aA(aw,".Scale",{Name="float"})
ax[2]=aA(aw,".Offset",{Name="int"})
elseif az=="UDim2"then
ax[1]=aA(aw,".X",{Name="UDim"})
ax[2]=aA(aw,".Y",{Name="UDim"})
elseif az=="Rect"then
ax[1]=aA(aw,".Min.X",{Name="float"},"X0")
ax[2]=aA(aw,".Min.Y",{Name="float"},"Y0")
ax[3]=aA(aw,".Max.X",{Name="float"},"X1")
ax[4]=aA(aw,".Max.Y",{Name="float"},"Y1")
elseif az=="PhysicalProperties"then
ax[1]=aA(aw,".Density",{Name="float"})
ax[2]=aA(aw,".Elasticity",{Name="float"})
ax[3]=aA(aw,".ElasticityWeight",{Name="float"})
ax[4]=aA(aw,".Friction",{Name="float"})
ax[5]=aA(aw,".FrictionWeight",{Name="float"})
elseif az=="Ray"then
ax[1]=aA(aw,".Origin",{Name="Vector3"})
ax[2]=aA(aw,".Direction",{Name="Vector3"})
elseif az=="NumberRange"then
ax[1]=aA(aw,".Min",{Name="float"})
ax[2]=aA(aw,".Max",{Name="float"})
elseif az=="Faces"then
ax[1]=aA(aw,".Back",{Name="bool"})
ax[2]=aA(aw,".Bottom",{Name="bool"})
ax[3]=aA(aw,".Front",{Name="bool"})
ax[4]=aA(aw,".Left",{Name="bool"})
ax[5]=aA(aw,".Right",{Name="bool"})
ax[6]=aA(aw,".Top",{Name="bool"})
elseif az=="Axes"then
ax[1]=aA(aw,".X",{Name="bool"})
ax[2]=aA(aw,".Y",{Name="bool"})
ax[3]=aA(aw,".Z",{Name="bool"})
end

if aw.Name=="SoundId"and aw.Class=="Sound"then
ax[1]=aq.SoundPreviewProp
end

return ax
end

aq.Update=function()
t.clear(j)

local aw=aq.NameWidthCache
local ax
local ay=1
local az,aA=0,1

local aB=am.TextService
local aC=aB.GetTextSize
local aD=Enum.Font.SourceSans
local aE=Vector2.new(math.huge,20)
local aF=u.split
local aG=aq.EntryIndent
local aH=ad.Properties.ScaleType==0
local aI,A=u.find,u.lower
local B=(#aq.SearchText>0 and A(aq.SearchText))

local function recur(C,D)
for E=1,#C do
local F=C[E]
local G=F.Name
local H=F.SubName
local I=F.Category

local J
if B and D==1 then
if aI(A(G),B,1,true)then
J=true
end
else
J=true
end

if J and ax~=I then
j[ay]={CategoryName=I}
ay=ay+1
ax=I
end

if(k["CAT_"..I]and J)or F.SpecialRow then
if D>1 then F.Depth=D if D>aA then aA=D end end

if aH then
local K=H and aF(H,".")
local L=F.DisplayName or(K and K[#K])or G

local M=aw[L]
if not M then M=aC(aB,L,14,aD,aE).X aw[L]=M end

local N=M+aG*D
if N>az then
az=N
end
end

j[ay]=F
ay=ay+1

local K=F.Class.."."..F.Name..(F.SubName or"")
if k[K]then
local L=D+1
local M=aq.GetExpandedProps(F)
if#M>0 then
recur(M,L)
end
end
end
end
end
recur(i,1)

q=nil
aq.ViewWidth=az+9+aq.EntryOffset
aq.UpdateView()
end

aq.NewPropEntry=function(aw)
local ax=aq.EntryTemplate:Clone()
local ay=ax.NameFrame
local az=ax.ValueFrame
local aA=ab.Checkbox.new(1)
aA.Gui.Position=UDim2.new(0,3,0,3)
aA.Gui.Parent=az
aA.OnInput:Connect(function()
local aB=j[aw+aq.Index]
if not aB then return end

if aB.ValueType.Name=="PhysicalProperties"then
aq.SetProp(aB,aA.Toggled and true or nil)
else
aq.SetProp(aB,aA.Toggled)
end
end)
r[aw]=aA

local aB=aa.MiscIcons:GetLabel()
aB.Position=UDim2.new(0,2,0,3)
aB.Parent=ax.ValueFrame.RightButton

ax.Position=UDim2.new(0,0,0,23*(aw-1))

ay.Expand.InputBegan:Connect(function(aC)
local aD=j[aw+aq.Index]
if not aD or(aC.UserInputType~=Enum.UserInputType.MouseMovement and aC.UserInputType~=Enum.UserInputType.Touch)then return end

local aE=(aD.CategoryName and"CAT_"..aD.CategoryName)or aD.Class.."."..aD.Name..(aD.SubName or"")

aa.MiscIcons:DisplayByKey(ax.NameFrame.Expand.Icon,k[aE]and"Collapse_Over"or"Expand_Over")
end)

ay.Expand.InputEnded:Connect(function(aC)
local aD=j[aw+aq.Index]
if not aD or(aC.UserInputType~=Enum.UserInputType.MouseMovement and aC.UserInputType~=Enum.UserInputType.Touch)then return end

local aE=(aD.CategoryName and"CAT_"..aD.CategoryName)or aD.Class.."."..aD.Name..(aD.SubName or"")

aa.MiscIcons:DisplayByKey(ax.NameFrame.Expand.Icon,k[aE]and"Collapse"or"Expand")
end)

ay.Expand.MouseButton1Down:Connect(function()
local aC=j[aw+aq.Index]
if not aC then return end

local aD=(aC.CategoryName and"CAT_"..aC.CategoryName)or aC.Class.."."..aC.Name..(aC.SubName or"")
if not aC.CategoryName and not aq.ExpandableTypes[aC.ValueType and aC.ValueType.Name]and not aq.ExpandableProps[aD]then return end

k[aD]=not k[aD]
aq.Update()
aq.Refresh()
end)

ay.PropName.InputBegan:Connect(function(aC)
local aD=j[aw+aq.Index]
if not aD then return end
if(aC.UserInputType==Enum.UserInputType.MouseMovement or aC.UserInputType==Enum.UserInputType.Touch)and not ay.PropName.TextFits then
local aE=aq.FullNameFrame
local aF=u.split(aD.Class.."."..aD.Name..(aD.SubName or""),".")
local aG=aD.DisplayName or aF[#aF]
local aH=am.TextService:GetTextSize(aG,14,Enum.Font.SourceSans,Vector2.new(math.huge,20)).X

aE.TextLabel.Text=aG
aE.Size=UDim2.new(0,aH+4,0,22)
aE.Visible=true
aq.FullNameFrameIndex=aw
aq.FullNameFrameAttach.SetData(aE,{Target=ay})
aq.FullNameFrameAttach.Enable()
end
end)

ay.PropName.InputEnded:Connect(function(aC)
if(aC.UserInputType==Enum.UserInputType.MouseMovement or aC.UserInputType==Enum.UserInputType.Touch)and aq.FullNameFrameIndex==aw then
aq.FullNameFrame.Visible=false
aq.FullNameFrameAttach.Disable()
end
end)


az.ValueBox.MouseButton1Down:Connect(function()
local aC=j[aw+aq.Index]
if not aC then return end

aq.SetInputProp(aC,aw)
end)

az.ColorButton.MouseButton1Down:Connect(function()
local aC=j[aw+aq.Index]
if not aC then return end

aq.SetInputProp(aC,aw,"color")
end)

az.RightButton.MouseButton1Click:Connect(function()
local aC=j[aw+aq.Index]
if not aC then return end

local aD=aC.Class.."."..aC.Name..(aC.SubName or"")
local aE=q and(q.Class.."."..q.Name..(q.SubName or""))

if aD==aE and q.ValueType.Category=="Class"then
q=nil
aq.SetProp(aC,nil)
else
aq.SetInputProp(aC,aw,"right")
end
end)

ay.ToggleAttributes.MouseButton1Click:Connect(function()
ad.Properties.ShowAttributes=not ad.Properties.ShowAttributes
aq.ShowExplorerProps()
end)

ax.RowButton.MouseButton1Click:Connect(function()
aq.DisplayAddAttributeWindow()
end)

ax.EditAttributeButton.MouseButton1Down:Connect(function()
local aC=j[aw+aq.Index]
if not aC then return end

aq.DisplayAttributeContext(aC)
end)

az.SoundPreview.ControlButton.MouseButton1Click:Connect(function()
if aq.PreviewSound and aq.PreviewSound.Playing then
aq.SetSoundPreview(false)
else
local aC=aq.FindFirstObjWhichIsA"Sound"
if aC then aq.SetSoundPreview(aC)end
end
end)

az.SoundPreview.InputBegan:Connect(function(aC)
if aC.UserInputType~=Enum.UserInputType.MouseButton1 and aC.UserInputType~=Enum.UserInputType.Touch then return end

local aD,aE
aD=am.UserInputService.InputEnded:Connect(function(aF)
if aF.UserInputType==Enum.UserInputType.MouseButton1 or aF.UserInputType==Enum.UserInputType.Touch then
aD:Disconnect()
if aE then
aE:Disconnect()
end
end
end)

local aF=ax.ValueFrame.SoundPreview.TimeLine
local aG=aq.FindFirstObjWhichIsA"Sound"
if aG then aq.SetSoundPreview(aG,true)end

local function update(aH)
local aI=aq.PreviewSound
if not aI or aI.TimeLength==0 then return end

local A=(aH.UserInputType==Enum.UserInputType.Touch)and aH.Position.X or aH.Position.X
local B=aF.AbsoluteSize
local C=A-aF.AbsolutePosition.X

if B.X<=1 then return end
if C<0 then C=0 elseif C>=B.X then C=B.X-1 end

local D=(C/(B.X-1))
aI.TimePosition=D*aI.TimeLength
aF.Slider.Position=UDim2.new(D,-4,0,-8)
end

update(aC)

aE=am.UserInputService.InputChanged:Connect(function(aH)
if aH.UserInputType==Enum.UserInputType.MouseMovement or aH.UserInputType==Enum.UserInputType.Touch then
update(aH)
end
end)
end)


ax.Parent=at

return{
Gui=ax,
GuiElems={
NameFrame=ay,
ValueFrame=az,
PropName=ay.PropName,
ValueBox=az.ValueBox,
Expand=ay.Expand,
ColorButton=az.ColorButton,
ColorPreview=az.ColorButton.ColorPreview,
Gradient=az.ColorButton.ColorPreview.UIGradient,
EnumArrow=az.EnumArrow,
Checkbox=az.Checkbox,
RightButton=az.RightButton,
RightButtonIcon=aB,
RowButton=ax.RowButton,
EditAttributeButton=ax.EditAttributeButton,
ToggleAttributes=ay.ToggleAttributes,
SoundPreview=az.SoundPreview,
SoundPreviewSlider=az.SoundPreview.TimeLine.Slider
}
}
end

aq.GetSoundPreviewEntry=function()
for aw=1,#j do
if j[aw]==aq.SoundPreviewProp then
return m[aw-aq.Index]
end
end
end

aq.SetSoundPreview=function(aw,ax)
local ay=aq.PreviewSound
if not ay then
ay=Instance.new"Sound"
ay.Name="Preview"
ay.Paused:Connect(function()
local az=aq.GetSoundPreviewEntry()
if az then aa.MiscIcons:DisplayByKey(az.GuiElems.SoundPreview.ControlButton.Icon,"Play")end
end)
ay.Resumed:Connect(function()aq.Refresh()end)
ay.Ended:Connect(function()
local az=aq.GetSoundPreviewEntry()
if az then az.GuiElems.SoundPreviewSlider.Position=UDim2.new(0,-4,0,-8)end
aq.Refresh()
end)
ay.Parent=ar.Gui
aq.PreviewSound=ay
end

if not aw then
ay:Pause()
else
local az=ay.SoundId~=aw.SoundId
ay.SoundId=aw.SoundId
ay.PlaybackSpeed=aw.PlaybackSpeed
ay.Volume=aw.Volume
if az then ay.TimePosition=0 end
if not ax then ay:Resume()end

coroutine.wrap(function()
local aA=tick()
aq.SoundPreviewTime=aA
while aA==aq.SoundPreviewTime and ay.Playing do
local aB=aq.GetSoundPreviewEntry()
if aB then
local aC=ay.TimeLength
local aD=ay.TimePosition/(aC==0 and 1 or aC)
aB.GuiElems.SoundPreviewSlider.Position=UDim2.new(aD,-4,0,-8)
end
ab.FastWait()
end
end)()
aq.Refresh()
end
end

aq.DisplayAttributeContext=function(aw)
local ax=aq.AttributeContext
if not ax then
ax=ab.ContextMenu.new()
ax.Iconless=true
ax.Width=80
end
ax:Clear()

ax:Add{Name="Edit",OnClick=function()
aq.DisplayAddAttributeWindow(aw)
end}
ax:Add{Name="Delete",OnClick=function()
aq.SetProp(aw,nil,true)
aq.ShowExplorerProps()
end}

ax:Show()
end

aq.DisplayAddAttributeWindow=function(aw)
local ax=aq.AddAttributeWindow
if not ax then
ax=ab.Window.new()
ax.Alignable=false
ax.Resizable=false
ax:SetTitle"Add Attribute"
ax:SetSize(200,130)

local ay=ab.Button.new()
local az=ab.Label.new()
az.Text="Name"
az.Position=UDim2.new(0,30,0,10)
az.Size=UDim2.new(0,40,0,20)
ax:Add(az)

local aA=ab.ViewportTextBox.new()
aA.Position=UDim2.new(0,75,0,10)
aA.Size=UDim2.new(0,120,0,20)
ax:Add(aA,"NameBox")
aA.TextBox:GetPropertyChangedSignal"Text":Connect(function()
ay:SetDisabled(#aA:GetText()==0)
end)

local aB=ab.Label.new()
aB.Text="Type"
aB.Position=UDim2.new(0,30,0,40)
aB.Size=UDim2.new(0,40,0,20)
ax:Add(aB)

local aC=ab.DropDown.new()
aC.CanBeEmpty=false
aC.Position=UDim2.new(0,75,0,40)
aC.Size=UDim2.new(0,120,0,20)
aC:SetOptions(aq.AllowedAttributeTypes)
ax:Add(aC,"TypeChooser")

local aD=ab.Label.new()
aD.Text=""
aD.Position=UDim2.new(0,5,1,-45)
aD.Size=UDim2.new(1,-10,0,20)
aD.TextColor3=ad.Theme.Important
ax.ErrorLabel=aD
ax:Add(aD,"Error")

local aE=ab.Button.new()
aE.Text="Cancel"
aE.Position=UDim2.new(1,-97,1,-25)
aE.Size=UDim2.new(0,92,0,20)
aE.OnClick:Connect(function()
ax:Close()
end)
ax:Add(aE)

ay.Text="Save"
ay.Position=UDim2.new(0,5,1,-25)
ay.Size=UDim2.new(0,92,0,20)
ay.OnClick:Connect(function()
local aF=aA:GetText()
if#aF>100 then
aD.Text="Error: Name over 100 chars"
return
elseif aF:sub(1,3)=="RBX"then
aD.Text="Error: Name begins with 'RBX'"
return
end

local aG=aC.Selected
local aH={Name=aq.TypeNameConvert[aG]or aG,Category="DataType"}
local aI={IsAttribute=true,Name="ATTR_"..aF,AttributeName=aF,DisplayName=aF,Class="Instance",ValueType=aH,Category="Attributes",Tags={}}

ad.Properties.ShowAttributes=true
aq.SetProp(aI,aq.DefaultPropValue[aH.Name],true,aq.EditingAttribute)
aq.ShowExplorerProps()
ax:Close()
end)
ax:Add(ay,"SaveButton")

aq.AddAttributeWindow=ax
end

aq.EditingAttribute=aw
ax:SetTitle(aw and"Edit Attribute "..aw.AttributeName or"Add Attribute")
ax.Elements.Error.Text=""
ax.Elements.NameBox:SetText""
ax.Elements.SaveButton:SetDisabled(true)
ax.Elements.TypeChooser:SetSelected(1)
ax:Show()
end

aq.IsTextEditable=function(aw)
local ax=aw.ValueType
local ay=ax.Name

return ay~="bool"and ax.Category~="Enum"and ax.Category~="Class"and ay~="BrickColor"
end

aq.DisplayEnumDropdown=function(aw)
local ax=aq.EnumContext
if not ax then
ax=ab.ContextMenu.new()
ax.Iconless=true
ax.MaxHeight=200
ax.ReverseYOffset=22
aq.EnumDropdown=ax
end

if not q or q.ValueType.Category~="Enum"then return end
local ay=q

local az=m[aw]
local aA=az.GuiElems.ValueFrame

local aB=Enum[ay.ValueType.Name]
if not aB then return end

local aC={}
for aD,aE in next,aB:GetEnumItems()do
aC[#aC+1]=aE
end
t.sort(aC,function(aD,aE)return aD.Name<aE.Name end)

ax:Clear()

local function onClick(aD)
if ay~=q then return end

local aE=aB[aD]
q=nil
aq.SetProp(ay,aE)
end

for aD=1,#aC do
local aE=aC[aD]
ax:Add{Name=aE.Name,OnClick=onClick}
end

ax.Width=aA.AbsoluteSize.X
ax:Show(aA.AbsolutePosition.X,aA.AbsolutePosition.Y+22)
end

aq.DisplayBrickColorEditor=function(aw,ax,ay)
local az=aq.BrickColorEditor
if not az then
az=ab.BrickColorPicker.new()
az.Gui.DisplayOrder=aa.DisplayOrders.Menu
az.ReverseYOffset=22

az.OnSelect:Connect(function(aA)
if not az.CurrentProp or az.CurrentProp.ValueType.Name~="BrickColor"then return end

if az.CurrentProp==q then q=nil end
aq.SetProp(az.CurrentProp,BrickColor.new(aA))
end)

az.OnMoreColors:Connect(function()
az:Close()
local aA
for aB,aC in pairs(ai.Classes.BasePart.Properties)do
if aC.Name=="Color"then
aA=aC
break
end
end
aq.DisplayColorEditor(aA,az.SavedColor.Color)
end)

aq.BrickColorEditor=az
end

local aA=m[ax]
local aB=aA.GuiElems.ValueFrame

az.CurrentProp=aw
az.SavedColor=ay
if aw and aw.Class=="BasePart"and aw.Name=="BrickColor"then
az:SetMoreColorsVisible(true)
else
az:SetMoreColorsVisible(false)
end
az:Show(aB.AbsolutePosition.X,aB.AbsolutePosition.Y+22)
end

aq.DisplayColorEditor=function(aw,ax)
local ay=aq.ColorEditor
if not ay then
ay=ab.ColorPicker.new()

ay.OnSelect:Connect(function(az)
if not ay.CurrentProp then return end
local aA=ay.CurrentProp.ValueType.Name
if aA~="Color3"and aA~="BrickColor"then return end

local aB=(aA=="Color3"and az or BrickColor.new(az))

if ay.CurrentProp==q then q=nil end
aq.SetProp(ay.CurrentProp,aB)
end)

aq.ColorEditor=ay
end

ay.CurrentProp=aw
if ax then
ay:SetColor(ax)
else
local az=aq.GetFirstPropVal(aw)
if az then ay:SetColor(az)end
end
ay:Show()
end

aq.DisplayNumberSequenceEditor=function(aw,ax)
local ay=aq.NumberSequenceEditor
if not ay then
ay=ab.NumberSequenceEditor.new()

ay.OnSelect:Connect(function(az)
if not ay.CurrentProp or ay.CurrentProp.ValueType.Name~="NumberSequence"then return end

if ay.CurrentProp==q then q=nil end
aq.SetProp(ay.CurrentProp,az)
end)

aq.NumberSequenceEditor=ay
end

ay.CurrentProp=aw
if ax then
ay:SetSequence(ax)
else
local az=aq.GetFirstPropVal(aw)
if az then ay:SetSequence(az)end
end
ay:Show()
end

aq.DisplayColorSequenceEditor=function(aw,ax)
local ay=aq.ColorSequenceEditor
if not ay then
ay=ab.ColorSequenceEditor.new()

ay.OnSelect:Connect(function(az)
if not ay.CurrentProp or ay.CurrentProp.ValueType.Name~="ColorSequence"then return end

if ay.CurrentProp==q then q=nil end
aq.SetProp(ay.CurrentProp,az)
end)

aq.ColorSequenceEditor=ay
end

ay.CurrentProp=aw
if ax then
ay:SetSequence(ax)
else
local az=aq.GetFirstPropVal(aw)
if az then ay:SetSequence(az)end
end
ay:Show()
end

aq.GetFirstPropVal=function(aw)
local ax=aq.FindFirstObjWhichIsA(aw.Class)
if ax then
return aq.GetPropVal(aw,ax)
end
end

aq.GetPropVal=function(aw,ax)
if aw.MultiType then return"<Multiple Types>"end
if not ax then return end

local ay
if aw.IsAttribute then
ay=y(ax,aw.AttributeName)
if ay==nil then return nil end

local az=typeof(ay)
local aA=aq.TypeNameConvert[az]or az
if aw.RootType then
if aw.RootType.Name~=aA then
return nil
end
elseif aw.ValueType.Name~=aA then
return nil
end
else
ay=ax[aw.Name]
end
if aw.SubName then
local az=u.split(aw.SubName,".")
for aA=1,#az do
local aB=az[aA]
if#aB>0 and ay then
ay=ay[aB]
end
end
end

return ay
end

aq.SelectObject=function(aw)
if q and q.ValueType.Category=="Class"then
local ax=q
q=nil

if x(aw,ax.ValueType.Name)then
aq.SetProp(ax,aw)
else
aq.Refresh()
end

return true
end

return false
end

aq.DisplayProp=function(aw,ax)local ay=
aw.Name
local az=aw.ValueType
local aA=az.Name
local aB=aw.Tags
local aC=aw.Class.."."..aw.Name..(aw.SubName or"")
local aD=n[aC]
local aE=m[ax]
local aF=UDim2

local aG=aE.GuiElems local aH=
aG.ValueFrame
local aI=aG.ValueBox
local A=aG.ColorButton
local B=aG.ColorPreview
local C=aG.Gradient
local D=aG.EnumArrow
local E=aG.Checkbox
local F=aG.RightButton
local G=aG.SoundPreview

local H=aq.GetPropVal(aw,aD)
local I=q and(q.Class.."."..q.Name..(q.SubName or""))

local J=4
local K=6


if(aA=="Color3"or aA=="BrickColor"or aA=="ColorSequence")then
A.Visible=true
D.Visible=false
if H then
C.Color=(aA=="Color3"and ColorSequence.new(H))or(aA=="BrickColor"and ColorSequence.new(H.Color))or H
else
C.Color=ColorSequence.new(Color3.new(1,1,1))
end
B.BorderColor3=(aA=="ColorSequence"and Color3.new(1,1,1)or Color3.new(0,0,0))
J=22
K=24+(aA=="ColorSequence"and 20 or 0)
elseif az.Category=="Enum"then
A.Visible=false
D.Visible=not aw.Tags.ReadOnly
K=22
elseif(aC==I and az.Category=="Class")or aA=="NumberSequence"then
A.Visible=false
D.Visible=false
K=26
else
A.Visible=false
D.Visible=false
end

aI.Position=aF.new(0,J,0,0)
aI.Size=aF.new(1,-K,1,0)


if I==aC and az.Category=="Class"then
aa.MiscIcons:DisplayByKey(aG.RightButtonIcon,"Delete")
aG.RightButtonIcon.Visible=true
F.Text=""
F.Visible=true
elseif aA=="NumberSequence"or aA=="ColorSequence"then
aG.RightButtonIcon.Visible=false
F.Text="..."
F.Visible=true
else
F.Visible=false
end


if aA=="bool"or aA=="PhysicalProperties"then
aI.Visible=false
E.Visible=true
G.Visible=false
r[ax].Disabled=aB.ReadOnly
if aA=="PhysicalProperties"and n[aC]then
r[ax]:SetState(H and true or false)
else
r[ax]:SetState(H)
end
elseif aA=="SoundPlayer"then
aI.Visible=false
E.Visible=false
G.Visible=true
local L=aq.PreviewSound and aq.PreviewSound.Playing
aa.MiscIcons:DisplayByKey(G.ControlButton.Icon,L and"Pause"or"Play")
else
aI.Visible=true
E.Visible=false
G.Visible=false

if H~=nil then
if aA=="Color3"then
aI.Text="["..ab.ColorToBytes(H).."]"
elseif az.Category=="Enum"then
aI.Text=H.Name
elseif aq.RoundableTypes[aA]and ad.Properties.NumberRounding then
local L=aq.ValueToString(aw,H)
aI.Text=L:gsub("-?%d+%.%d+",function(M)
return tostring(tonumber(("%."..ad.Properties.NumberRounding.."f"):format(M)))
end)
else
aI.Text=aq.ValueToString(aw,H)
end
else
aI.Text=""
end

aI.TextColor3=aB.ReadOnly and ad.Theme.PlaceholderText or ad.Theme.Text
end
end

aq.Refresh=function()
local aw=math.max(math.ceil((at.AbsoluteSize.Y)/23),0)
local ax=at.AbsoluteSize.X
local az=math.max(aq.MinInputWidth,ax-aq.ViewWidth)
local aA=false local aB=
f.IsA
local aC=UDim2
local aD=u.split
local aE=ad.Properties.ScaleType


for aF=1,#s do
s[aF]:Disconnect()
end
t.clear(s)


aq.FullNameFrame.Visible=false
aq.FullNameFrameAttach.Disable()

for aF=1,aw do
local aG=m[aF]
if not m[aF]then aG=aq.NewPropEntry(aF)m[aF]=aG end

local aH=aG.Gui
local aI=aG.GuiElems
local A=aI.NameFrame
local B=aI.PropName
local C=aI.ValueFrame
local D=aI.Expand
local E=aI.ValueBox
local F=aI.PropName local G=
aI.RightButton
local H=aI.EditAttributeButton
local I=aI.ToggleAttributes

local J=j[aF+aq.Index]
if J then
local K=(aE==0 and g.Index or 0)
aH.Visible=true
aH.Position=aC.new(0,-K,0,aH.Position.Y.Offset)
aH.Size=aC.new(aE==0 and 0 or 1,aE==0 and aq.ViewWidth+az or 0,0,22)

if J.SpecialRow then
if J.SpecialRow=="AddAttribute"then
A.Visible=false
C.Visible=false
aI.RowButton.Visible=true
end
else

A.Visible=true
aI.RowButton.Visible=false

local L=aq.EntryIndent*(J.Depth or 1)
local M=L+aq.EntryOffset
A.Position=aC.new(0,M,0,0)
B.Size=aC.new(1,-2-(aE==0 and 0 or 6),1,0)

local N=(J.CategoryName and"CAT_"..J.CategoryName)or J.Class.."."..J.Name..(J.SubName or"")

if J.CategoryName then
aH.BackgroundColor3=ad.Theme.Main1
C.Visible=false

F.Text=J.CategoryName
F.Font=Enum.Font.SourceSansBold
D.Visible=true
F.TextColor3=ad.Theme.Text
A.BackgroundTransparency=1
A.Size=aC.new(1,0,1,0)
H.Visible=false

local O=ad.Properties.ShowAttributes
I.Position=aC.new(1,-85-M,0,0)
I.Text=(O and"[Setting: ON]"or"[Setting: OFF]")
I.TextColor3=ad.Theme.Text
I.Visible=(J.CategoryName=="Attributes")
else
local O=J.Name
local P=J.ValueType
local Q=P.Name
local R=J.Tags
local S=n[N]

local T=(J.IsAttribute and 20 or 0)
H.Visible=(J.IsAttribute and not J.RootType)
I.Visible=false


if aE==0 then
A.Size=aC.new(0,aq.ViewWidth-M-1,1,0)
C.Position=aC.new(0,aq.ViewWidth,0,0)
C.Size=aC.new(0,az-T,1,0)
else
A.Size=aC.new(0.5,-M-1,1,0)
C.Position=aC.new(0.5,0,0,0)
C.Size=aC.new(0.5,-T,1,0)
end

local U=aD(N,".")
F.Text=J.DisplayName or U[#U]
F.Font=Enum.Font.SourceSans
aH.BackgroundColor3=ad.Theme.Main2
C.Visible=true

D.Visible=P.Category=="DataType"and aq.ExpandableTypes[Q]or aq.ExpandableProps[N]
F.TextColor3=R.ReadOnly and ad.Theme.PlaceholderText or ad.Theme.Text


aq.DisplayProp(J,aF)
if S then
if J.IsAttribute then
s[#s+1]=w(S,J.AttributeName):Connect(function()
aq.DisplayProp(J,aF)
end)
else
s[#s+1]=v(S,O):Connect(function()
aq.DisplayProp(J,aF)
end)
end
end


local V=E.Visible
local W=q and(q.Class.."."..q.Name..(q.SubName or""))
if N==W then
A.BackgroundColor3=ad.Theme.ListSelection
A.BackgroundTransparency=0
if P.Category=="Class"or P.Category=="Enum"or Q=="BrickColor"then
C.BackgroundColor3=ad.Theme.TextBox
C.BackgroundTransparency=0
E.Visible=true
else
aA=true
local X=(aE==0 and 0 or 0.5)
local Y=(aE==0 and aq.ViewWidth-g.Index or 0)
local Z=0

if Q=="Color3"or Q=="ColorSequence"then
Y=Y+22
end

if Q=="NumberSequence"or Q=="ColorSequence"then
Z=20
end

o.Position=aC.new(X,Y,0,aH.Position.Y.Offset)
o.Size=aC.new(1-X,-Y-Z-T,0,22)
o.Visible=true
E.Visible=false
end
else
A.BackgroundColor3=ad.Theme.Main1
A.BackgroundTransparency=1
C.BackgroundColor3=ad.Theme.Main1
C.BackgroundTransparency=1
E.Visible=V
end
end


if J.CategoryName or aq.ExpandableTypes[J.ValueType and J.ValueType.Name]or aq.ExpandableProps[N]then
if ab.CheckMouseInGui(D)then
aa.MiscIcons:DisplayByKey(D.Icon,k[N]and"Collapse_Over"or"Expand_Over")
else
aa.MiscIcons:DisplayByKey(D.Icon,k[N]and"Collapse"or"Expand")
end
D.Visible=true
else
D.Visible=false
end
end
aH.Visible=true
else
aH.Visible=false
end
end

if not aA then
o.Visible=false
end

for aF=aw+1,#m do
m[aF].Gui:Destroy()
m[aF]=nil
r[aF]=nil
end
end

aq.SetProp=function(aw,ax,az,aA)
local aB=ae.Selection.List
local aC=aw.Name
local aD=aw.SubName
local aE=aw.Class
local aF=aw.ValueType
local aG=aF.Name
local aH=aw.AttributeName
local aI=aw.RootType
local A=aI and aI.Name local B=
aw.Class.."."..aw.Name..(aw.SubName or"")
local C=Vector3

for D=1,#aB do
local E=aB[D]
local F=E.Obj

if x(F,aE)then
pcall(function()
local G=ax
local H
if aw.IsAttribute then
H=y(F,aH)
else
H=F[aC]
end

if aA then
if aA.ValueType.Name==aG then
G=y(F,aA.AttributeName)or G
end
z(F,aA.AttributeName,nil)
end

if A then
if A=="Vector2"then
G=Vector2.new((aD==".X"and G)or H.X,(aD==".Y"and G)or H.Y)
elseif A=="Vector3"then
G=C.new((aD==".X"and G)or H.X,(aD==".Y"and G)or H.Y,(aD==".Z"and G)or H.Z)
elseif A=="UDim"then
G=UDim.new((aD==".Scale"and G)or H.Scale,(aD==".Offset"and G)or H.Offset)
elseif A=="UDim2"then
local I,J=H.X,H.Y
local K=(aD==".X"and G)or UDim.new((aD==".X.Scale"and G)or I.Scale,(aD==".X.Offset"and G)or I.Offset)
local L=(aD==".Y"and G)or UDim.new((aD==".Y.Scale"and G)or J.Scale,(aD==".Y.Offset"and G)or J.Offset)
G=UDim2.new(K,L)
elseif A=="CFrame"then
local I,J,K,L=H.Position,H.RightVector,H.UpVector,H.LookVector
local M=(aD==".Position"and G)or C.new((aD==".Position.X"and G)or I.X,(aD==".Position.Y"and G)or I.Y,(aD==".Position.Z"and G)or I.Z)
local N=(aD==".RightVector"and G)or C.new((aD==".RightVector.X"and G)or J.X,(aD==".RightVector.Y"and G)or J.Y,(aD==".RightVector.Z"and G)or J.Z)
local O=(aD==".UpVector"and G)or C.new((aD==".UpVector.X"and G)or K.X,(aD==".UpVector.Y"and G)or K.Y,(aD==".UpVector.Z"and G)or K.Z)
local P=(aD==".LookVector"and G)or C.new((aD==".LookVector.X"and G)or L.X,(aD==".RightVector.Y"and G)or L.Y,(aD==".RightVector.Z"and G)or L.Z)
G=CFrame.fromMatrix(M,N,O,-P)
elseif A=="Rect"then
local I,J=H.Min,H.Max
local K=Vector2.new((aD==".Min.X"and G)or I.X,(aD==".Min.Y"and G)or I.Y)
local L=Vector2.new((aD==".Max.X"and G)or J.X,(aD==".Max.Y"and G)or J.Y)
G=Rect.new(K,L)
elseif A=="PhysicalProperties"then
local I=PhysicalProperties.new(F.Material)
local J=(aD==".Density"and G)or(H and H.Density)or I.Density
local K=(aD==".Friction"and G)or(H and H.Friction)or I.Friction
local L=(aD==".Elasticity"and G)or(H and H.Elasticity)or I.Elasticity
local M=(aD==".FrictionWeight"and G)or(H and H.FrictionWeight)or I.FrictionWeight
local N=(aD==".ElasticityWeight"and G)or(H and H.ElasticityWeight)or I.ElasticityWeight
G=PhysicalProperties.new(J,K,L,M,N)
elseif A=="Ray"then
local I,J=H.Origin,H.Direction
local K=(aD==".Origin"and G)or C.new((aD==".Origin.X"and G)or I.X,(aD==".Origin.Y"and G)or I.Y,(aD==".Origin.Z"and G)or I.Z)
local L=(aD==".Direction"and G)or C.new((aD==".Direction.X"and G)or J.X,(aD==".Direction.Y"and G)or J.Y,(aD==".Direction.Z"and G)or J.Z)
G=Ray.new(K,L)
elseif A=="Faces"then
local I={}
local J={"Back","Bottom","Front","Left","Right","Top"}
for K,L in pairs(J)do
local M
if aD=="."..L then
M=G
else
M=H[L]
end
if M then I[#I+1]=Enum.NormalId[L]end
end
G=Faces.new(unpack(I))
elseif A=="Axes"then
local I={}
local J={"X","Y","Z"}
for K,L in pairs(J)do
local M
if aD=="."..L then
M=G
else
M=H[L]
end
if M then I[#I+1]=Enum.Axis[L]end
end
G=Axes.new(unpack(I))
elseif A=="NumberRange"then
G=NumberRange.new(aD==".Min"and G or H.Min,aD==".Max"and G or H.Max)
end
end

if aG=="PhysicalProperties"and G then
G=H or PhysicalProperties.new(F.Material)
end

if aw.IsAttribute then
z(F,aH,G)
else
F[aC]=G
end
end)
end
end

if not az then
aq.ComputeConflicts(aw)
end
end

aq.InitInputBox=function()
o=ao{
{1,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderSizePixel=0,Name="InputBox",Size=UDim2.new(0,200,0,22),Visible=false,ZIndex=2,}},
{2,"TextBox",{BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BackgroundTransparency=1,BorderColor3=Color3.new(0.062745101749897,0.51764708757401,1),BorderSizePixel=0,ClearTextOnFocus=false,Font=3,Parent={1},PlaceholderColor3=Color3.new(0.69803923368454,0.69803923368454,0.69803923368454),Position=UDim2.new(0,3,0,0),Size=UDim2.new(1,-6,1,0),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,TextXAlignment=0,ZIndex=2,}},
}
p=o.TextBox
o.BackgroundColor3=ad.Theme.TextBox
o.Parent=aq.Window.GuiElems.Content.List

p.FocusLost:Connect(function()
if not q then return end

local aw=q
q=nil
local ax=aq.StringToValue(aw,p.Text)
if ax then aq.SetProp(aw,ax)else aq.Refresh()end
end)

p.Focused:Connect(function()
p.SelectionStart=1
p.CursorPosition=#p.Text+1
end)

ab.ViewportTextBox.convert(p)
end

aq.SetInputProp=function(aw,ax,az)
local aA=aw.ValueType
local aB=aA.Name
local aC=aw.Class.."."..aw.Name..(aw.SubName or"")
local aD=n[aC]
local aE=aq.GetPropVal(aw,aD)

if aw.Tags.ReadOnly then return end

q=aw
if az then
if az=="color"then
if aB=="Color3"then
p.Text=aE and aq.ValueToString(aw,aE)or""
aq.DisplayColorEditor(aw,aE)
elseif aB=="BrickColor"then
aq.DisplayBrickColorEditor(aw,ax,aE)
elseif aB=="ColorSequence"then
p.Text=aE and aq.ValueToString(aw,aE)or""
aq.DisplayColorSequenceEditor(aw,aE)
end
elseif az=="right"then
if aB=="NumberSequence"then
p.Text=aE and aq.ValueToString(aw,aE)or""
aq.DisplayNumberSequenceEditor(aw,aE)
elseif aB=="ColorSequence"then
p.Text=aE and aq.ValueToString(aw,aE)or""
aq.DisplayColorSequenceEditor(aw,aE)
end
end
else
if aq.IsTextEditable(aw)then
p.Text=aE and aq.ValueToString(aw,aE)or""
p:CaptureFocus()
elseif aA.Category=="Enum"then
aq.DisplayEnumDropdown(ax)
elseif aB=="BrickColor"then
aq.DisplayBrickColorEditor(aw,ax,aE)
end
end
aq.Refresh()
end

aq.InitSearch=function()
local aw=am.TweenService
local ax=aq.GuiElems.ToolBar.SearchFrame
local az=ax.SearchBox

local aA=TweenInfo.new(0.2,Enum.EasingStyle.Quint)

local aB={
Start=aw:Create(ax.UIStroke,aA,{Color=Color3.fromRGB(0,120,215)}),
End=aw:Create(ax.UIStroke,aA,{Color=Color3.fromRGB(42,42,42)})
}

ab.ViewportTextBox.convert(az)

az.FocusLost:Connect(function()aB.End:Play()end)
az.Focused:Connect(function()aB.Start:Play()end)

az:GetPropertyChangedSignal"Text":Connect(function()
aq.SearchText=az.Text
aq.Update()
aq.Refresh()
end)
end

aq.InitEntryStuff=function()
aq.EntryTemplate=ao{
{1,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderColor3=Color3.new(0.1294117718935,0.1294117718935,0.1294117718935),Font=3,Name="Entry",Position=UDim2.new(0,1,0,1),Size=UDim2.new(0,250,0,22),Text="",TextSize=14,}},
{2,"Frame",{BackgroundColor3=Color3.new(0.04313725605607,0.35294118523598,0.68627452850342),BackgroundTransparency=1,BorderColor3=Color3.new(0.33725491166115,0.49019610881805,0.73725491762161),BorderSizePixel=0,Name="NameFrame",Parent={1},Position=UDim2.new(0,20,0,0),Size=UDim2.new(1,-40,1,0),}},
{3,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="PropName",Parent={2},Position=UDim2.new(0,2,0,0),Size=UDim2.new(1,-2,1,0),Text="Anchored",TextColor3=Color3.new(1,1,1),TextSize=14,TextTransparency=0.10000000149012,TextTruncate=1,TextXAlignment=0,}},
{4,"TextButton",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,ClipsDescendants=true,Font=3,Name="Expand",Parent={2},Position=UDim2.new(0,-20,0,1),Size=UDim2.new(0,20,0,20),Text="",TextSize=14,Visible=false,}},
{5,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://5642383285",ImageRectOffset=Vector2.new(144,16),ImageRectSize=Vector2.new(16,16),Name="Icon",Parent={4},Position=UDim2.new(0,2,0,2),ScaleType=4,Size=UDim2.new(0,16,0,16),}},
{6,"TextButton",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=4,Name="ToggleAttributes",Parent={2},Position=UDim2.new(1,-85,0,0),Size=UDim2.new(0,85,0,22),Text="[SETTING: OFF]",TextColor3=Color3.new(1,1,1),TextSize=14,TextTransparency=0.10000000149012,Visible=false,}},
{7,"Frame",{BackgroundColor3=Color3.new(0.04313725605607,0.35294118523598,0.68627452850342),BackgroundTransparency=1,BorderColor3=Color3.new(0.33725491166115,0.49019607901573,0.73725491762161),BorderSizePixel=0,Name="ValueFrame",Parent={1},Position=UDim2.new(1,-100,0,0),Size=UDim2.new(0,80,1,0),}},
{8,"Frame",{BackgroundColor3=Color3.new(0.14117647707462,0.14117647707462,0.14117647707462),BorderColor3=Color3.new(0.33725491166115,0.49019610881805,0.73725491762161),BorderSizePixel=0,Name="Line",Parent={7},Position=UDim2.new(0,-1,0,0),Size=UDim2.new(0,1,1,0),}},
{9,"TextButton",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="ColorButton",Parent={7},Size=UDim2.new(0,20,0,22),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,Visible=false,}},
{10,"Frame",{BackgroundColor3=Color3.new(1,1,1),BorderColor3=Color3.new(0,0,0),Name="ColorPreview",Parent={9},Position=UDim2.new(0,5,0,6),Size=UDim2.new(0,10,0,10),}},
{11,"UIGradient",{Parent={10},}},
{12,"Frame",{BackgroundTransparency=1,Name="EnumArrow",Parent={7},Position=UDim2.new(1,-16,0,3),Size=UDim2.new(0,16,0,16),Visible=false,}},
{13,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={12},Position=UDim2.new(0,8,0,9),Size=UDim2.new(0,1,0,1),}},
{14,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={12},Position=UDim2.new(0,7,0,8),Size=UDim2.new(0,3,0,1),}},
{15,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={12},Position=UDim2.new(0,6,0,7),Size=UDim2.new(0,5,0,1),}},
{16,"TextButton",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="ValueBox",Parent={7},Position=UDim2.new(0,4,0,0),Size=UDim2.new(1,-8,1,0),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,TextTransparency=0.10000000149012,TextTruncate=1,TextXAlignment=0,}},
{17,"TextButton",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="RightButton",Parent={7},Position=UDim2.new(1,-20,0,0),Size=UDim2.new(0,20,0,22),Text="...",TextColor3=Color3.new(1,1,1),TextSize=14,Visible=false,}},
{18,"TextButton",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="SettingsButton",Parent={7},Position=UDim2.new(1,-20,0,0),Size=UDim2.new(0,20,0,22),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,Visible=false,}},
{19,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Name="SoundPreview",Parent={7},Size=UDim2.new(1,0,1,0),Visible=false,}},
{20,"TextButton",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="ControlButton",Parent={19},Size=UDim2.new(0,20,0,22),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,}},
{21,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://5642383285",ImageRectOffset=Vector2.new(144,16),ImageRectSize=Vector2.new(16,16),Name="Icon",Parent={20},Position=UDim2.new(0,2,0,3),ScaleType=4,Size=UDim2.new(0,16,0,16),}},
{22,"Frame",{BackgroundColor3=Color3.new(0.3137255012989,0.3137255012989,0.3137255012989),BorderSizePixel=0,Name="TimeLine",Parent={19},Position=UDim2.new(0,26,0.5,-1),Size=UDim2.new(1,-34,0,2),}},
{23,"Frame",{BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderColor3=Color3.new(0.1294117718935,0.1294117718935,0.1294117718935),Name="Slider",Parent={22},Position=UDim2.new(0,-4,0,-8),Size=UDim2.new(0,8,0,18),}},
{24,"TextButton",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="EditAttributeButton",Parent={1},Position=UDim2.new(1,-20,0,0),Size=UDim2.new(0,20,0,22),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,}},
{25,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://5034718180",ImageTransparency=0.20000000298023,Name="Icon",Parent={24},Position=UDim2.new(0,2,0,3),Size=UDim2.new(0,16,0,16),}},
{26,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderSizePixel=0,Font=3,Name="RowButton",Parent={1},Size=UDim2.new(1,0,1,0),Text="Add Attribute",TextColor3=Color3.new(1,1,1),TextSize=14,TextTransparency=0.10000000149012,Visible=false,}},
}

local aw=ab.Frame.new()
local ax=ab.Label.new()
ax.Parent=aw.Gui
ax.Position=UDim2.new(0,2,0,0)
ax.Size=UDim2.new(1,-4,1,0)
aw.Visible=false
aw.Parent=ar.Gui

aq.FullNameFrame=aw
aq.FullNameFrameAttach=ab.AttachTo(aw)
end

aq.Init=function()
local aw=ao{
{1,"Folder",{Name="Items",}},
{2,"Frame",{BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BorderSizePixel=0,Name="ToolBar",Parent={1},Size=UDim2.new(1,0,0,22),}},
{3,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.1176470592618,0.1176470592618,0.1176470592618),BorderSizePixel=0,Name="SearchFrame",Parent={2},Position=UDim2.new(0,3,0,1),Size=UDim2.new(1,-6,0,18),}},
{4,"TextBox",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,ClearTextOnFocus=false,Font=3,Name="SearchBox",Parent={3},PlaceholderColor3=Color3.new(0.39215689897537,0.39215689897537,0.39215689897537),PlaceholderText="Search properties",Position=UDim2.new(0,4,0,0),Size=UDim2.new(1,-24,0,18),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,TextXAlignment=0,}},
{5,"UICorner",{CornerRadius=UDim.new(0,2),Parent={3},}},
{6,"UIStroke",{Thickness=1.4,Parent={3},Color=Color3.fromRGB(42,42,42)}},
{7,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Reset",Parent={3},Position=UDim2.new(1,-17,0,1),Size=UDim2.new(0,16,0,16),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,}},
{8,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://5034718129",ImageColor3=Color3.new(0.39215686917305,0.39215686917305,0.39215686917305),Parent={7},Size=UDim2.new(0,16,0,16),}},
{9,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Refresh",Parent={2},Position=UDim2.new(1,-20,0,1),Size=UDim2.new(0,18,0,18),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,Visible=false,}},
{10,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://5642310344",Parent={9},Position=UDim2.new(0,3,0,3),Size=UDim2.new(0,12,0,12),}},
{11,"Frame",{BackgroundColor3=Color3.new(0.15686275064945,0.15686275064945,0.15686275064945),BorderSizePixel=0,Name="ScrollCorner",Parent={1},Position=UDim2.new(1,-16,1,-16),Size=UDim2.new(0,16,0,16),Visible=false,}},
{12,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,ClipsDescendants=true,Name="List",Parent={1},Position=UDim2.new(0,0,0,23),Size=UDim2.new(1,0,1,-23),}},
}


h=ai.CategoryOrder
for ax,az in next,h do
if not aq.CollapsedCategories[ax]then
k["CAT_"..ax]=true
end
end
k["Sound.SoundId"]=true


ar=ab.Window.new()
aq.Window=ar
ar:SetTitle"Properties"

as=aw.ToolBar
at=aw.List

aq.GuiElems.ToolBar=as
aq.GuiElems.PropsFrame=at

aq.InitEntryStuff()


ar.GuiElems.Main:GetPropertyChangedSignal"AbsoluteSize":Connect(function()
if aq.Window:IsContentVisible()then
aq.UpdateView()
aq.Refresh()
end
end)
ar.OnActivate:Connect(function()
aq.UpdateView()
aq.Update()
aq.Refresh()
end)
ar.OnRestore:Connect(function()
aq.UpdateView()
aq.Update()
aq.Refresh()
end)


au=ab.ScrollBar.new()
au.WheelIncrement=3
au.Gui.Position=UDim2.new(1,-16,0,23)
au:SetScrollFrame(at)
au.Scrolled:Connect(function()
aq.Index=au.Index
aq.Refresh()
end)

g=ab.ScrollBar.new(true)
g.Increment=5
g.WheelIncrement=20
g.Gui.Position=UDim2.new(0,0,1,-16)
g.Scrolled:Connect(function()
aq.Refresh()
end)


ar.GuiElems.Line.Position=UDim2.new(0,0,0,22)
as.Parent=ar.GuiElems.Content
at.Parent=ar.GuiElems.Content
aw.ScrollCorner.Parent=ar.GuiElems.Content
au.Gui.Parent=ar.GuiElems.Content
g.Gui.Parent=ar.GuiElems.Content
aq.InitInputBox()
aq.InitSearch()
end

return aq
end

return{InitDeps=initDeps,InitAfterMain=initAfterMain,Main=main}
end,
ScriptViewer=function()







local aa,ab,ac,ad
local ae,af,ag,ah
local ai,aj,al,am,an,ao,ap

local function initDeps(aq)
aa=aq.Main
ab=aq.Lib
ac=aq.Apps
ad=aq.Settings

ai=aq.API
aj=aq.RMD
al=aq.env
am=aq.service
an=aq.plr
ao=aq.create
ap=aq.createSimple
end

local function initAfterMain()
ae=ac.Explorer
af=ac.Properties
ag=ac.ScriptViewer
ah=ac.Notebook
end

local function main()
local aq={}
local ar,as
local at

aq.ViewScript=function(au)
local aw,ax=pcall(al.decompile,au)
if not aw or not ax then ax,at=("-- DEX - %s failed to decompile %s"):format(al.executor,au.ClassName),nil else at=au end
as:SetText(ax:gsub("\0","\\0"))
ar:Show()
end

aq.Init=function()
ar=ab.Window.new()
ar:SetTitle"Script Viewer"
ar:Resize(500,400)
aq.Window=ar

as=ab.CodeFrame.new()
as.Frame.Position=UDim2.new(0,0,0,20)
as.Frame.Size=UDim2.new(1,0,1,-20)
as.Frame.Parent=ar.GuiElems.Content


local au=Instance.new("TextButton",ar.GuiElems.Content)
au.BackgroundTransparency=1
au.Size=UDim2.new(0.5,0,0,20)
au.Text="Copy to Clipboard"
au.TextColor3=Color3.new(1,1,1)

au.MouseButton1Click:Connect(function()
local aw=as:GetText()
al.setclipboard(aw)
end)

local aw=Instance.new("TextButton",ar.GuiElems.Content)
aw.BackgroundTransparency=1
aw.Position=UDim2.new(0.35,0,0,0)
aw.Size=UDim2.new(0.3,0,0,20)
aw.Text="Save to File"
aw.TextColor3=Color3.new(1,1,1)

aw.MouseButton1Click:Connect(function()
local ax=as:GetText()
local az="Place_"..f.PlaceId.."_Script_"..os.time()..".txt"

al.writefile(az,ax)
if al.movefileas then
al.movefileas(az,".txt")
end
end)

local ax=Instance.new("TextButton",ar.GuiElems.Content)
ax.BackgroundTransparency=1
ax.Position=UDim2.new(0.7,0,0,0)
ax.Size=UDim2.new(0.3,0,0,20)
ax.Text="Dump Functions"
ax.TextColor3=Color3.new(1,1,1)

ax.MouseButton1Click:Connect(function()
if at~=nil then
pcall(function()

local az=getgc or get_gc_objects
local aA=(debug and debug.getupvalues)or getupvalues or getupvals
local aB=(debug and debug.getconstants)or getconstants or getconsts
local aC=(debug and(debug.getinfo or debug.info))or getinfo
local aD=("\n-- // Function Dumper made by King.Kevin\n-- // Script Path: %s\n\n--[["):format(at:GetFullName())
local aE=aD local
aF, aG={}, {}
function aF.add_to_dump(aH,aI,g,h)
local i=h or true
aE=aE..("%s%s%s"):format(string.rep("		",g),tostring(aI),i and"\n"or"")
end
function aF.get_function_name(aH,aI)
local g=aC(aI).name
return g~=""and g or"Unknown Name"
end
function aF.dump_table(aH,aI,g,h)
local i=g<0 and 0 or g
aF:add_to_dump(("%s [%s] %s"):format(tostring(h),tostring(typeof(aI)),tostring(aI)),i-1)
local j=0
for k,l in pairs(aI)do
j=j+1
if type(l)=="function"then
aF:add_to_dump(("%d [function] = %s"):format(j,aF:get_function_name(l)),i)
elseif type(l)=="table"then
if not aG[l]then
aG[l]=true
aF:add_to_dump(("%d [table]:"):format(j),i)
aF:dump_table(l,i+1,k)
else
aF:add_to_dump(("%d [table] (Recursive table detected)"):format(j),i)
end
else
aF:add_to_dump(("%d [%s] = %s"):format(j,tostring(typeof(l)),tostring(l)),i)
end
end
end
function aF.dump_function(aH,aI,g)
aF:add_to_dump(("\nFunction Dump: %s"):format(aF:get_function_name(aI)),g)
aF:add_to_dump(("\nFunction Upvalues: %s"):format(aF:get_function_name(aI)),g)
for h,i in pairs(aA(aI))do
if type(i)=="function"then
aF:add_to_dump(("%d [function] = %s"):format(h,aF:get_function_name(i)),g+1)
elseif type(i)=="table"then
if not aG[i]then
aG[i]=true
aF:add_to_dump(("%d [table]:"):format(h),g+1)
aF:dump_table(i,g+2,h)
else
aF:add_to_dump(("%d [table] (Recursive table detected)"):format(h),g+1)
end
else
aF:add_to_dump(("%d [%s] = %s"):format(h,tostring(typeof(i)),tostring(i)),g+1)
end
end
aF:add_to_dump(("\nFunction Constants: %s"):format(aF:get_function_name(aI)),g)
for h,i in pairs(aB(aI))do
if type(i)=="function"then
aF:add_to_dump(("%d [function] = %s"):format(h,aF:get_function_name(i)),g+1)
elseif type(i)=="table"then
if not aG[i]then
aG[i]=true
aF:add_to_dump(("%d [table]:"):format(h),g+1)
aF:dump_table(i,g+2,h)
else
aF:add_to_dump(("%d [table] (Recursive table detected)"):format(h),g+1)
end
else
aF:add_to_dump(("%d [%s] = %s"):format(h,tostring(typeof(i)),tostring(i)),g+1)
end
end
end
for aH,aI in pairs(az())do
if typeof(aI)=="function"and getfenv(aI).script and getfenv(aI).script==at then
aF:dump_function(aI,0)
aF:add_to_dump("\n"..("="):rep(100),0,false)
end
end
local aH=as:GetText()

if aE~=aD then aH=aH..aE.."]]"end
as:SetText(aH)
end)
end
end)
end

return aq
end

return{InitDeps=initDeps,InitAfterMain=initAfterMain,Main=main}
end,
Lib=function()







local aa,ab,ac,ad
local ae,af,ag,ah
local ai,aj,al,am,an,ao,ap

local function initDeps(aq)
aa=aq.Main
ab=aq.Lib
ac=aq.Apps
ad=aq.Settings

ai=aq.API
aj=aq.RMD
al=aq.env
am=aq.service
an=aq.plr
ao=aq.create
ap=aq.createSimple
end

local function initAfterMain()
ae=ac.Explorer
af=ac.Properties
ag=ac.ScriptViewer
ah=ac.Notebook
end

local function main()
local aq={}

local ar=am.RunService.RenderStepped
local as=ar.wait
local at=newproxy()
local au=newproxy()


local function initObj(aw,ax)
local az=type
local function copy(aA)
local aB={}
for aC,aD in pairs(aA)do
if aD==au then
aB[aC]=aq.Signal.new()
elseif az(aD)=="table"then
aB[aC]=copy(aD)
else
aB[aC]=aD
end
end
return aB
end

local aA=copy(aw)
return setmetatable(aA,ax)
end

local function getGuiMT(aw,ax)
return{__index=function(az,aA)if not aw[aA]then return ax[aA]or az.Gui[aA]end end,
__newindex=function(az,aA,aB)if not aw[aA]then az.Gui[aA]=aB else rawset(az,aA,aB)end end}
end



aq.FormatLuaString=(function()
local aw=string
local ax=aw.gsub
local az=aw.format
local aA=aw.char
local aB={['"']='\\"',['\\']='\\\\'}
for aC=0,31 do
aB[aA(aC)]="\\"..az("%03d",aC)
end
for aC=127,255 do
aB[aA(aC)]="\\"..az("%03d",aC)
end

return function(aC)
return ax(aC,"[\"\\\0-\31\127-\255]",aB)
end
end)()

aq.CheckMouseInGui=function(aw)
if aw==nil then return false end
local ax=aa.Mouse
local az=aw.AbsolutePosition
local aA=aw.AbsoluteSize

return ax.X>=az.X and ax.X<az.X+aA.X and ax.Y>=az.Y and ax.Y<az.Y+aA.Y
end

aq.IsShiftDown=function()
return am.UserInputService:IsKeyDown(Enum.KeyCode.LeftShift)or am.UserInputService:IsKeyDown(Enum.KeyCode.RightShift)
end

aq.IsCtrlDown=function()
return am.UserInputService:IsKeyDown(Enum.KeyCode.LeftControl)or am.UserInputService:IsKeyDown(Enum.KeyCode.RightControl)
end

aq.CreateArrow=function(aw,ax,az)
local aA=ax
local aB=ap("Frame",{
BackgroundTransparency=1,
Name="Arrow",
Size=UDim2.new(0,aw,0,aw)
})
if az=="up"then
for aC=1,ax do
ap("Frame",{
BackgroundColor3=Color3.new(0.8627450980392157,0.8627450980392157,0.8627450980392157),
BorderSizePixel=0,
Position=UDim2.new(0,math.floor(aw/2)-(aC-1),0,math.floor(aw/2)+aC-math.floor(aA/2)-1),
Size=UDim2.new(0,aC+(aC-1),0,1),
Parent=aB
})
end
return aB
elseif az=="down"then
for aC=1,ax do
ap("Frame",{
BackgroundColor3=Color3.new(0.8627450980392157,0.8627450980392157,0.8627450980392157),
BorderSizePixel=0,
Position=UDim2.new(0,math.floor(aw/2)-(aC-1),0,math.floor(aw/2)-aC+math.floor(aA/2)+1),
Size=UDim2.new(0,aC+(aC-1),0,1),
Parent=aB
})
end
return aB
elseif az=="left"then
for aC=1,ax do
ap("Frame",{
BackgroundColor3=Color3.new(0.8627450980392157,0.8627450980392157,0.8627450980392157),
BorderSizePixel=0,
Position=UDim2.new(0,math.floor(aw/2)+aC-math.floor(aA/2)-1,0,math.floor(aw/2)-(aC-1)),
Size=UDim2.new(0,1,0,aC+(aC-1)),
Parent=aB
})
end
return aB
elseif az=="right"then
for aC=1,ax do
ap("Frame",{
BackgroundColor3=Color3.new(0.8627450980392157,0.8627450980392157,0.8627450980392157),
BorderSizePixel=0,
Position=UDim2.new(0,math.floor(aw/2)-aC+math.floor(aA/2)+1,0,math.floor(aw/2)-(aC-1)),
Size=UDim2.new(0,1,0,aC+(aC-1)),
Parent=aB
})
end
return aB
end
error"r u ok"
end

aq.ParseXML=(function()
local aw=function()local



aw, ax=string, pairs







aw.byte('>',1)
local az=aw.byte('/',1)
aw.byte('D',1)
local aA=aw.byte('E',1)

function parse(aB,aC)

aB=aB:gsub('<!%-%-(.-)%-%->','')

local aD,aE={}

if aC then
local aF=aB:find'<[_%w]'
if aF then
aB:sub(1,aF):gsub('<!ENTITY%s+([_%w]+)%s+(.)(.-)%2',function(aG,aH,aI)
aD[#aD+1]={name=aG,value=aI}
end)
aE=createEntityTable(aD)
aB=replaceEntities(aB:sub(aF),aE)
end
end

local aF,aG={},{}

local aH=function(aH)
aH=aH:match'^%s*(.*%S)'or''
if#aH~=0 then
aF[#aF+1]={text=aH}
end
end

aB:gsub('<([?!/]?)([-:_%w]+)%s*(/?>?)([^<]*)',function(aI,g,h,i)

if#aI==0 then
local j={}
if#h==0 then
local k=0
for l,m,n,o,p in aw.gmatch(i,"(.-([-_%w]+)%s*=%s*(.)(.-)%3%s*(/?>?))")do
k=k+#l
j[m]=o
if#p~=0 then
i=i:sub(k+1)
h=p
break
end
end
end
aF[#aF+1]={tag=g,attrs=j,children={}}

if h:byte(1)~=az then
aG[#aG+1]=aF
aF=aF[#aF].children
end

aH(i)

elseif'/'==aI then
aF=aG[#aG]
aG[#aG]=nil

aH(i)

elseif'!'==aI then
if aA==g:byte(1)then
i:gsub('([_%w]+)%s+(.)(.-)%2',function(j,k,l)
aD[#aD+1]={name=j,value=l}
end,1)
end






end
end)

return{children=aF,entities=aD,tentities=aE}
end

function parseText(aB)
return parse(aB)
end

function defaultEntityTable()
return{quot='"',apos='\'',lt='<',gt='>',amp='&',tab='\t',nbsp=' ',}
end

function replaceEntities(aB,aC)
return aB:gsub('&([^;]+);',aC)
end

function createEntityTable(aB,aC)
entities=aC or defaultEntityTable()
for aD,aE in ax(aB)do
aE.value=replaceEntities(aE.value,entities)
entities[aE.name]=aE.value
end
return entities
end

return parseText
end
local ax=setmetatable({},{__index=getfenv()})
setfenv(aw,ax)
return aw()
end)()

aq.FastWait=function(aw)
if not aw then return as(ar)end
local ax=tick()
while tick()-ax<aw do as(ar)end
end

aq.ButtonAnim=function(aw,ax)
local az=false
local aA=false
local aB=ax and ax.Mode or 1
local aC={}

if aB==2 then
local aD=ax.LerpTo or Color3.new(0,0,0)
local aE=ax.LerpDelta or 0.2
aC.StartColor=ax.StartColor or aw.BackgroundColor3
aC.PressColor=ax.PressColor or aC.StartColor:lerp(aD,aE)
aC.HoverColor=ax.HoverColor or aC.StartColor:lerp(aC.PressColor,0.6)
aC.OutlineColor=ax.OutlineColor
end

aw.InputBegan:Connect(function(aD)
if aA then return end

if aD.UserInputType==Enum.UserInputType.MouseMovement or aD.UserInputType==Enum.UserInputType.Touch then
if not az then
if aB==1 then
aw.BackgroundTransparency=0.4
elseif aB==2 then
aw.BackgroundColor3=aC.HoverColor
end
end
elseif aD.UserInputType==Enum.UserInputType.MouseButton1 or aD.UserInputType==Enum.UserInputType.Touch then
az=true
if aB==1 then
aw.BackgroundTransparency=0
elseif aB==2 then
aw.BackgroundColor3=aC.PressColor
if aC.OutlineColor then aw.BorderColor3=aC.PressColor end
end
end
end)

aw.InputEnded:Connect(function(aD)
if aA then return end

if aD.UserInputType==Enum.UserInputType.MouseMovement or aD.UserInputType==Enum.UserInputType.Touch then
if not az then
if aB==1 then
aw.BackgroundTransparency=1
elseif aB==2 then
aw.BackgroundColor3=aC.StartColor
end
end
elseif aD.UserInputType==Enum.UserInputType.MouseButton1 or aD.UserInputType==Enum.UserInputType.Touch then
az=false
if aB==1 then
aw.BackgroundTransparency=aq.CheckMouseInGui(aw)and 0.4 or 1
elseif aB==2 then
aw.BackgroundColor3=aq.CheckMouseInGui(aw)and aC.HoverColor or aC.StartColor
if aC.OutlineColor then aw.BorderColor3=aC.OutlineColor end
end
end
end)

aC.Disable=function()
aA=true
az=false

if aB==1 then
aw.BackgroundTransparency=1
elseif aB==2 then
aw.BackgroundColor3=aC.StartColor
end
end

aC.Enable=function()
aA=false
end

return aC
end

aq.FindAndRemove=function(aw,ax)
local az=table.find(aw,ax)
if az then table.remove(aw,az)end
end

aq.AttachTo=function(aw,ax)
local az,aA,aB,aC,aD,aE,aF
local aG=false

local function update()
if not aw or not az then return end

local aH=az.AbsolutePosition
local aI=az.AbsoluteSize
aw.Position=UDim2.new(0,aH.X+aA,0,aH.Y+aB)
if aE then aw.Size=UDim2.new(0,aI.X+aC,0,aI.Y+aD)end
end

local function setup(aH,aI)
aw=aH
aI=aI or{}
az=aI.Target
aA=aI.PosOffX or 0
aB=aI.PosOffY or 0
aC=aI.SizeOffX or 0
aD=aI.SizeOffY or 0
aE=aI.Resize or false

if aF then aF:Disconnect()aF=nil end
if az then
aF=az.Changed:Connect(function(g)
if not aG and g=="AbsolutePosition"or g=="AbsoluteSize"then
update()
end
end)
end

update()
end
setup(aw,ax)

return{
SetData=function(aH,aI)
setup(aH,aI)
end,
Enable=function()
aG=false
update()
end,
Disable=function()
aG=true
end,
Destroy=function()
aF:Disconnect()
aF=nil
end,
}
end

aq.ProtectedGuis={}

aq.ShowGui=function(aw)
if al.gethui then
aw.Parent=al.gethui()
elseif al.protectgui then
al.protectgui(aw)
aw.Parent=aa.GuiHolder
else
aw.Parent=aa.GuiHolder
end
end

aq.ColorToBytes=function(aw)
local ax=math.round
return string.format("%d, %d, %d",ax(aw.r*255),ax(aw.g*255),ax(aw.b*255))
end

aq.ReadFile=function(aw)
if not al.readfile then return end

local ax,az=pcall(al.readfile,aw)
if ax and az then return az end
end

aq.DeferFunc=function(aw,...)
as(ar)
return aw(...)
end

aq.LoadCustomAsset=function(aw)
if not al.getcustomasset or not al.isfile or not al.isfile(aw)then return end

return al.getcustomasset(aw)
end

aq.FetchCustomAsset=function(aw,ax)
if not al.writefile then return end

local az,aA=pcall(e.HttpGet,f,aw)
if not az then return end

al.writefile(ax,aA)
return aq.LoadCustomAsset(ax)
end



aq.Signal=(function()
local aw={}

local ax=function(ax)
local az=table.find(ax.Signal.Connections,ax)
if az then table.remove(ax.Signal.Connections,az)end
end

aw.Connect=function(az,aA)
if type(aA)~="function"then error"Attempt to connect a non-function"end
local aB={
Signal=az,
Func=aA,
Disconnect=ax
}
az.Connections[#az.Connections+1]=aB
return aB
end

aw.Fire=function(az,...)
for aA,aB in next,az.Connections do
xpcall(coroutine.wrap(aB.Func),function(aC)warn(aC.."\n"..debug.traceback())end,...)
end
end

local az={
__index=aw,
__tostring=function(az)
return"Signal: "..tostring(#az.Connections).." Connections"
end
}

local function new()
local aA={}
aA.Connections={}

return setmetatable(aA,az)
end

return{new=new}
end)()

aq.Set=(function()
local aw={}

aw.Add=function(ax,az)
if ax.Map[az]then return end

local aA=ax.List
aA[#aA+1]=az
ax.Map[az]=true
ax.Changed:Fire()
end

aw.AddTable=function(ax,az)
local aA
local aB,aC=ax.List,ax.Map
for aD=1,#az do
local aE=az[aD]
if not aC[aE]then
aB[#aB+1]=aE
aC[aE]=true
aA=true
end
end
if aA then ax.Changed:Fire()end
end

aw.Remove=function(ax,az)
if not ax.Map[az]then return end

local aA=ax.List
local aB=table.find(aA,az)
if aB then table.remove(aA,aB)end
ax.Map[az]=nil
ax.Changed:Fire()
end

aw.RemoveTable=function(ax,az)
local aA
local aB,aC=ax.List,ax.Map
local aD={}
for aE=1,#az do
local aF=az[aE]
aC[aF]=nil
aD[aF]=true
end

for aE=#aB,1,-1 do
local aF=aB[aE]
if aD[aF]then
table.remove(aB,aE)
aA=true
end
end
if aA then ax.Changed:Fire()end
end

aw.Set=function(ax,az)
if#ax.List==1 and ax.List[1]==az then return end

ax.List={az}
ax.Map={[az]=true}
ax.Changed:Fire()
end

aw.SetTable=function(ax,az)
local aA,aB={},{}
ax.List,ax.Map=aA,aB
table.move(az,1,#az,1,aA)
for aC=1,#az do
aB[az[aC] ]=true
end
ax.Changed:Fire()
end

aw.Clear=function(ax)
if#ax.List==0 then return end
ax.List={}
ax.Map={}
ax.Changed:Fire()
end

local ax={__index=aw}

local function new()
local az=setmetatable({
List={},
Map={},
Changed=aq.Signal.new()
},ax)

return az
end

return{new=new}
end)()

aq.IconMap=(function()
local aw={}
local ax,az=(483448923),{Accessory=
32;Accoutrement=
32;AdService=
73;Animation=
60;AnimationController=
60;AnimationTrack=
60;Animator=
60;ArcHandles=
56;AssetService=
72;Attachment=
34;Backpack=
20;BadgeService=
75;BallSocketConstraint=
89;BillboardGui=
64;BinaryStringValue=
4;BindableEvent=
67;BindableFunction=
66;BlockMesh=
8;BloomEffect=
90;BlurEffect=
90;BodyAngularVelocity=
14;BodyForce=
14;BodyGyro=
14;BodyPosition=
14;BodyThrust=
14;BodyVelocity=
14;BoolValue=
4;BoxHandleAdornment=
54;BrickColorValue=
4;Camera=
5;CFrameValue=
4;CharacterMesh=
60;Chat=
33;ClickDetector=
41;CollectionService=
30;Color3Value=
4;ColorCorrectionEffect=
90;ConeHandleAdornment=
54;Configuration=
58;ContentProvider=
72;ContextActionService=
41;CoreGui=
46;CoreScript=
18;CornerWedgePart=
1;CustomEvent=
4;CustomEventReceiver=
4;CylinderHandleAdornment=
54;CylinderMesh=
8;CylindricalConstraint=
89;Debris=
30;Decal=
7;Dialog=
62;DialogChoice=
63;DoubleConstrainedValue=
4;Explosion=
36;FileMesh=
8;Fire=
61;Flag=
38;FlagStand=
39;FloorWire=
4;Folder=
70;ForceField=
37;Frame=
48;GamePassService=
19;Glue=
34;GuiButton=
52;GuiMain=
47;GuiService=
47;Handles=
53;HapticService=
84;Hat=
45;HingeConstraint=
89;Hint=
33;HopperBin=
22;HttpService=
76;Humanoid=
9;ImageButton=
52;ImageLabel=
49;InsertService=
72;IntConstrainedValue=
4;IntValue=
4;JointInstance=
34;JointsService=
34;Keyframe=
60;KeyframeSequence=
60;KeyframeSequenceProvider=
60;Lighting=
13;LineHandleAdornment=
54;LocalScript=
18;LogService=
87;MarketplaceService=
46;Message=
33;Model=
2;ModuleScript=
71;Motor=
34;Motor6D=
34;MoveToConstraint=
89;NegateOperation=
78;NetworkClient=
16;NetworkReplicator=
29;NetworkServer=
15;NumberValue=
4;ObjectValue=
4;Pants=
44;ParallelRampPart=
1;Part=
1;ParticleEmitter=
69;PartPairLasso=
57;PathfindingService=
37;Platform=
35;Player=
12;PlayerGui=
46;Players=
21;PlayerScripts=
82;PointLight=
13;PointsService=
83;Pose=
60;PrismaticConstraint=
89;PrismPart=
1;PyramidPart=
1;RayValue=
4;ReflectionMetadata=
86;ReflectionMetadataCallbacks=
86;ReflectionMetadataClass=
86;ReflectionMetadataClasses=
86;ReflectionMetadataEnum=
86;ReflectionMetadataEnumItem=
86;ReflectionMetadataEnums=
86;ReflectionMetadataEvents=
86;ReflectionMetadataFunctions=
86;ReflectionMetadataMember=
86;ReflectionMetadataProperties=
86;ReflectionMetadataYieldFunctions=
86;RemoteEvent=
80;RemoteFunction=
79;ReplicatedFirst=
72;ReplicatedStorage=
72;RightAngleRampPart=
1;RocketPropulsion=
14;RodConstraint=
89;RopeConstraint=
89;Rotate=
34;RotateP=
34;RotateV=
34;RunService=
66;ScreenGui=
47;Script=
6;ScrollingFrame=
48;Seat=
35;Selection=
55;SelectionBox=
54;SelectionPartLasso=
57;SelectionPointLasso=
57;SelectionSphere=
54;ServerScriptService=
0;ServerStorage=
74;Shirt=
43;ShirtGraphic=
40;SkateboardPlatform=
35;Sky=
28;SlidingBallConstraint=
89;Smoke=
59;Snap=
34;Sound=
11;SoundService=
31;Sparkles=
42;SpawnLocation=
25;SpecialMesh=
8;SphereHandleAdornment=
54;SpotLight=
13;SpringConstraint=
89;StarterCharacterScripts=
82;StarterGear=
20;StarterGui=
46;StarterPack=
20;StarterPlayer=
88;StarterPlayerScripts=
82;Status=
2;StringValue=
4;SunRaysEffect=
90;SurfaceGui=
64;SurfaceLight=
13;SurfaceSelection=
55;Team=
24;Teams=
23;TeleportService=
81;Terrain=
65;TerrainRegion=
65;TestService=
68;TextBox=
51;TextButton=
51;TextLabel=
50;Texture=
10;TextureTrail=
4;Tool=
17;TouchTransmitter=
37;TrussPart=
1;UnionOperation=
77;UserInputService=
84;Vector3Value=
4;VehicleSeat=
35;VelocityMotor=
34;WedgePart=
1;Weld=
34;Workspace=
19;

}
aw.ExplorerIcons={MapId=ax,Icons=az}

aw.GetLabel=function(aA)
local aB=Instance.new"ImageLabel"
aA:SetupLabel(aB)
return aB
end

aw.SetupLabel=function(aA,aB)
aB.BackgroundTransparency=1
aB.ImageRectOffset=Vector2.new(0,0)
aB.ImageRectSize=Vector2.new(aA.IconSizeX,aA.IconSizeY)
aB.ScaleType=Enum.ScaleType.Crop
aB.Size=UDim2.new(0,aA.IconSizeX,0,aA.IconSizeY)
end

aw.Display=function(aA,aB,aC)
aB.Image=aA.MapId
if not aA.NumX then
aB.ImageRectOffset=Vector2.new(aA.IconSizeX*aC,0)
else
aB.ImageRectOffset=Vector2.new(aA.IconSizeX*(aC%aA.NumX),aA.IconSizeY*math.floor(aC/aA.NumX))
end
end

aw.DisplayByKey=function(aA,aB,aC)
if aA.IndexDict[aC]then
aA:Display(aB,aA.IndexDict[aC])
else
local aD=aj.Classes[aB.ClassName]
ae.ClassIcons:Display(aB,aD and aD.ExplorerImageIndex or 0)
end
end

aw.IconDehash=function(aA,aB)
return math.floor(aB/14%14),math.floor(aB%14)
end

aw.GetExplorerIcon=function(aA,aB,aC)
aC=(aA.ExplorerIcons.Icons[aC]or 0)
local aD,aE=aA:IconDehash(aC)
local aF=Vector2.new(256,256)
local aG,aH=2,1
local aI=16

aB.Position=UDim2.new(-aE-(aG*(aE+1)+aH)/aI,0,-aD-(aG*(aD+1)+aH)/aI,0)
aB.Size=UDim2.new(aF.X/aI,0,aF.Y/aI,0)
end

aw.DisplayExplorerIcons=function(aA,aB,aC)
if aB:FindFirstChild"IconMap"then
aA:GetExplorerIcon(aB.IconMap,aC)
else
aB.ClipsDescendants=true

local aD=Instance.new("ImageLabel",aB)
aD.BackgroundTransparency=1
aD.Image=("http://www.roblox.com/asset/?id="..(aA.ExplorerIcons.MapId))
aD.Name="IconMap"
aA:GetExplorerIcon(aD,aC)
end
end

aw.SetDict=function(aA,aB)
aA.IndexDict=aB
end

local aA={}
aA.__index=aw

local function new(aB,aC,aD,aE,aF)
local aG=setmetatable({
MapId=aB,
MapSizeX=aC,
MapSizeY=aD,
IconSizeX=aE,
IconSizeY=aF,
NumX=aC/aE,
IndexDict={}
},aA)
return aG
end

local function newLinear(aB,aC,aD)
local aE=setmetatable({
MapId=aB,
IconSizeX=aC,
IconSizeY=aD,
IndexDict={}
},aA)
return aE
end

return{new=new,newLinear=newLinear}
end)()

aq.ScrollBar=(function()
local aw={}
local ax=am.UserInputService
local az=an:GetMouse()
local aA=aq.CheckMouseInGui
local aB=aq.CreateArrow

local function drawThumb(aC)
local aD=aC.TotalSpace
local aE=aC.VisibleSpace local aF=
aC.Index
local aG=aC.GuiElems.ScrollThumb
local aH=aC.GuiElems.ScrollThumbFrame

if not(aC:CanScrollUp()or aC:CanScrollDown())then
aG.Visible=false
else
aG.Visible=true
end

if aC.Horizontal then
aG.Size=UDim2.new(aE/aD,0,1,0)
if aG.AbsoluteSize.X<16 then
aG.Size=UDim2.new(0,16,1,0)
end
local aI=aH.AbsoluteSize.X
local g=aG.AbsoluteSize.X
aG.Position=UDim2.new(aC:GetScrollPercent()*(aI-g)/aI,0,0,0)
else
aG.Size=UDim2.new(1,0,aE/aD,0)
if aG.AbsoluteSize.Y<16 then
aG.Size=UDim2.new(1,0,0,16)
end
local aI=aH.AbsoluteSize.Y
local g=aG.AbsoluteSize.Y
aG.Position=UDim2.new(0,0,aC:GetScrollPercent()*(aI-g)/aI,0)
end
end

local function createFrame(aC)
local aD=ap("Frame",{Style=0,Active=true,AnchorPoint=Vector2.new(0,0),BackgroundColor3=Color3.new(0.35294118523598,0.35294118523598,0.35294118523598),BackgroundTransparency=0,BorderColor3=Color3.new(0.10588236153126,0.16470588743687,0.20784315466881),BorderSizePixel=0,ClipsDescendants=false,Draggable=false,Position=UDim2.new(1,-16,0,0),Rotation=0,Selectable=false,Size=UDim2.new(0,16,1,0),SizeConstraint=0,Visible=true,ZIndex=1,Name="ScrollBar",})
local aE,aF

if aC.Horizontal then
aD.Size=UDim2.new(1,0,0,16)
aE=ap("ImageButton",{
Parent=aD,
Name="Left",
Size=UDim2.new(0,16,0,16),
BackgroundTransparency=1,
BorderSizePixel=0,
AutoButtonColor=false
})
aB(16,4,"left").Parent=aE
aF=ap("ImageButton",{
Parent=aD,
Name="Right",
Position=UDim2.new(1,-16,0,0),
Size=UDim2.new(0,16,0,16),
BackgroundTransparency=1,
BorderSizePixel=0,
AutoButtonColor=false
})
aB(16,4,"right").Parent=aF
else
aD.Size=UDim2.new(0,16,1,0)
aE=ap("ImageButton",{
Parent=aD,
Name="Up",
Size=UDim2.new(0,16,0,16),
BackgroundTransparency=1,
BorderSizePixel=0,
AutoButtonColor=false
})
aB(16,4,"up").Parent=aE
aF=ap("ImageButton",{
Parent=aD,
Name="Down",
Position=UDim2.new(0,0,1,-16),
Size=UDim2.new(0,16,0,16),
BackgroundTransparency=1,
BorderSizePixel=0,
AutoButtonColor=false
})
aB(16,4,"down").Parent=aF
end

local aG=ap("ImageButton",{
BackgroundTransparency=1,
Parent=aD
})
if aC.Horizontal then
aG.Position=UDim2.new(0,16,0,0)
aG.Size=UDim2.new(1,-32,1,0)
else
aG.Position=UDim2.new(0,0,0,16)
aG.Size=UDim2.new(1,0,1,-32)
end

local aH=ap("Frame",{
BackgroundColor3=Color3.new(0.47058823529411764,0.47058823529411764,0.47058823529411764),
BorderSizePixel=0,
Parent=aG
})

local aI=ap("Frame",{
BackgroundTransparency=1,
Name="Markers",
Size=UDim2.new(1,0,1,0),
Parent=aG
})

local g=false
local h=false
local i=false

local function handleButtonPress(j,k)
if aC:CanScroll(k)then
j.BackgroundTransparency=0.5
aC:ScrollToDirection(k)
aC.Scrolled:Fire()
local l=tick()
local m
m=ax.InputEnded:Connect(function(n)
if n.UserInputType==Enum.UserInputType.MouseButton1 or n.UserInputType==Enum.UserInputType.Touch then
m:Disconnect()
j.BackgroundTransparency=aA(j)and 0.8 or 1
g=false
end
end)
while g do
if tick()-l>=0.25 and aC:CanScroll(k)then
aC:ScrollToDirection(k)
aC.Scrolled:Fire()
end
task.wait()
end
end
end

aE.MouseButton1Down:Connect(function(j)
g=true
handleButtonPress(aE,"Up")
end)

aE.InputEnded:Connect(function(j)
if j.UserInputType==Enum.UserInputType.MouseButton1 or j.UserInputType==Enum.UserInputType.Touch then
aE.BackgroundTransparency=1
end
end)

aF.MouseButton1Down:Connect(function(j)
g=true
handleButtonPress(aF,"Down")
end)

aF.InputEnded:Connect(function(j)
if j.UserInputType==Enum.UserInputType.MouseButton1 or j.UserInputType==Enum.UserInputType.Touch then
aF.BackgroundTransparency=1
end
end)

aH.InputBegan:Connect(function(j)
if(j.UserInputType==Enum.UserInputType.MouseButton1 or j.UserInputType==Enum.UserInputType.Touch)then
local k=aC.Horizontal and"X"or"Y"
local l
h=true
aH.BackgroundTransparency=0
local m=az[k]-aH.AbsolutePosition[k]
local n
local o

n=ax.InputEnded:Connect(function(p)
if p.UserInputType==Enum.UserInputType.MouseButton1 or p.UserInputType==Enum.UserInputType.Touch then
n:Disconnect()
if o then o:Disconnect()end
aH.BackgroundTransparency=0.2
h=false
end
end)

o=ax.InputChanged:Connect(function(p)
if(p.UserInputType==Enum.UserInputType.MouseMovement or p.UserInputType==Enum.UserInputType.Touch)and h then
local q=aG.AbsoluteSize[k]-aH.AbsoluteSize[k]
local r=az[k]-aG.AbsolutePosition[k]-m
if r>q then r=q
elseif r<0 then r=0 end
if l~=r then
l=r
aC:ScrollTo(math.floor(0.5+r/q*(aC.TotalSpace-aC.VisibleSpace)))
end
end
end)
end
end)

aH.InputEnded:Connect(function(j)
if j.UserInputType==Enum.UserInputType.MouseMovement or j.UserInputType==Enum.UserInputType.Touch then
aH.BackgroundTransparency=0
end
end)

aG.InputBegan:Connect(function(j)
if(j.UserInputType==Enum.UserInputType.MouseButton1 or j.UserInputType==Enum.UserInputType.Touch)and not aA(aH)then
local k=aC.Horizontal and"X"or"Y"
local l=(az[k]>=aH.AbsolutePosition[k]+aH.AbsoluteSize[k])and 1 or 0
local function doTick()
local m=aC.VisibleSpace-1
if l==0 and az[k]<aH.AbsolutePosition[k]then
aC:ScrollTo(aC.Index-m)
elseif l==1 and az[k]>=aH.AbsolutePosition[k]+aH.AbsoluteSize[k]then
aC:ScrollTo(aC.Index+m)
end
end

h=false
i=true
doTick()
local m=tick()
local n
n=ax.InputEnded:Connect(function(o)
if o.UserInputType==Enum.UserInputType.MouseButton1 or o.UserInputType==Enum.UserInputType.Touch then
n:Disconnect()
i=false
end
end)

while i do
if tick()-m>=0.3 and aA(aG)then
doTick()
end
task.wait()
end
end
end)

aD.MouseWheelForward:Connect(function()
aC:ScrollTo(aC.Index-aC.WheelIncrement)
end)

aD.MouseWheelBackward:Connect(function()
aC:ScrollTo(aC.Index+aC.WheelIncrement)
end)

aC.GuiElems.ScrollThumb=aH
aC.GuiElems.ScrollThumbFrame=aG
aC.GuiElems.Button1=aE
aC.GuiElems.Button2=aF
aC.GuiElems.MarkerFrame=aI

return aD
end

aw.Update=function(aC,aD)
local aE=aC.TotalSpace
local aF=aC.VisibleSpace local aG=
aC.Index
local aH=aC.GuiElems.Button1
local aI=aC.GuiElems.Button2

aC.Index=math.clamp(aC.Index,0,math.max(0,aE-aF))

if aC.LastTotalSpace~=aC.TotalSpace then
aC.LastTotalSpace=aC.TotalSpace
aC:UpdateMarkers()
end

if aC:CanScrollUp()then
for g,h in pairs(aH.Arrow:GetChildren())do
h.BackgroundTransparency=0
end
else
aH.BackgroundTransparency=1
for g,h in pairs(aH.Arrow:GetChildren())do
h.BackgroundTransparency=0.5
end
end
if aC:CanScrollDown()then
for g,h in pairs(aI.Arrow:GetChildren())do
h.BackgroundTransparency=0
end
else
aI.BackgroundTransparency=1
for g,h in pairs(aI.Arrow:GetChildren())do
h.BackgroundTransparency=0.5
end
end

drawThumb(aC)
end

aw.UpdateMarkers=function(aC)
local aD=aC.GuiElems.MarkerFrame
aD:ClearAllChildren()

for aE,aF in pairs(aC.Markers)do
if aE<aC.TotalSpace then
ap("Frame",{
BackgroundTransparency=0,
BackgroundColor3=aF,
BorderSizePixel=0,
Position=aC.Horizontal and UDim2.new(aE/aC.TotalSpace,0,1,-6)or UDim2.new(1,-6,aE/aC.TotalSpace,0),
Size=aC.Horizontal and UDim2.new(0,1,0,6)or UDim2.new(0,6,0,1),
Name="Marker"..tostring(aE),
Parent=aD
})
end
end
end

aw.AddMarker=function(aC,aD,aE)
aC.Markers[aD]=aE or Color3.new(0,0,0)
end
aw.ScrollTo=function(aC,aD,aE)
aC.Index=aD
aC:Update()
if not aE then
aC.Scrolled:Fire()
end
end
aw.ScrollUp=function(aC)
aC.Index=aC.Index-aC.Increment
aC:Update()
end
aw.CanScroll=function(aC,aD)
if aD=="Up"then
return aC:CanScrollUp()
elseif aD=="Down"then
return aC:CanScrollDown()
end
return false
end
aw.ScrollDown=function(aC)
aC.Index=aC.Index+aC.Increment
aC:Update()
end
aw.CanScrollUp=function(aC)
return aC.Index>0
end
aw.CanScrollDown=function(aC)
return aC.Index+aC.VisibleSpace<aC.TotalSpace
end
aw.GetScrollPercent=function(aC)
return aC.Index/(aC.TotalSpace-aC.VisibleSpace)
end
aw.SetScrollPercent=function(aC,aD)
aC.Index=math.floor(aD*(aC.TotalSpace-aC.VisibleSpace))
aC:Update()
end
aw.ScrollToDirection=function(aC,aD)
if aD=="Up"then
aC:ScrollUp()
elseif aD=="Down"then
aC:ScrollDown()
end
end

aw.Texture=function(aC,aD)
aC.ThumbColor=aD.ThumbColor or Color3.new(0,0,0)
aC.ThumbSelectColor=aD.ThumbSelectColor or Color3.new(0,0,0)
aC.GuiElems.ScrollThumb.BackgroundColor3=aD.ThumbColor or Color3.new(0,0,0)
aC.Gui.BackgroundColor3=aD.FrameColor or Color3.new(0,0,0)
aC.GuiElems.Button1.BackgroundColor3=aD.ButtonColor or Color3.new(0,0,0)
aC.GuiElems.Button2.BackgroundColor3=aD.ButtonColor or Color3.new(0,0,0)
for aE,aF in pairs(aC.GuiElems.Button1.Arrow:GetChildren())do
aF.BackgroundColor3=aD.ArrowColor or Color3.new(0,0,0)
end
for aE,aF in pairs(aC.GuiElems.Button2.Arrow:GetChildren())do
aF.BackgroundColor3=aD.ArrowColor or Color3.new(0,0,0)
end
end

aw.SetScrollFrame=function(aC,aD)
if aC.ScrollUpEvent then aC.ScrollUpEvent:Disconnect()aC.ScrollUpEvent=nil end
if aC.ScrollDownEvent then aC.ScrollDownEvent:Disconnect()aC.ScrollDownEvent=nil end
aC.ScrollUpEvent=aD.MouseWheelForward:Connect(function()aC:ScrollTo(aC.Index-aC.WheelIncrement)end)
aC.ScrollDownEvent=aD.MouseWheelBackward:Connect(function()aC:ScrollTo(aC.Index+aC.WheelIncrement)end)
end

local aC={}
aC.__index=aw

local function new(aD)
local aE=setmetatable({
Index=0,
VisibleSpace=0,
TotalSpace=0,
Increment=1,
WheelIncrement=1,
Markers={},
GuiElems={},
Horizontal=aD,
LastTotalSpace=0,
Scrolled=aq.Signal.new()
},aC)
aE.Gui=createFrame(aE)
aE:Texture{
ThumbColor=Color3.fromRGB(60,60,60),
ThumbSelectColor=Color3.fromRGB(75,75,75),
ArrowColor=Color3.new(1,1,1),
FrameColor=Color3.fromRGB(40,40,40),
ButtonColor=Color3.fromRGB(75,75,75)
}
return aE
end

return{new=new}
end)()

aq.Window=(function()
local aw={}
local ax={MinWidth=200,FreeWidth=200}
an:GetMouse()
local az,aA
local aB={}
local aC={Width=300,Windows={},ResizeCons={},Hidden=true}
local aD={Width=300,Windows={},ResizeCons={},Hidden=true}

local aE
local aF
local aG=TweenInfo.new(0.3,Enum.EasingStyle.Quad,Enum.EasingDirection.Out)
local aH={}
local aI=f.IsA

local g={
MainColor1=Color3.fromRGB(52,52,52),
MainColor2=Color3.fromRGB(45,45,45),
Button=Color3.fromRGB(60,60,60)
}

local function stopTweens()
for h=1,#aH do
aH[h]:Cancel()
end
aH={}
end

local function resizeHook(h,i,j)
local k=h.GuiElems.Main
i.InputBegan:Connect(function(l)
if not h.Dragging and not h.Resizing and h.Resizable and h.ResizableInternal then
local m=j:find"[WE]"and true
local n=j:find"[NS]"and true
local o=j:find("W",1,true)and-1 or 1
local p=j:find("N",1,true)and-1 or 1

if h.Minimized and n then return end

if l.UserInputType==Enum.UserInputType.MouseMovement or l.UserInputType==Enum.UserInputType.Touch then
i.BackgroundTransparency=0.5
elseif l.UserInputType==Enum.UserInputType.MouseButton1 or l.UserInputType==Enum.UserInputType.Touch then
local q,r

local s=l.Position.X-i.AbsolutePosition.X
local t=l.Position.Y-i.AbsolutePosition.Y

h.Resizing=i
i.BackgroundTransparency=1

q=am.UserInputService.InputEnded:Connect(function(u)
if u.UserInputType==Enum.UserInputType.MouseButton1 or u.UserInputType==Enum.UserInputType.Touch then
q:Disconnect()
if r then r:Disconnect()end
h.Resizing=false
i.BackgroundTransparency=1
end
end)

r=am.UserInputService.InputChanged:Connect(function(u)
if h.Resizable and h.ResizableInternal and(u.UserInputType==Enum.UserInputType.MouseMovement or u.UserInputType==Enum.UserInputType.Touch)then
h:StopTweens()
local v=u.Position.X-i.AbsolutePosition.X-s
local w=u.Position.Y-i.AbsolutePosition.Y-t

if k.AbsoluteSize.X+v*o<h.MinX then v=o*(h.MinX-k.AbsoluteSize.X)end
if k.AbsoluteSize.Y+w*p<h.MinY then w=p*(h.MinY-k.AbsoluteSize.Y)end
if p<0 and k.AbsolutePosition.Y+w<0 then w=-k.AbsolutePosition.Y end

k.Position=k.Position+UDim2.new(0,(o<0 and v or 0),0,(p<0 and w or 0))
h.SizeX=h.SizeX+(m and v*o or 0)
h.SizeY=h.SizeY+(n and w*p or 0)
k.Size=UDim2.new(0,h.SizeX,0,h.Minimized and 20 or h.SizeY)
end
end)
end
end
end)

i.InputEnded:Connect(function(l)
if(l.UserInputType==Enum.UserInputType.MouseMovement or l.UserInputType==Enum.UserInputType.Touch)and h.Resizing~=i then
i.BackgroundTransparency=1
end
end)
end

local h

local function moveToTop(i)
local j=table.find(aB,i)
if j then
table.remove(aB,j)
table.insert(aB,1,i)
h()
end
end

local function sideHasRoom(i,j)
local k=az.AbsoluteSize.Y-(math.max(0,#i.Windows-1)*4)
local l=0
for m,n in pairs(i.Windows)do
l=l+(n.MinY or 100)
if l>k-j then return false end
end

return true
end

local function getSideInsertPos(i,j)
local k=#i.Windows+1
local l={0,az.AbsoluteSize.Y}

for m,n in pairs(i.Windows)do
local o=n.PosY+n.SizeY/2
if j<=o then
k=m
l[2]=o
break
else
l[1]=o
end
end

return k,l
end

local function focusInput(i,j)
if aI(j,"GuiButton")then
j.MouseButton1Down:Connect(function()
moveToTop(i)
end)
elseif aI(j,"TextBox")then
j.Focused:Connect(function()
moveToTop(i)
end)
end
end

local i=function(i)
local j=ao{
{1,"ScreenGui",{Name="Window",}},
{2,"Frame",{Active=true,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="Main",Parent={1},Position=UDim2.new(0.40000000596046,0,0.40000000596046,0),Size=UDim2.new(0,300,0,300),}},
{3,"Frame",{BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderSizePixel=0,Name="Content",Parent={2},Position=UDim2.new(0,0,0,20),Size=UDim2.new(1,0,1,-20),ClipsDescendants=true}},
{4,"Frame",{BackgroundColor3=Color3.fromRGB(33,33,33),BorderSizePixel=0,Name="Line",Parent={3},Size=UDim2.new(1,0,0,1),}},
{5,"TextButton",{Text="",AutoButtonColor=false,BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BorderSizePixel=0,Name="TopBar",Parent={2},Size=UDim2.new(1,0,0,20),}},
{6,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={5},Position=UDim2.new(0,5,0,0),Size=UDim2.new(1,-10,0,20),Text="Window",TextColor3=Color3.new(1,1,1),TextSize=14,TextXAlignment=0,}},
{7,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Close",Parent={5},Position=UDim2.new(1,-18,0,2),Size=UDim2.new(0,16,0,16),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,}},
{8,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://5054663650",Parent={7},Position=UDim2.new(0,3,0,3),Size=UDim2.new(0,10,0,10),}},
{9,"UICorner",{CornerRadius=UDim.new(0,4),Parent={7},}},
{10,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Minimize",Parent={5},Position=UDim2.new(1,-36,0,2),Size=UDim2.new(0,16,0,16),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,}},
{11,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://5034768003",Parent={10},Position=UDim2.new(0,3,0,3),Size=UDim2.new(0,10,0,10),}},
{12,"UICorner",{CornerRadius=UDim.new(0,4),Parent={10},}},
{13,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Image="rbxassetid://1427967925",Name="Outlines",Parent={2},Position=UDim2.new(0,-5,0,-5),ScaleType=1,Size=UDim2.new(1,10,1,10),SliceCenter=Rect.new(6,6,25,25),TileSize=UDim2.new(0,20,0,20),}},
{14,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Name="ResizeControls",Parent={2},Position=UDim2.new(0,-5,0,-5),Size=UDim2.new(1,10,1,10),}},
{15,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.27450981736183,0.27450981736183,0.27450981736183),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="North",Parent={14},Position=UDim2.new(0,5,0,0),Size=UDim2.new(1,-10,0,5),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
{16,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.27450981736183,0.27450981736183,0.27450981736183),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="South",Parent={14},Position=UDim2.new(0,5,1,-5),Size=UDim2.new(1,-10,0,5),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
{17,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.27450981736183,0.27450981736183,0.27450981736183),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="NorthEast",Parent={14},Position=UDim2.new(1,-5,0,0),Size=UDim2.new(0,5,0,5),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
{18,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.27450981736183,0.27450981736183,0.27450981736183),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="East",Parent={14},Position=UDim2.new(1,-5,0,5),Size=UDim2.new(0,5,1,-10),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
{19,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.27450981736183,0.27450981736183,0.27450981736183),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="West",Parent={14},Position=UDim2.new(0,0,0,5),Size=UDim2.new(0,5,1,-10),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
{20,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.27450981736183,0.27450981736183,0.27450981736183),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="SouthEast",Parent={14},Position=UDim2.new(1,-5,1,-5),Size=UDim2.new(0,5,0,5),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
{21,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.27450981736183,0.27450981736183,0.27450981736183),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="NorthWest",Parent={14},Size=UDim2.new(0,5,0,5),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
{22,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.27450981736183,0.27450981736183,0.27450981736183),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="SouthWest",Parent={14},Position=UDim2.new(0,0,1,-5),Size=UDim2.new(0,5,0,5),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
}

local k=j.Main
local l=k.TopBar
local m=k.ResizeControls

i.GuiElems.Main=k
i.GuiElems.TopBar=k.TopBar
i.GuiElems.Content=k.Content
i.GuiElems.Line=k.Content.Line
i.GuiElems.Outlines=k.Outlines
i.GuiElems.Title=l.Title
i.GuiElems.Close=l.Close
i.GuiElems.Minimize=l.Minimize
i.GuiElems.ResizeControls=m
i.ContentPane=k.Content

local n=false
l.MouseButton1Down:Connect(function()n=true end)
l.MouseButton1Up:Connect(function()n=false end)

l.InputBegan:Connect(function(o)
if o.UserInputType==Enum.UserInputType.MouseButton1 or o.UserInputType==Enum.UserInputType.Touch then
if i.Draggable then
local p,q

local r=az.AbsoluteSize.X
local s=k.AbsolutePosition.X
local t=k.AbsolutePosition.Y
local u=o.Position.X-s
local v=o.Position.Y-t

local w,x

guiDragging=true

p=am.UserInputService.InputEnded:Connect(function(y)
if y.UserInputType==Enum.UserInputType.MouseButton1 or y.UserInputType==Enum.UserInputType.Touch then
p:Disconnect()
if q then q:Disconnect()end
guiDragging=false
aA.Parent=nil
if x then
local z=(x=="left"and aC)or(x=="right"and aD)
i:AlignTo(z,w)
end
end
end)

q=am.UserInputService.InputChanged:Connect(function(y)
if(y.UserInputType==Enum.UserInputType.MouseMovement or y.UserInputType==Enum.UserInputType.Touch)and i.Draggable and not i.Closed and n then
if i.Aligned then
if aC.Resizing or aD.Resizing then return end
local z,A=y.Position.X-u,y.Position.Y-v
local B=math.sqrt((z-s)^2+(A-t)^2)
if B>=5 then
i:SetAligned(false)
end
else
local z,A=y.Position.X,y.Position.Y
local B,C=z-u,A-v
if C<0 then C=0 end
k.Position=UDim2.new(0,B,0,C)

if i.Resizable and i.Alignable then
if z<25 then
if sideHasRoom(aC,i.MinY or 100)then
local D,E=getSideInsertPos(aC,A)
aA.Indicator.Position=UDim2.new(0,-15,0,E[1])
aA.Indicator.Size=UDim2.new(0,40,0,E[2]-E[1])
aq.ShowGui(aA)
w=D
x="left"
return
end
elseif z>=r-25 then
if sideHasRoom(aD,i.MinY or 100)then
local D,E=getSideInsertPos(aD,A)
aA.Indicator.Position=UDim2.new(0,r-25,0,E[1])
aA.Indicator.Size=UDim2.new(0,40,0,E[2]-E[1])
aq.ShowGui(aA)
w=D
x="right"
return
end
end
end
aA.Parent=nil
w=nil
x=nil
end
end
end)
end
end
end)

l.Close.MouseButton1Click:Connect(function()
if i.Closed then return end
i:Close()
end)

l.Minimize.MouseButton1Click:Connect(function()
if i.Closed then return end
if i.Aligned then
i:SetAligned(false)
else
i:SetMinimized()
end
end)

l.Minimize.MouseButton2Click:Connect(function()
if i.Closed then return end
if not i.Aligned then
i:SetMinimized(nil,2)
l.Minimize.BackgroundTransparency=1
end
end)

k.InputBegan:Connect(function(o)
if(o.UserInputType==Enum.UserInputType.MouseButton1 or o.UserInputType==Enum.UserInputType.Touch)and not i.Aligned and not i.Closed then
moveToTop(i)
end
end)

k:GetPropertyChangedSignal"AbsolutePosition":Connect(function()
local o=k.AbsolutePosition
i.PosX=o.X
i.PosY=o.Y
end)

resizeHook(i,m.North,"N")
resizeHook(i,m.NorthEast,"NE")
resizeHook(i,m.East,"E")
resizeHook(i,m.SouthEast,"SE")
resizeHook(i,m.South,"S")
resizeHook(i,m.SouthWest,"SW")
resizeHook(i,m.West,"W")
resizeHook(i,m.NorthWest,"NW")

k.Size=UDim2.new(0,i.SizeX,0,i.SizeY)

j.DescendantAdded:Connect(function(o)focusInput(i,o)end)
local o=j:GetDescendants()
for p=1,#o do
focusInput(i,o[p])
end

i.MinimizeAnim=aq.ButtonAnim(l.Minimize)
i.CloseAnim=aq.ButtonAnim(l.Close)

return j
end

local function updateSideFrames(j)
stopTweens()
aC.Frame.Size=UDim2.new(0,aC.Width,1,0)
aD.Frame.Size=UDim2.new(0,aD.Width,1,0)
aC.Frame.Resizer.Position=UDim2.new(0,aC.Width,0,0)
aD.Frame.Resizer.Position=UDim2.new(0,-5,0,0)











local k=#aC.Windows==0 or aC.Hidden
local l=#aD.Windows==0 or aD.Hidden
local m=(k and UDim2.new(0,-aC.Width-10,0,0)or UDim2.new(0,0,0,0))
local n=(l and UDim2.new(1,10,0,0)or UDim2.new(1,-aD.Width,0,0))

az.LeftToggle.Text=k and">"or"<"
az.RightToggle.Text=l and"<"or">"

if not j then
local function insertTween(...)
local o=am.TweenService:Create(...)
aH[#aH+1]=o
o:Play()
end
insertTween(aC.Frame,aG,{Position=m})
insertTween(aD.Frame,aG,{Position=n})
insertTween(az.LeftToggle,aG,{Position=UDim2.new(0,#aC.Windows==0 and-16 or 0,0,-36)})
insertTween(az.RightToggle,aG,{Position=UDim2.new(1,#aD.Windows==0 and 0 or-16,0,-36)})
else
aC.Frame.Position=m
aD.Frame.Position=n
az.LeftToggle.Position=UDim2.new(0,#aC.Windows==0 and-16 or 0,0,-36)
az.RightToggle.Position=UDim2.new(1,#aD.Windows==0 and 0 or-16,0,-36)
end
end

local function getSideFramePos(j)
local k=#aC.Windows==0 or aC.Hidden
local l=#aD.Windows==0 or aD.Hidden
if j==aC then
return(k and UDim2.new(0,-aC.Width-10,0,0)or UDim2.new(0,0,0,0))
else
return(l and UDim2.new(1,10,0,0)or UDim2.new(1,-aD.Width,0,0))
end
end

local function sideResized(j)
local k=0
local l=getSideFramePos(j)
for m,n in pairs(j.Windows)do
n.SizeX=j.Width
n.GuiElems.Main.Size=UDim2.new(0,j.Width,0,n.SizeY)
n.GuiElems.Main.Position=UDim2.new(l.X.Scale,l.X.Offset,0,k)
k=k+n.SizeY+4
end
end

local function sideResizerHook(j,k,l,m)local n=
aa.Mouse
local o=l.Windows

j.InputBegan:Connect(function(p)
if not l.Resizing then
if p.UserInputType==Enum.UserInputType.MouseMovement then
j.BackgroundColor3=g.MainColor2
elseif p.UserInputType==Enum.UserInputType.MouseButton1 or p.UserInputType==Enum.UserInputType.Touch then
local q,r

local s=p.Position.X-j.AbsolutePosition.X
local t=p.Position.Y-j.AbsolutePosition.Y

l.Resizing=j
j.BackgroundColor3=g.MainColor2

q=am.UserInputService.InputEnded:Connect(function(u)
if u.UserInputType==Enum.UserInputType.MouseButton1 or u.UserInputType==Enum.UserInputType.Touch then
q:Disconnect()
if r then r:Disconnect()end
l.Resizing=false
j.BackgroundColor3=g.Button
end
end)

r=am.UserInputService.InputChanged:Connect(function(u)
if not j.Parent then
q:Disconnect()
if r then r:Disconnect()end
l.Resizing=false
return
end

if u.UserInputType==Enum.UserInputType.MouseMovement or u.UserInputType==Enum.UserInputType.Touch then
if k=="V"then
local v=u.Position.Y-j.AbsolutePosition.Y-t

if v>0 then
local w=v
for x=m+1,#o do
local y=o[x]
local z=math.max(y.SizeY-w,(y.MinY or 100))
w=w-(y.SizeY-z)
y.SizeY=z
end
o[m].SizeY=o[m].SizeY+math.max(0,v-w)
else
local w=-v
for x=m,1,-1 do
local y=o[x]
local z=math.max(y.SizeY-w,(y.MinY or 100))
w=w-(y.SizeY-z)
y.SizeY=z
end
o[m+1].SizeY=o[m+1].SizeY+math.max(0,-v-w)
end

updateSideFrames()
sideResized(l)
elseif k=="H"then
local v=math.max(300,az.AbsoluteSize.X-ax.FreeWidth)
local w=(l==aC and aD or aC)
local x=u.Position.X-j.AbsolutePosition.X-s
x=(l==aC and x or-x)

local y=math.max(ax.MinWidth,l.Width+x)
if y+w.Width<=v then
l.Width=y
else
local z=v-y
if z>=ax.MinWidth then
l.Width=y
w.Width=z
else
l.Width=v-ax.MinWidth
w.Width=ax.MinWidth
end
end

updateSideFrames(true)
sideResized(l)
sideResized(w)
end
end
end)
end
end
end)

j.InputEnded:Connect(function(p)
if p.UserInputType==Enum.UserInputType.MouseMovement or p.UserInputType==Enum.UserInputType.Touch then
if l.Resizing~=j then
j.BackgroundColor3=g.Button
end
end
end)

end

local function renderSide(j,k)
local l=0
local m=getSideFramePos(j)
local n=j.WindowResizer:Clone()
for o,p in pairs(j.ResizeCons)do p:Disconnect()end
for o,p in pairs(j.Frame:GetChildren())do if p.Name=="WindowResizer"then p:Destroy()end end
j.ResizeCons={}
j.Resizing=nil

for o,p in pairs(j.Windows)do
p.SidePos=o
local q=o==#j.Windows
local r=UDim2.new(0,j.Width,0,p.SizeY)
local s=UDim2.new(m.X.Scale,m.X.Offset,0,l)
aq.ShowGui(p.Gui)

if k then
p.GuiElems.Main.Size=r
p.GuiElems.Main.Position=s
else
local t=am.TweenService:Create(p.GuiElems.Main,aG,{Size=r,Position=s})
aH[#aH+1]=t
t:Play()
end
l=l+p.SizeY+4

if not q then
local t=n:Clone()
t.Position=UDim2.new(1,-j.Width,0,l-4)
j.ResizeCons[#j.ResizeCons+1]=p.Gui.Main:GetPropertyChangedSignal"Size":Connect(function()
t.Position=UDim2.new(1,-j.Width,0,p.GuiElems.Main.Position.Y.Offset+p.GuiElems.Main.Size.Y.Offset)
end)
j.ResizeCons[#j.ResizeCons+1]=p.Gui.Main:GetPropertyChangedSignal"Position":Connect(function()
t.Position=UDim2.new(1,-j.Width,0,p.GuiElems.Main.Position.Y.Offset+p.GuiElems.Main.Size.Y.Offset)
end)
sideResizerHook(t,"V",j,o)
t.Parent=j.Frame
end
end



end

local function updateSide(j,k)
local l=0
local m=0
local n=0
local o=j.Windows
local p=az.AbsoluteSize.Y-(math.max(0,#o-1)*4)

for q,r in pairs(o)do l=l+r.SizeY end
for q,r in pairs(o)do
if q==#o then
r.SizeY=p-m
n=math.max(0,(r.MinY or 100)-r.SizeY)
else
r.SizeY=math.max(math.floor(r.SizeY/l*p),r.MinY or 100)
end
m=m+r.SizeY
end

if n>0 then
for q=#o-1,1,-1 do
local r=o[q]
local s=math.max(r.SizeY-n,(r.MinY or 100))
n=n-(r.SizeY-s)
r.SizeY=s
end
local q=o[#o]
q.SizeY=(q.MinY or 100)-n
end
renderSide(j,k)
end

h=function(j)
updateSideFrames(j)
updateSide(aC,j)
updateSide(aD,j)
local k=0
for l=#aB,1,-1 do
aB[l].Gui.DisplayOrder=aE+k
aq.ShowGui(aB[l].Gui)
k=k+1
end





end

aw.SetMinimized=function(j,k,l)
local m=j.Minimized
local n
if k==nil then n=not j.Minimized else n=k end
j.Minimized=n
if not l then l=1 end

local o=j.GuiElems.ResizeControls
local p={"North","NorthEast","NorthWest","South","SouthEast","SouthWest"}
for q=1,#p do
local r=o:FindFirstChild(p[q])
if r then r.Visible=not n end
end

if l==1 or l==2 then
j:StopTweens()
if l==1 then
j.GuiElems.Main:TweenSize(UDim2.new(0,j.SizeX,0,n and 20 or j.SizeY),Enum.EasingDirection.Out,Enum.EasingStyle.Quart,0.25,true)
else
local q=az.AbsoluteSize.Y
local r=UDim2.new(0,j.PosX,0,n and math.min(q-20,j.PosY+j.SizeY-20)or math.max(0,j.PosY-j.SizeY+20))

j.GuiElems.Main:TweenPosition(r,Enum.EasingDirection.Out,Enum.EasingStyle.Quart,0.25,true)
j.GuiElems.Main:TweenSize(UDim2.new(0,j.SizeX,0,n and 20 or j.SizeY),Enum.EasingDirection.Out,Enum.EasingStyle.Quart,0.25,true)
end
j.GuiElems.Minimize.ImageLabel.Image=n and"rbxassetid://5060023708"or"rbxassetid://5034768003"
end

if m~=n then
if n then
j.OnMinimize:Fire()
else
j.OnRestore:Fire()
end
end
end

aw.Resize=function(j,k,l)
j.SizeX=k or j.SizeX
j.SizeY=l or j.SizeY
j.GuiElems.Main.Size=UDim2.new(0,j.SizeX,0,j.SizeY)
end

aw.SetSize=aw.Resize

aw.SetTitle=function(j,k)
j.GuiElems.Title.Text=k
end

aw.SetResizable=function(j,k)
j.Resizable=k
j.GuiElems.ResizeControls.Visible=j.Resizable and j.ResizableInternal
end

aw.SetResizableInternal=function(j,k)
j.ResizableInternal=k
j.GuiElems.ResizeControls.Visible=j.Resizable and j.ResizableInternal
end

aw.SetAligned=function(j,k)
j.Aligned=k
j:SetResizableInternal(not k)
j.GuiElems.Main.Active=not k
j.GuiElems.Main.Outlines.Visible=not k
if not k then
for l,m in pairs(aC.Windows)do if m==j then table.remove(aC.Windows,l)break end end
for l,m in pairs(aD.Windows)do if m==j then table.remove(aD.Windows,l)break end end
if not table.find(aB,j)then table.insert(aB,1,j)end
j.GuiElems.Minimize.ImageLabel.Image="rbxassetid://5034768003"
j.Side=nil
h()
else
j:SetMinimized(false,3)
for l,m in pairs(aB)do if m==j then table.remove(aB,l)break end end
j.GuiElems.Minimize.ImageLabel.Image="rbxassetid://5448127505"
end
end

aw.Add=function(j,k,l)
if type(k)=="table"and k.Gui and k.Gui:IsA"GuiObject"then
k.Gui.Parent=j.ContentPane
else
k.Parent=j.ContentPane
end
if l then j.Elements[l]=k end
end

aw.GetElement=function(j,k,l)
return j.Elements[l]
end

aw.AlignTo=function(j,k,l,m,n)
if table.find(k.Windows,j)or j.Closed then return end

m=m or j.SizeY
if m>0 and m<=1 then
local o=0
for p,q in pairs(k.Windows)do o=o+q.SizeY end
j.SizeY=(o>0 and o*m*2)or m
else
j.SizeY=(m>0 and m or 100)
end

j:SetAligned(true)
j.Side=k
j.SizeX=k.Width
j.Gui.DisplayOrder=aF+1
for o,p in pairs(k.Windows)do p.Gui.DisplayOrder=aF end
l=math.min(#k.Windows+1,l or 1)
j.SidePos=l
table.insert(k.Windows,l,j)

if not n then
k.Hidden=false
end

end

aw.Close=function(j)
j.Closed=true
j:SetResizableInternal(false)

aq.FindAndRemove(aC.Windows,j)
aq.FindAndRemove(aD.Windows,j)
aq.FindAndRemove(aB,j)

j.MinimizeAnim.Disable()
j.CloseAnim.Disable()
j.ClosedSide=j.Side
j.Side=nil
j.OnDeactivate:Fire()

if not j.Aligned then
j:StopTweens()
local k=TweenInfo.new(0.2,Enum.EasingStyle.Quad,Enum.EasingDirection.Out)

local l=tick()
j.LastClose=l

j:DoTween(j.GuiElems.Main,k,{Size=UDim2.new(0,j.SizeX,0,20)})
j:DoTween(j.GuiElems.Title,k,{TextTransparency=1})
j:DoTween(j.GuiElems.Minimize.ImageLabel,k,{ImageTransparency=1})
j:DoTween(j.GuiElems.Close.ImageLabel,k,{ImageTransparency=1})
aq.FastWait(0.2)
if l~=j.LastClose then return end

j:DoTween(j.GuiElems.TopBar,k,{BackgroundTransparency=1})
j:DoTween(j.GuiElems.Outlines,k,{ImageTransparency=1})
aq.FastWait(0.2)
if l~=j.LastClose then return end
end

j.Aligned=false
j.Gui.Parent=nil
h(true)
end

aw.Hide=aw.Close

aw.IsVisible=function(j)
return not j.Closed and((j.Side and not j.Side.Hidden)or not j.Side)
end

aw.IsContentVisible=function(j)
return j:IsVisible()and not j.Minimized
end

aw.Focus=function(j)
moveToTop(j)
end

aw.MoveInBoundary=function(j)
local k,l=j.PosX,j.PosY
local m,n=az.AbsoluteSize.X,az.AbsoluteSize.Y
k=math.min(k,m-j.SizeX)
l=math.min(l,n-20)
j.GuiElems.Main.Position=UDim2.new(0,k,0,l)
end

aw.DoTween=function(j,...)
local k=am.TweenService:Create(...)
j.Tweens[#j.Tweens+1]=k
k:Play()
end

aw.StopTweens=function(j)
for k,l in pairs(j.Tweens)do
l:Cancel()
end
j.Tweens={}
end

aw.Show=function(j,k)
return ax.ShowWindow(j,k)
end

aw.ShowAndFocus=function(j,k)
ax.ShowWindow(j,k)
am.RunService.RenderStepped:wait()
j:Focus()
end

ax.ShowWindow=function(j,k)
k=k or{}
local l=k.Align
local m=k.Pos
local n=k.Size
local o=(l=="left"and aC)or(l=="right"and aD)

if not j.Closed then
if not j.Aligned then
j:SetMinimized(false)
elseif j.Side and not k.Silent then
ax.SetSideVisible(j.Side,true)
end
return
end

j.Closed=false
j.LastClose=tick()
j.GuiElems.Title.TextTransparency=0
j.GuiElems.Minimize.ImageLabel.ImageTransparency=0
j.GuiElems.Close.ImageLabel.ImageTransparency=0
j.GuiElems.TopBar.BackgroundTransparency=0
j.GuiElems.Outlines.ImageTransparency=0
j.GuiElems.Minimize.ImageLabel.Image="rbxassetid://5034768003"
j.GuiElems.Main.Active=true
j.GuiElems.Main.Outlines.Visible=true
j:SetMinimized(false,3)
j:SetResizableInternal(true)
j.MinimizeAnim.Enable()
j.CloseAnim.Enable()

if l then
j:AlignTo(o,m,n,k.Silent)
else
if l==nil and j.ClosedSide then
j:AlignTo(j.ClosedSide,j.SidePos,n,true)
ax.SetSideVisible(j.ClosedSide,true)
else
if table.find(aB,j)then return end


j.GuiElems.Main.Size=UDim2.new(0,j.SizeX,0,20)
local p=TweenInfo.new(0.2,Enum.EasingStyle.Quad,Enum.EasingDirection.Out)
j:StopTweens()
j:DoTween(j.GuiElems.Main,p,{Size=UDim2.new(0,j.SizeX,0,j.SizeY)})

j.SizeY=n or j.SizeY
table.insert(aB,1,j)
h()
end
end

j.ClosedSide=nil
j.OnActivate:Fire()
end

ax.ToggleSide=function(j)
local k=(j=="left"and aC or aD)
k.Hidden=not k.Hidden
for l,m in pairs(k.Windows)do
if k.Hidden then
m.OnDeactivate:Fire()
else
m.OnActivate:Fire()
end
end
h()
end

ax.SetSideVisible=function(j,k)
local l=(type(j)=="table"and j)or(j=="left"and aC or aD)
l.Hidden=not k
for m,n in pairs(l.Windows)do
if l.Hidden then
n.OnDeactivate:Fire()
else
n.OnActivate:Fire()
end
end
h()
end

ax.Init=function()
aE=aa.DisplayOrders.Window
aF=aa.DisplayOrders.SideWindow

az=Instance.new"ScreenGui"
local j=ao{
{1,"Frame",{Active=true,Name="LeftSide",BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderSizePixel=0,}},
{2,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2549019753933,0.2549019753933,0.2549019753933),BorderSizePixel=0,Font=3,Name="Resizer",Parent={1},Size=UDim2.new(0,5,1,0),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
{3,"Frame",{BackgroundColor3=Color3.new(0.14117647707462,0.14117647707462,0.14117647707462),BorderSizePixel=0,Name="Line",Parent={2},Position=UDim2.new(0,0,0,0),Size=UDim2.new(0,1,1,0),}},
{4,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2549019753933,0.2549019753933,0.2549019753933),BorderSizePixel=0,Font=3,Name="WindowResizer",Parent={1},Position=UDim2.new(1,-300,0,0),Size=UDim2.new(1,0,0,4),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
{5,"Frame",{BackgroundColor3=Color3.new(0.14117647707462,0.14117647707462,0.14117647707462),BorderSizePixel=0,Name="Line",Parent={4},Size=UDim2.new(1,0,0,1),}},
}
aC.Frame=j
j.Position=UDim2.new(0,-aC.Width-10,0,0)
aC.WindowResizer=j.WindowResizer
j.WindowResizer.Parent=nil
j.Parent=az

local k=ao{
{1,"Frame",{Active=true,Name="RightSide",BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderSizePixel=0,}},
{2,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2549019753933,0.2549019753933,0.2549019753933),BorderSizePixel=0,Font=3,Name="Resizer",Parent={1},Size=UDim2.new(0,5,1,0),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
{3,"Frame",{BackgroundColor3=Color3.new(0.14117647707462,0.14117647707462,0.14117647707462),BorderSizePixel=0,Name="Line",Parent={2},Position=UDim2.new(0,4,0,0),Size=UDim2.new(0,1,1,0),}},
{4,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2549019753933,0.2549019753933,0.2549019753933),BorderSizePixel=0,Font=3,Name="WindowResizer",Parent={1},Position=UDim2.new(1,-300,0,0),Size=UDim2.new(1,0,0,4),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
{5,"Frame",{BackgroundColor3=Color3.new(0.14117647707462,0.14117647707462,0.14117647707462),BorderSizePixel=0,Name="Line",Parent={4},Size=UDim2.new(1,0,0,1),}},
}
aD.Frame=k
k.Position=UDim2.new(1,10,0,0)
aD.WindowResizer=k.WindowResizer
k.WindowResizer.Parent=nil
k.Parent=az

sideResizerHook(j.Resizer,"H",aC)
sideResizerHook(k.Resizer,"H",aD)

aA=Instance.new"ScreenGui"
aA.DisplayOrder=aa.DisplayOrders.Core
local l=Instance.new("Frame",aA)
l.BackgroundColor3=Color3.fromRGB(0,170,255)
l.BorderSizePixel=0
l.BackgroundTransparency=0.8
l.Name="Indicator"
local m=Instance.new("UICorner",l)
m.CornerRadius=UDim.new(0,10)

local n=ao{{1,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BorderColor3=Color3.new(0.14117647707462,0.14117647707462,0.14117647707462),BorderMode=2,Font=10,Name="LeftToggle",Position=UDim2.new(0,0,0,-36),Size=UDim2.new(0,16,0,36),Text="<",TextColor3=Color3.new(1,1,1),TextSize=14,}}}
local o=n:Clone()
o.Name="RightToggle"
o.Position=UDim2.new(1,-16,0,-36)
aq.ButtonAnim(n,{Mode=2,PressColor=Color3.fromRGB(32,32,32)})
aq.ButtonAnim(o,{Mode=2,PressColor=Color3.fromRGB(32,32,32)})

n.MouseButton1Click:Connect(function()
ax.ToggleSide"left"
end)

o.MouseButton1Click:Connect(function()
ax.ToggleSide"right"
end)

n.Parent=az
o.Parent=az

az:GetPropertyChangedSignal"AbsoluteSize":Connect(function()
local p=math.max(300,az.AbsoluteSize.X-ax.FreeWidth)
aC.Width=math.max(ax.MinWidth,math.min(aC.Width,p-aD.Width))
aD.Width=math.max(ax.MinWidth,math.min(aD.Width,p-aC.Width))
for q=1,#aB do
aB[q]:MoveInBoundary()
end
h(true)
end)

az.DisplayOrder=aF-1
aq.ShowGui(az)
updateSideFrames()
end

local j={__index=aw}
ax.new=function()
local k=setmetatable({
Minimized=false,
Dragging=false,
Resizing=false,
Aligned=false,
Draggable=true,
Resizable=true,
ResizableInternal=true,
Alignable=true,
Closed=true,
SizeX=300,
SizeY=300,
MinX=200,
MinY=200,
PosX=0,
PosY=0,
GuiElems={},
Tweens={},
Elements={},
OnActivate=aq.Signal.new(),
OnDeactivate=aq.Signal.new(),
OnMinimize=aq.Signal.new(),
OnRestore=aq.Signal.new()
},j)
k.Gui=i(k)
return k
end

return ax
end)()

aq.ContextMenu=(function()
local aw={}
local ax

local function createGui(az)
local aA=ao{
{1,"ScreenGui",{DisplayOrder=1000000,Name="Context",ZIndexBehavior=1,}},
{2,"Frame",{Active=true,BackgroundColor3=Color3.new(0.14117647707462,0.14117647707462,0.14117647707462),BorderColor3=Color3.new(0.14117647707462,0.14117647707462,0.14117647707462),Name="Main",Parent={1},Position=UDim2.new(0.5,-100,0.5,-150),Size=UDim2.new(0,200,0,100),}},
{3,"UICorner",{CornerRadius=UDim.new(0,4),Parent={2},}},
{4,"Frame",{BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),Name="Container",Parent={2},Position=UDim2.new(0,1,0,1),Size=UDim2.new(1,-2,1,-2),}},
{5,"UICorner",{CornerRadius=UDim.new(0,4),Parent={4},}},
{6,"ScrollingFrame",{Active=true,BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BackgroundTransparency=1,BorderSizePixel=0,CanvasSize=UDim2.new(0,0,0,0),Name="List",Parent={4},Position=UDim2.new(0,2,0,2),ScrollBarImageColor3=Color3.new(0,0,0),ScrollBarThickness=4,Size=UDim2.new(1,-4,1,-4),VerticalScrollBarInset=1,}},
{7,"UIListLayout",{Parent={6},SortOrder=2,}},
{8,"Frame",{BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BorderSizePixel=0,Name="SearchFrame",Parent={4},Size=UDim2.new(1,0,0,24),Visible=false,}},
{9,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.1176470592618,0.1176470592618,0.1176470592618),BorderSizePixel=0,Name="SearchContainer",Parent={8},Position=UDim2.new(0,3,0,3),Size=UDim2.new(1,-6,0,18),}},
{10,"TextBox",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="SearchBox",Parent={9},PlaceholderColor3=Color3.new(0.39215689897537,0.39215689897537,0.39215689897537),PlaceholderText="Search",Position=UDim2.new(0,4,0,0),Size=UDim2.new(1,-8,0,18),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,TextXAlignment=0,}},
{11,"UICorner",{CornerRadius=UDim.new(0,2),Parent={9},}},
{12,"Frame",{BackgroundColor3=Color3.new(0.14117647707462,0.14117647707462,0.14117647707462),BorderSizePixel=0,Name="Line",Parent={8},Position=UDim2.new(0,0,1,0),Size=UDim2.new(1,0,0,1),}},
{13,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BackgroundTransparency=1,BorderColor3=Color3.new(0.33725491166115,0.49019610881805,0.73725491762161),BorderSizePixel=0,Font=3,Name="Entry",Parent={1},Size=UDim2.new(1,0,0,22),Text="",TextSize=14,Visible=false,}},
{14,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="EntryName",Parent={13},Position=UDim2.new(0,24,0,0),Size=UDim2.new(1,-24,1,0),Text="Duplicate",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
{15,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Shortcut",Parent={13},Position=UDim2.new(0,24,0,0),Size=UDim2.new(1,-30,1,0),Text="Ctrl+D",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
{16,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,ImageRectOffset=Vector2.new(304,0),ImageRectSize=Vector2.new(16,16),Name="Icon",Parent={13},Position=UDim2.new(0,2,0,3),ScaleType=4,Size=UDim2.new(0,16,0,16),}},
{17,"UICorner",{CornerRadius=UDim.new(0,4),Parent={13},}},
{18,"Frame",{BackgroundColor3=Color3.new(0.21568629145622,0.21568629145622,0.21568629145622),BackgroundTransparency=1,BorderSizePixel=0,Name="Divider",Parent={1},Position=UDim2.new(0,0,0,20),Size=UDim2.new(1,0,0,7),Visible=false,}},
{19,"Frame",{BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BorderSizePixel=0,Name="Line",Parent={18},Position=UDim2.new(0,0,0.5,0),Size=UDim2.new(1,0,0,1),}},
{20,"TextLabel",{AnchorPoint=Vector2.new(0,0.5),BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="DividerName",Parent={18},Position=UDim2.new(0,2,0.5,0),Size=UDim2.new(1,-4,1,0),Text="Objects",TextColor3=Color3.new(1,1,1),TextSize=14,TextTransparency=0.60000002384186,TextXAlignment=0,Visible=false,}}
}

az.GuiElems.Main=aA.Main
az.GuiElems.List=aA.Main.Container.List
az.GuiElems.Entry=aA.Entry
az.GuiElems.Divider=aA.Divider
az.GuiElems.SearchFrame=aA.Main.Container.SearchFrame
az.GuiElems.SearchBar=az.GuiElems.SearchFrame.SearchContainer.SearchBox
aq.ViewportTextBox.convert(az.GuiElems.SearchBar)

az.GuiElems.SearchBar:GetPropertyChangedSignal"Text":Connect(function()
local aB,aC=string.lower,string.find
local aD=aB(az.GuiElems.SearchBar.Text)
local aE=az.Items
local aF=az.ItemToEntryMap

if aD~=""then
local aG={}
local aH=1
for aI=1,#aE do
local g=aE[aI]
local h=aF[g]
if h then
if not g.Divider and aC(aB(g.Name),aD,1,true)then
aG[aH]=g
aH=aH+1
else
h.Visible=false
end
end
end
table.sort(aG,function(aI,g)return aI.Name<g.Name end)
for aI=1,#aG do
local g=aF[aG[aI] ]
g.LayoutOrder=aI
g.Visible=true
end
else
for aG=1,#aE do
local aH=aF[aE[aG] ]
if aH then aH.LayoutOrder=aG aH.Visible=true end
end
end

local aG=az.GuiElems.List.UIListLayout.AbsoluteContentSize.Y+6
az.GuiElems.List.CanvasSize=UDim2.new(0,0,0,aG-6)
end)

return aA
end

aw.Add=function(az,aA)
local aB={
Name=aA.Name or"Item",
Icon=aA.Icon or"",
Shortcut=aA.Shortcut or"",
OnClick=aA.OnClick,
OnHover=aA.OnHover,
Disabled=aA.Disabled or false,
DisabledIcon=aA.DisabledIcon or"",
IconMap=aA.IconMap,
OnRightClick=aA.OnRightClick
}

if az.QueuedDivider then
local aC=az.QueuedDividerText and#az.QueuedDividerText>0 and az.QueuedDividerText
az:AddDivider(aC)
end
az.Items[#az.Items+1]=aB
az.Updated=nil
end

aw.AddRegistered=function(az,aA,aB)
if not az.Registered[aA]then error(aA.." is not registered")end

if az.QueuedDivider then
local aC=az.QueuedDividerText and#az.QueuedDividerText>0 and az.QueuedDividerText
az:AddDivider(aC)
end
az.Registered[aA].Disabled=aB
az.Items[#az.Items+1]=az.Registered[aA]
az.Updated=nil
end

aw.Register=function(az,aA,aB)
az.Registered[aA]={
Name=aB.Name or"Item",
Icon=aB.Icon or"",
Shortcut=aB.Shortcut or"",
OnClick=aB.OnClick,
OnHover=aB.OnHover,
DisabledIcon=aB.DisabledIcon or"",
IconMap=aB.IconMap,
OnRightClick=aB.OnRightClick
}
end

aw.UnRegister=function(az,aA)
az.Registered[aA]=nil
end

aw.AddDivider=function(az,aA)
az.QueuedDivider=false
local aB=aA and am.TextService:GetTextSize(aA,14,Enum.Font.SourceSans,Vector2.new(999999999,20)).X or nil
table.insert(az.Items,{Divider=true,Text=aA,TextSize=aB and aB+4})
az.Updated=nil
end

aw.QueueDivider=function(az,aA)
az.QueuedDivider=true
az.QueuedDividerText=aA or""
end

aw.Clear=function(az)
az.Items={}
az.Updated=nil
end

aw.Refresh=function(az)
for aA,aB in pairs(az.GuiElems.List:GetChildren())do
if not aB:IsA"UIListLayout"then
aB:Destroy()
end
end
local aA={}
az.ItemToEntryMap=aA

local aB=az.GuiElems.Divider
local aC=az.GuiElems.List
local aD=az.GuiElems.Entry
local aE=az.Items

for aF=1,#aE do
local aG=aE[aF]
if aG.Divider then
local aH=aB:Clone()
aH.Line.BackgroundColor3=az.Theme.DividerColor
if aG.Text then
aH.Size=UDim2.new(1,0,0,20)
aH.Line.Position=UDim2.new(0,aG.TextSize,0.5,0)
aH.Line.Size=UDim2.new(1,-aG.TextSize,0,1)
aH.DividerName.TextColor3=az.Theme.TextColor
aH.DividerName.Text=aG.Text
aH.DividerName.Visible=true
end
aH.Visible=true
aA[aG]=aH
aH.Parent=aC
else
local aH=aD:Clone()
aH.BackgroundColor3=az.Theme.HighlightColor
aH.EntryName.TextColor3=az.Theme.TextColor
aH.EntryName.Text=aG.Name
aH.Shortcut.Text=aG.Shortcut
if aG.Disabled then
aH.EntryName.TextColor3=Color3.new(0.5882352941176471,0.5882352941176471,0.5882352941176471)
aH.Shortcut.TextColor3=Color3.new(0.5882352941176471,0.5882352941176471,0.5882352941176471)
end

if az.Iconless then
aH.EntryName.Position=UDim2.new(0,2,0,0)
aH.EntryName.Size=UDim2.new(1,-4,0,20)
aH.Icon.Visible=false
else
local aI=aG.Disabled and aG.DisabledIcon or aG.Icon

if aG.IconMap then
if type(aI)=="number"then
aG.IconMap:Display(aH.Icon,aI)
elseif type(aI)=="string"then
aG.IconMap:DisplayByKey(aH.Icon,aI)
end
elseif type(aI)=="string"then
aH.Icon.Image=aI
end
end

if not aG.Disabled then
if aG.OnClick then
aH.MouseButton1Click:Connect(function()
aG.OnClick(aG.Name)
if not aG.NoHide then
az:Hide()
end
end)
end

if aG.OnRightClick then
aH.MouseButton2Click:Connect(function()
aG.OnRightClick(aG.Name)
if not aG.NoHide then
az:Hide()
end
end)
end
end

aH.InputBegan:Connect(function(aI)
if aI.UserInputType==Enum.UserInputType.MouseMovement or aI.UserInputType==Enum.UserInputType.Touch then
aH.BackgroundTransparency=0
end
end)

aH.InputEnded:Connect(function(aI)
if aI.UserInputType==Enum.UserInputType.MouseMovement or aI.UserInputType==Enum.UserInputType.Touch then
aH.BackgroundTransparency=1
end
end)

aH.Visible=true
aA[aG]=aH
aH.Parent=aC
end
end
az.Updated=true
end

aw.Show=function(az,aA,aB)
local aC=az.GuiElems
aC.SearchFrame.Visible=az.SearchEnabled
aC.List.Position=UDim2.new(0,2,0,2+(az.SearchEnabled and 24 or 0))
aC.List.Size=UDim2.new(1,-4,1,-4-(az.SearchEnabled and 24 or 0))
if az.SearchEnabled and az.ClearSearchOnShow then aC.SearchBar.Text=""end
az.GuiElems.List.CanvasPosition=Vector2.new(0,0)

if not az.Updated then
az:Refresh()
end


local aD=false
local aE,aF=aA or ax.X,aB or ax.Y
local aG,aH=ax.ViewSizeX,ax.ViewSizeY


if aE+az.Width>aG then
aE=az.ReverseX and aE-az.Width or aG-az.Width
end
aC.Main.Position=UDim2.new(0,aE,0,aF)
aC.Main.Size=UDim2.new(0,az.Width,0,0)
az.Gui.DisplayOrder=aa.DisplayOrders.Menu
aq.ShowGui(az.Gui)


local aI=aC.List.UIListLayout.AbsoluteContentSize.Y+6
if az.MaxHeight and aI>az.MaxHeight then
aC.List.CanvasSize=UDim2.new(0,0,0,aI-6)
aI=az.MaxHeight
else
aC.List.CanvasSize=UDim2.new(0,0,0,0)
end
if aF+aI>aH then aD=true end


local g
if az.CloseEvent then az.CloseEvent:Disconnect()end
az.CloseEvent=am.UserInputService.InputBegan:Connect(function(h)
if not g then return end

if h.UserInputType==Enum.UserInputType.MouseButton1 or h.UserInputType==Enum.UserInputType.Touch then
if not aq.CheckMouseInGui(aC.Main)then
az.CloseEvent:Disconnect()
az:Hide()
end
end
end)


if aD then
aC.Main.Position=UDim2.new(0,aE,0,aF-(az.ReverseYOffset or 0))
local h=aF-aI-(az.ReverseYOffset or 0)
aF=h>=0 and h or 0
aC.Main:TweenSizeAndPosition(UDim2.new(0,az.Width,0,aI),UDim2.new(0,aE,0,aF),Enum.EasingDirection.Out,Enum.EasingStyle.Quart,0.2,true)
else
aC.Main:TweenSize(UDim2.new(0,az.Width,0,aI),Enum.EasingDirection.Out,Enum.EasingStyle.Quart,0.2,true)
end


aq.FastWait()
if az.SearchEnabled and az.FocusSearchOnShow then aC.SearchBar:CaptureFocus()end
g=true
end

aw.Hide=function(az)
az.Gui.Parent=nil
end

aw.ApplyTheme=function(az,aA)
local aB=az.Theme
aB.ContentColor=aA.ContentColor or ad.Theme.Menu
aB.OutlineColor=aA.OutlineColor or ad.Theme.Menu
aB.DividerColor=aA.DividerColor or ad.Theme.Outline2
aB.TextColor=aA.TextColor or ad.Theme.Text
aB.HighlightColor=aA.HighlightColor or ad.Theme.Main1

az.GuiElems.Main.BackgroundColor3=aB.OutlineColor
az.GuiElems.Main.Container.BackgroundColor3=aB.ContentColor
end

local az={__index=aw}
local function new()
if not ax then ax=aa.Mouse or am.Players.LocalPlayer:GetMouse()end

local aA=setmetatable({
Width=200,
MaxHeight=nil,
Iconless=false,
SearchEnabled=false,
ClearSearchOnShow=true,
FocusSearchOnShow=true,
Updated=false,
QueuedDivider=false,
QueuedDividerText="",
Items={},
Registered={},
GuiElems={},
Theme={}
},az)
aA.Gui=createGui(aA)
aA:ApplyTheme{}
return aA
end

return{new=new}
end)()

aq.CodeFrame=(function()
local aw={}

local ax={
[1]="String",
[2]="String",
[3]="String",
[4]="Comment",
[5]="Operator",
[6]="Number",
[7]="Keyword",
[8]="BuiltIn",
[9]="LocalMethod",
[10]="LocalProperty",
[11]="Nil",
[12]="Bool",
[13]="Function",
[14]="Local",
[15]="Self",
[16]="FunctionName",
[17]="Bracket"
}

local az={
["nil"]=11,
["true"]=12,
["false"]=12,
["function"]=13,
["local"]=14,self=
15
}

local aA={
["and"]=true,
["break"]=true,
["do"]=true,
["else"]=true,
["elseif"]=true,
["end"]=true,
["false"]=true,
["for"]=true,
["function"]=true,
["if"]=true,
["in"]=true,
["local"]=true,
["nil"]=true,
["not"]=true,
["or"]=true,
["repeat"]=true,
["return"]=true,
["then"]=true,
["true"]=true,
["until"]=true,
["while"]=true,plugin=
true
}

local aB={delay=
true,elapsedTime=
true,require=
true,spawn=
true,tick=
true,time=
true,typeof=
true,UserSettings=
true,wait=
true,warn=
true,game=
true,shared=
true,script=
true,workspace=
true,assert=
true,collectgarbage=
true,error=
true,getfenv=
true,getmetatable=
true,ipairs=
true,loadstring=
true,newproxy=
true,next=
true,pairs=
true,pcall=
true,print=
true,rawequal=
true,rawget=
true,rawset=
true,select=
true,setfenv=
true,setmetatable=
true,tonumber=
true,tostring=
true,type=
true,unpack=
true,xpcall=
true,_G=
true,_VERSION=
true,coroutine=
true,debug=
true,math=
true,os=
true,string=
true,table=
true,bit32=
true,utf8=
true,Axes=
true,BrickColor=
true,CFrame=
true,Color3=
true,ColorSequence=
true,ColorSequenceKeypoint=
true,DockWidgetPluginGuiInfo=
true,Enum=
true,Faces=
true,Instance=
true,NumberRange=
true,NumberSequence=
true,NumberSequenceKeypoint=
true,PathWaypoint=
true,PhysicalProperties=
true,Random=
true,Ray=
true,Rect=
true,Region3=
true,Region3int16=
true,TweenInfo=
true,UDim=
true,UDim2=
true,Vector2=
true,Vector2int16=
true,Vector3=
true,Vector3int16=
true
}

local aC=false

local aD={
["'"]="&apos;",
["\""]="&quot;",
["<"]="&lt;",
[">"]="&gt;",
["&"]="&amp;"
}

local aE="\t"
local aF=(" %s "):format(aE)

local aG={
[("[^%s] "):format(aE)]=0,
[(" %s"):format(aE)]=-1,
[("%s "):format(aE)]=2,
[(" [^%s]"):format(aE)]=1,
}

local aH=am.TweenService
local aI={}

local function initBuiltIn()
local g=getfenv()
local h=type
local i=tostring
for j,k in next,aB do
local l=g[j]
if h(l)=="table"then
local m={}
for n,o in next,l do
m[n]=true
end
aB[j]=m
end
end

local j={}
local k=Enum:GetEnums()
for l=1,#k do
j[i(k[l])]=true
end
aB.Enum=j

aC=true
end

local function setupEditBox(g)
local h=g.GuiElems.EditBox

h.Focused:Connect(function()
g:ConnectEditBoxEvent()
g.Editing=true
end)

h.FocusLost:Connect(function()
g:DisconnectEditBoxEvent()
g.Editing=false
end)

h:GetPropertyChangedSignal"Text":Connect(function()
local i=h.Text
if#i==0 or g.EditBoxCopying then return end
h.Text=""
g:AppendText(i)
end)
end

local function setupMouseSelection(g)
an:GetMouse()
local h=g.GuiElems.LinesFrame
local i=g.Lines

h.InputBegan:Connect(function(j)
if j.UserInputType==Enum.UserInputType.MouseButton1 or j.UserInputType==Enum.UserInputType.Touch then
local k,l=math.ceil(g.FontSize/2),g.FontSize
local m=j.Position.X-h.AbsolutePosition.X
local n=j.Position.Y-h.AbsolutePosition.Y
local o=math.round(m/k)+g.ViewX
local p=math.floor(n/l)+g.ViewY
local q,r,s
local t,u=0,0
p=math.min(#i-1,p)
local v=i[p+1]or""
o=math.min(#v,o+g:TabAdjust(o,p))

g.SelectionRange={{-1,-1},{-1,-1}}
g:MoveCursor(o,p)
g.FloatCursorX=o

local function updateSelection()
local w=j.Position.X-h.AbsolutePosition.X
local x=j.Position.Y-h.AbsolutePosition.Y
local y=math.max(0,math.round(w/k)+g.ViewX)
local z=math.max(0,math.floor(x/l)+g.ViewY)

z=math.min(#i-1,z)
local A=i[z+1]or""
y=math.min(#A,y+g:TabAdjust(y,z))

if z<p or(z==p and y<o)then
g.SelectionRange={{y,z},{o,p}}
else
g.SelectionRange={{o,p},{y,z}}
end

g:MoveCursor(y,z)
g.FloatCursorX=y
g:Refresh()
end

q=am.UserInputService.InputEnded:Connect(function(w)
if w.UserInputType==Enum.UserInputType.MouseButton1 or w.UserInputType==Enum.UserInputType.Touch then
q:Disconnect()
r:Disconnect()
s:Disconnect()
g:SetCopyableSelection()
end
end)

r=am.UserInputService.InputChanged:Connect(function(w)
if w.UserInputType==Enum.UserInputType.MouseMovement or w.UserInputType==Enum.UserInputType.Touch then
local x=w.Position.Y-h.AbsolutePosition.Y
local y=w.Position.Y-h.AbsolutePosition.Y-h.AbsoluteSize.Y
local z=w.Position.X-h.AbsolutePosition.X
local A=w.Position.X-h.AbsolutePosition.X-h.AbsoluteSize.X

t=0
u=0
if y>0 then
t=math.floor(y*0.05)+1
elseif x<0 then
t=math.ceil(x*0.05)-1
end
if A>0 then
u=math.floor(A*0.05)+1
elseif z<0 then
u=math.ceil(z*0.05)-1
end
updateSelection()
end
end)

s=am.RunService.RenderStepped:Connect(function()
if t~=0 or u~=0 then
g:ScrollDelta(u,t)
updateSelection()
end
end)

g:Refresh()
end
end)

end

local function makeFrame(g)
local h=ao{
{1,"Frame",{BackgroundColor3=Color3.new(0.15686275064945,0.15686275064945,0.15686275064945),BorderSizePixel=0,Position=UDim2.new(0.5,-300,0.5,-200),Size=UDim2.new(0,600,0,400),}},
}
local i={}

local j=Instance.new"Frame"
j.Name="Lines"
j.BackgroundTransparency=1
j.Size=UDim2.new(1,0,1,0)
j.ClipsDescendants=true
j.Parent=h

local k=Instance.new"TextLabel"
k.Name="LineNumbers"
k.BackgroundTransparency=1
k.Font=Enum.Font.Code
k.TextXAlignment=Enum.TextXAlignment.Right
k.TextYAlignment=Enum.TextYAlignment.Top
k.ClipsDescendants=true
k.RichText=true
k.Parent=h

local l=Instance.new"Frame"
l.Name="Cursor"
l.BackgroundColor3=Color3.fromRGB(220,220,220)
l.BorderSizePixel=0
l.Parent=h

local m=Instance.new"TextBox"
m.Name="EditBox"
m.MultiLine=true
m.Visible=false
m.Parent=h

aI.Invis=aH:Create(l,TweenInfo.new(0.4,Enum.EasingStyle.Quart,Enum.EasingDirection.Out),{BackgroundTransparency=1})
aI.Vis=aH:Create(l,TweenInfo.new(0.2,Enum.EasingStyle.Quart,Enum.EasingDirection.Out),{BackgroundTransparency=0})

i.LinesFrame=j
i.LineNumbersLabel=k
i.Cursor=l
i.EditBox=m
i.ScrollCorner=ao{{1,"Frame",{BackgroundColor3=Color3.new(0.15686275064945,0.15686275064945,0.15686275064945),BorderSizePixel=0,Name="ScrollCorner",Position=UDim2.new(1,-16,1,-16),Size=UDim2.new(0,16,0,16),Visible=false,}}}

i.ScrollCorner.Parent=h
j.InputBegan:Connect(function(n)
if n.UserInputType==Enum.UserInputType.MouseButton1 or n.UserInputType==Enum.UserInputType.Touch then
g:SetEditing(true,n)
end
end)


g.Frame=h
g.Gui=h
g.GuiElems=i
setupEditBox(g)
setupMouseSelection(g)

return h
end

aw.GetSelectionText=function(g)
if not g:IsValidRange()then return""end

local h=g.SelectionRange
local i,j=h[1][1],h[1][2]
local k,l=h[2][1],h[2][2]
local m=l-j
local n=g.Lines

if not n[j+1]or not n[l+1]then return""end

if m==0 then
return g:ConvertText(n[j+1]:sub(i+1,k),false)
end

local o=n[j+1]:sub(i+1)
local p=n[l+1]:sub(1,k)

local q=o.."\n"
for r=j+1,l-1 do
q=q..n[r+1].."\n"
end
q=q..p

return g:ConvertText(q,false)
end

aw.SetCopyableSelection=function(g)
local h=g:GetSelectionText()
local i=g.GuiElems.EditBox

g.EditBoxCopying=true
i.Text=h
i.SelectionStart=1
i.CursorPosition=#i.Text+1
g.EditBoxCopying=false
end

aw.ConnectEditBoxEvent=function(g)
if g.EditBoxEvent then
g.EditBoxEvent:Disconnect()
end

g.EditBoxEvent=am.UserInputService.InputBegan:Connect(function(h)
if h.UserInputType~=Enum.UserInputType.Keyboard then return end

local i=Enum.KeyCode
local j=h.KeyCode

local function setupMove(k,l)
local m,n
m=am.UserInputService.InputEnded:Connect(function(o)
if o.KeyCode~=k then return end
m:Disconnect()
n=true
end)
l()
aq.FastWait(0.5)
while not n do l()aq.FastWait(0.03)end
end

if j==i.Down then
setupMove(i.Down,function()
g.CursorX=g.FloatCursorX
g.CursorY=g.CursorY+1
g:UpdateCursor()
g:JumpToCursor()
end)
elseif j==i.Up then
setupMove(i.Up,function()
g.CursorX=g.FloatCursorX
g.CursorY=g.CursorY-1
g:UpdateCursor()
g:JumpToCursor()
end)
elseif j==i.Left then
setupMove(i.Left,function()
local k=g.Lines[g.CursorY+1]or""
g.CursorX=g.CursorX-1-(k:sub(g.CursorX-3,g.CursorX)==aF and 3 or 0)
if g.CursorX<0 then
g.CursorY=g.CursorY-1
local l=g.Lines[g.CursorY+1]or""
g.CursorX=#l
end
g.FloatCursorX=g.CursorX
g:UpdateCursor()
g:JumpToCursor()
end)
elseif j==i.Right then
setupMove(i.Right,function()
local k=g.Lines[g.CursorY+1]or""
g.CursorX=g.CursorX+1+(k:sub(g.CursorX+1,g.CursorX+4)==aF and 3 or 0)
if g.CursorX>#k then
g.CursorY=g.CursorY+1
g.CursorX=0
end
g.FloatCursorX=g.CursorX
g:UpdateCursor()
g:JumpToCursor()
end)
elseif j==i.Backspace then
setupMove(i.Backspace,function()
local k,l
if g:IsValidRange()then
k=g.SelectionRange[1]
l=g.SelectionRange[2]
else
l={g.CursorX,g.CursorY}
end

if not k then
local m=g.Lines[g.CursorY+1]or""
g.CursorX=g.CursorX-1-(m:sub(g.CursorX-3,g.CursorX)==aF and 3 or 0)
if g.CursorX<0 then
g.CursorY=g.CursorY-1
local n=g.Lines[g.CursorY+1]or""
g.CursorX=#n
end
g.FloatCursorX=g.CursorX
g:UpdateCursor()

k=k or{g.CursorX,g.CursorY}
end

g:DeleteRange({k,l},false,true)
g:ResetSelection(true)
g:JumpToCursor()
end)
elseif j==i.Delete then
setupMove(i.Delete,function()
local k,l
if g:IsValidRange()then
k=g.SelectionRange[1]
l=g.SelectionRange[2]
else
k={g.CursorX,g.CursorY}
end

if not l then
local m=g.Lines[g.CursorY+1]or""
local n=g.CursorX+1+(m:sub(g.CursorX+1,g.CursorX+4)==aF and 3 or 0)
local o=g.CursorY
if n>#m then
o=o+1
n=0
end
g:UpdateCursor()

l=l or{n,o}
end

g:DeleteRange({k,l},false,true)
g:ResetSelection(true)
g:JumpToCursor()
end)
elseif am.UserInputService:IsKeyDown(Enum.KeyCode.LeftControl)then
if j==i.A then
g.SelectionRange={{0,0},{#g.Lines[#g.Lines],#g.Lines-1}}
g:SetCopyableSelection()
g:Refresh()
end
end
end)
end

aw.DisconnectEditBoxEvent=function(g)
if g.EditBoxEvent then
g.EditBoxEvent:Disconnect()
end
end

aw.ResetSelection=function(g,h)
g.SelectionRange={{-1,-1},{-1,-1}}
if not h then g:Refresh()end
end

aw.IsValidRange=function(g,h)
local i=h or g.SelectionRange
local j,k=i[1][1],i[1][2]
local l,m=i[2][1],i[2][2]

if j==-1 or(j==l and k==m)then return false end

return true
end

aw.DeleteRange=function(g,h,i,j)
h=h or g.SelectionRange
if not g:IsValidRange(h)then return end

local k=g.Lines
local l,m=h[1][1],h[1][2]
local n,o=h[2][1],h[2][2]
local p=o-m

if not k[m+1]or not k[o+1]then return end

local q=k[m+1]:sub(1,l)
local r=k[o+1]:sub(n+1)
k[m+1]=q..r

local s=table.remove
for t=1,p do
s(k,m+2)
end

if h==g.SelectionRange then g.SelectionRange={{-1,-1},{-1,-1}}end
if j then
g.CursorX=l
g.CursorY=m
g:UpdateCursor()
end

if not i then
g:ProcessTextChange()
end
end

aw.AppendText=function(g,h)
g:DeleteRange(nil,true,true)
local i,j,k=g.Lines,g.CursorX,g.CursorY
local l=i[k+1]
local m=l:sub(1,j)
local n=l:sub(j+1)

h=h:gsub("\r\n","\n")
h=g:ConvertText(h,true)

local o=h:split"\n"
local p=table.insert

for q=1,#o do
local r=k+q
if q>1 then p(i,r,"")end

local s=o[q]
local t=(q==1 and m or"")
local u=(q==#o and n or"")

i[r]=t..s..u
end

if#o>1 then j=0 end

g:ProcessTextChange()
g.CursorX=j+#o[#o]
g.CursorY=k+#o-1
g:UpdateCursor()
end

aw.ScrollDelta=function(g,h,i)
g.ScrollV:ScrollTo(g.ScrollV.Index+i)
g.ScrollH:ScrollTo(g.ScrollH.Index+h)
end


aw.TabAdjust=function(g,h,i)
local j=g.Lines
local k=j[i+1]
h=h+1

if k then
local l=k:sub(h-1,h-1)
local m=k:sub(h,h)
local n=k:sub(h+1,h+1)
local o=(#l>0 and l or" ")..(#m>0 and m or" ")..(#n>0 and n or" ")

for p,q in pairs(aG)do
if o:find(p)then
return q
end
end
end
return 0
end

aw.SetEditing=function(g,h,i)
g:UpdateCursor(i)

if h then
if g.Editable then
g.GuiElems.EditBox.Text=""
g.GuiElems.EditBox:CaptureFocus()
end
else
g.GuiElems.EditBox:ReleaseFocus()
end
end

aw.CursorAnim=function(g,h)
local i=g.GuiElems.Cursor
local j=tick()
g.LastAnimTime=j

if not h then return end

aI.Invis:Cancel()
aI.Vis:Cancel()
i.BackgroundTransparency=0

coroutine.wrap(function()
while g.Editable do
aq.FastWait(0.5)
if g.LastAnimTime~=j then return end
aI.Invis:Play()
aq.FastWait(0.4)
if g.LastAnimTime~=j then return end
aI.Vis:Play()
aq.FastWait(0.2)
end
end)()
end

aw.MoveCursor=function(g,h,i)
g.CursorX=h
g.CursorY=i
g:UpdateCursor()
g:JumpToCursor()
end

aw.JumpToCursor=function(g)
g:Refresh()
end

aw.UpdateCursor=function(g,h)
local i=g.GuiElems.LinesFrame
local j=g.GuiElems.Cursor
local k=math.max(0,i.AbsoluteSize.X)
local l=math.max(0,i.AbsoluteSize.Y)
local m=math.ceil(l/g.FontSize)
local n=math.ceil(k/math.ceil(g.FontSize/2))
local o,p=g.ViewX,g.ViewY
local q=tostring(#g.Lines)
local r=math.ceil(g.FontSize/2)
local s=#q*r+4*r

if h then
local t=g.GuiElems.LinesFrame
local u,v=t.AbsolutePosition.X,t.AbsolutePosition.Y
local w,x=h.Position.X,h.Position.Y
local y,z=math.ceil(g.FontSize/2),g.FontSize

g.CursorX=g.ViewX+math.round((w-u)/y)
g.CursorY=g.ViewY+math.floor((x-v)/z)
end

local t,u=g.CursorX,g.CursorY

local v=g.Lines[u+1]or""
if t>#v then t=#v
elseif t<0 then t=0 end

if u>=#g.Lines then
u=math.max(0,#g.Lines-1)
elseif u<0 then
u=0
end

t=t+g:TabAdjust(t,u)


g.CursorX=t
g.CursorY=u

local w=(t>=o)and(u>=p)and(t<=o+n)and(u<=p+m)
if w then
local x=(t-o)
local y=(u-p)
j.Position=UDim2.new(0,s+x*math.ceil(g.FontSize/2)-1,0,y*g.FontSize)
j.Size=UDim2.new(0,1,0,g.FontSize+2)
j.Visible=true
g:CursorAnim(true)
else
j.Visible=false
end
end

aw.MapNewLines=function(g)
local h={}
local i=1
local j=g.Text
local k=string.find
local l=1

local m=k(j,"\n",l,true)
while m do
h[i]=m
i=i+1
l=m+1
m=k(j,"\n",l,true)
end

g.NewLines=h
end

aw.PreHighlight=function(g)
tick()
local h=g.Text:gsub("\\\\","	")

local i=#h
local j={}
local k={}
local l={}
local m=string.find
local n=string.sub
g.ColoredLines={}

local function findAll(o,p,q,r)
local s=#j+1
local t=1
local u,v,w=m(o,p,t,r)
while u do
j[s]=u
k[u]=q
if w then
l[u]=w
end

s=s+1
t=v+1
u,v,w=m(o,p,t,r)
end
end
tick()
findAll(h,'"',1,true)
findAll(h,"'",2,true)
findAll(h,"%[(=*)%[",3)
findAll(h,"--",4,true)
table.sort(j)

local o=g.NewLines
local p=0


local q=0
local r=0
local s={}

for t=1,#j do
local u=j[t]
if u<=r then continue end

local v=u
local w=k[u]
if w==1 then
v=m(h,'"',u+1,true)
while v and n(h,v-1,v-1)=="\\"do
v=m(h,'"',v+1,true)
end
if not v then v=i end
elseif w==2 then
v=m(h,"'",u+1,true)
while v and n(h,v-1,v-1)=="\\"do
v=m(h,"'",v+1,true)
end
if not v then v=i end
elseif w==3 then
_,v=m(h,"]"..l[u].."]",u+1,true)
if not v then v=i end
elseif w==4 then
local x=k[u+2]

if x==3 then
_,v=m(h,"]"..l[u+2].."]",u+1,true)
if not v then v=i end
else
v=m(h,"\n",u+1,true)or i
end
end

while u>q do
p=p+1

q=o[p]or i+1
end
while true do
local x=s[p]
if not x then x={}s[p]=x end
x[u]={w,v}


if v>q then
p=p+1
q=o[p]or i+1
else
break
end
end

r=v

end
g.PreHighlights=s


end

aw.HighlightLine=function(g,h)
local i=g.ColoredLines[h]
if i then return i end

local j=string.sub
local k=string.find
local l=string.match
local m={}
local n=g.PreHighlights[h]or{}
local o=g.Lines[h]or""local p=
#o
local q=0
local r=0
local s
local t=false
local u=0
local v=g.NewLines[h-1]or 0

local w={}
for x,y in next,n do
local z=x-v
if z<1 then
r=y[1]
q=y[2]-v

else
w[z]={y[1],y[2]-v}
end
end

for x=1,#o do
if x<=q then m[x]=r continue end

local y=w[x]
if y then
r=y[1]
q=y[2]
m[x]=r
t=false
s=nil
u=0
else
local z=j(o,x,x)
if k(z,"[%a_]")then
local A=l(o,"[%a%d_]+",x)
local B=(aA[A]and 7)or(aB[A]and 8)

q=x+#A-1

if B~=7 then
if t then
local C=s and aB[s]
B=(C and type(C)=="table"and C[A]and 8)or 10
end

if B~=8 then local
C, D, E=k(o,"^%s*([%({\"'])",q+1)
if C then
B=(u>0 and E=="("and 16)or 9
u=0
end
end
else
B=az[A]or B
u=(A=="function"and 1 or 0)
end

s=A
t=false
if u>0 then u=1 end

if B then
r=B
m[x]=r
else
r=nil
end
elseif k(z,"%p")then
local A=(z==".")
local B=A and k(j(o,x+1,x+1),"%d")
m[x]=(B and 6 or 5)

if not B then
local C=A and l(o,"%.%.?%.?",x)
if C and#C>1 then
r=5
q=x+#C-1
t=false
s=nil
u=0
else
if A then
if t then
s=nil
else
t=true
end
else
t=false
s=nil
end

u=((A or z==":")and u==1 and 2)or 0
end
end
elseif k(z,"%d")then local
A, B=k(o,"%x+",x)
local C=j(o,B,B+1)
if(C=="e+"or C=="e-")and k(j(o,B+2,B+2),"%d")then
B=B+1
end
r=6
q=B
m[x]=6
t=false
s=nil
u=0
else
m[x]=r local
A, B=k(o,"%s+",x)
if B then
q=B
end
end
end
end

g.ColoredLines[h]=m
return m
end

aw.Refresh=function(g)
tick()

local h=g.Frame.Lines
local i=math.max(0,h.AbsoluteSize.X)
local j=math.max(0,h.AbsoluteSize.Y)
local k=math.ceil(j/g.FontSize)
local l=math.ceil(i/math.ceil(g.FontSize/2))
local m=string.gsub
local n=string.sub

local o,p=g.ViewX,g.ViewY

local q=""

for r=1,k do
local s=g.LineFrames[r]
if not s then
s=Instance.new"Frame"
s.Name="Line"
s.Position=UDim2.new(0,0,0,(r-1)*g.FontSize)
s.Size=UDim2.new(1,0,0,g.FontSize)
s.BorderSizePixel=0
s.BackgroundTransparency=1

local t=Instance.new"Frame"
t.Name="SelectionHighlight"
t.BorderSizePixel=0
t.BackgroundColor3=ad.Theme.Syntax.SelectionBack
t.Parent=s

local u=Instance.new"TextLabel"
u.Name="Label"
u.BackgroundTransparency=1
u.Font=Enum.Font.Code
u.TextSize=g.FontSize
u.Size=UDim2.new(1,0,0,g.FontSize)
u.RichText=true
u.TextXAlignment=Enum.TextXAlignment.Left
u.TextColor3=g.Colors.Text
u.ZIndex=2
u.Parent=s

s.Parent=h
g.LineFrames[r]=s
end

local t=p+r
local u=g.Lines[t]or""
local v=""
local w=g:HighlightLine(t)
local x=o+1

local y=g.RichTemplates
local z=y.Text
local A=y.Selection
local B=w[x]
local C=y[ax[B] ]or z


local D=g.SelectionRange
local E=D[1]
local F=D[2]
local G,H=E[2],E[1]
local I,J=F[2],F[1]local
K=t-1

if K>=E[2]and K<=F[2]then
local L=math.ceil(g.FontSize/2)
local M=(K==E[2]and E[1]or 0)-o
local N=(K==F[2]and F[1]-M-o or l+o)

s.SelectionHighlight.Position=UDim2.new(0,M*L,0,0)
s.SelectionHighlight.Size=UDim2.new(0,N*L,1,0)
s.SelectionHighlight.Visible=true
else
s.SelectionHighlight.Visible=false
end


local L=K>=G and K<=I and(K==G and o>=H or K~=G)and(K==I and o<J or K~=I)
if L then
B=-999
C=A
end

for M=2,l do
local N=o+M
local O=N-1
local P=w[N]


local Q=K>=G and K<=I and(K==G and O>=H or K~=G)and(K==I and O<J or K~=I)
if Q then
P=-999
end

if P~=B then
local R=(Q and A)or y[ax[P] ]or z

if R~=C then
local S=m(n(u,x,N-1),"['\"<>&]",aD)
v=v..(C~=z and(C..S.."</font>")or S)
x=N
C=R
end
B=P
end
end

local M=m(n(u,x,o+l),"['\"<>&]",aD)

if#M>0 then
v=v..(C~=z and(C..M.."</font>")or M)
end

if g.Lines[t]then
q=q..(t==g.CursorY and("<b>"..t.."</b>\n")or t.."\n")
end

s.Label.Text=v
end

for r=k+1,#g.LineFrames do
g.LineFrames[r]:Destroy()
g.LineFrames[r]=nil
end

g.Frame.LineNumbers.Text=q
g:UpdateCursor()


end

aw.UpdateView=function(g)
local h=tostring(#g.Lines)
local i=math.ceil(g.FontSize/2)
local j=#h*i+4*i

local k=g.Frame.Lines
local l=k.AbsoluteSize.X
local m=k.AbsoluteSize.Y
local n=math.ceil(m/g.FontSize)
local o=g.MaxTextCols*i
local p=g.ScrollV
local q=g.ScrollH

p.VisibleSpace=n
p.TotalSpace=#g.Lines+1
q.VisibleSpace=math.ceil(l/i)
q.TotalSpace=g.MaxTextCols+1

p.Gui.Visible=#g.Lines+1>n
q.Gui.Visible=o>l

local r=g.FrameOffsets
g.FrameOffsets=Vector2.new(p.Gui.Visible and-16 or 0,q.Gui.Visible and-16 or 0)
if r~=g.FrameOffsets then
g:UpdateView()
else
p:ScrollTo(g.ViewY,true)
q:ScrollTo(g.ViewX,true)

if p.Gui.Visible and q.Gui.Visible then
p.Gui.Size=UDim2.new(0,16,1,-16)
q.Gui.Size=UDim2.new(1,-16,0,16)
g.GuiElems.ScrollCorner.Visible=true
else
p.Gui.Size=UDim2.new(0,16,1,0)
q.Gui.Size=UDim2.new(1,0,0,16)
g.GuiElems.ScrollCorner.Visible=false
end

g.ViewY=p.Index
g.ViewX=q.Index
g.Frame.Lines.Position=UDim2.new(0,j,0,0)
g.Frame.Lines.Size=UDim2.new(1,-j+r.X,1,r.Y)
g.Frame.LineNumbers.Position=UDim2.new(0,i,0,0)
g.Frame.LineNumbers.Size=UDim2.new(0,#h*i,1,r.Y)
g.Frame.LineNumbers.TextSize=g.FontSize
end
end

aw.ProcessTextChange=function(g)
local h=0
local i=g.Lines

for j=1,#i do
local k=#i[j]
if k>h then
h=k
end
end

g.MaxTextCols=h
g:UpdateView()
g.Text=table.concat(g.Lines,"\n")
g:MapNewLines()
g:PreHighlight()
g:Refresh()

end

aw.ConvertText=function(g,h,i)
if i then
return h:gsub("\t",(" %s "):format(aE))
else
return h:gsub((" %s "):format(aE),"\t")
end
end

aw.GetText=function(g)
local h=table.concat(g.Lines,"\n")
return g:ConvertText(h,false)
end

aw.SetText=function(g,h)
h=g:ConvertText(h,true)
local i=g.Lines
table.clear(i)
local j=1

for k in h:gmatch"([^\n\r]*)[\n\r]?"do local l=
#k
i[j]=k
j=j+1
end

g:ProcessTextChange()
end

aw.MakeRichTemplates=function(g)
local h=math.floor
local i={}

for j,k in pairs(g.Colors)do
i[j]=('<font color="rgb(%s,%s,%s)">'):format(h(k.r*255),h(k.g*255),h(k.b*255))
end

g.RichTemplates=i
end

aw.ApplyTheme=function(g)
local h=ad.Theme.Syntax
g.Colors=h
g.Frame.LineNumbers.TextColor3=h.Text
g.Frame.BackgroundColor3=h.Background
end

local g={__index=aw}

local function new()
if not aC then initBuiltIn()end

local h=aq.ScrollBar.new()
local i=aq.ScrollBar.new(true)
i.Gui.Position=UDim2.new(0,0,1,-16)
local j=setmetatable({
FontSize=15,
ViewX=0,
ViewY=0,
Colors=ad.Theme.Syntax,
ColoredLines={},
Lines={""},
LineFrames={},
Editable=true,
Editing=false,
CursorX=0,
CursorY=0,
FloatCursorX=0,
Text="",
PreHighlights={},
SelectionRange={{-1,-1},{-1,-1}},
NewLines={},
FrameOffsets=Vector2.new(0,0),
MaxTextCols=0,
ScrollV=h,
ScrollH=i
},g)

h.WheelIncrement=3
i.Increment=2
i.WheelIncrement=7

h.Scrolled:Connect(function()
j.ViewY=h.Index
j:Refresh()
end)

i.Scrolled:Connect(function()
j.ViewX=i.Index
j:Refresh()
end)

makeFrame(j)
j:MakeRichTemplates()
j:ApplyTheme()
h:SetScrollFrame(j.Frame.Lines)
h.Gui.Parent=j.Frame
i.Gui.Parent=j.Frame

j:UpdateView()
j.Frame:GetPropertyChangedSignal"AbsoluteSize":Connect(function()
j:UpdateView()
j:Refresh()
end)

return j
end

return{new=new}
end)()

aq.Checkbox=(function()
local aw={}
local ax=Color3.fromRGB
local az=Vector2.new
local aA=UDim2.fromScale
local aB=UDim2.fromOffset
local aC=UDim.new
local aD=math.max
local aE=Instance.new
local aF=aE"Frame".TweenSize
local aG=TweenInfo.new
local aH=delay

local function ripple(aI,g)
local h=aE'Frame'
h.BackgroundColor3=g
h.BackgroundTransparency=0.75
h.BorderSizePixel=0
h.AnchorPoint=az(0.5,0.5)
h.Size=aB()
h.Position=aA(0.5,0.5)
h.Parent=aI
local i=aE'UICorner'
i.CornerRadius=aC(1)
i.Parent=h

local j=aI.AbsoluteSize
local k=aD(j.X,j.Y)*5/3

aF(h,aB(k,k),"Out","Quart",0.4)
am.TweenService:Create(h,aG(0.4,Enum.EasingStyle.Quart,Enum.EasingDirection.In),{BackgroundTransparency=1}):Play()

am.Debris:AddItem(h,0.4)
end

local function initGui(aI,g)
local h=g or ao{
{1,"ImageButton",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="Checkbox",Position=UDim2.new(0,3,0,3),Size=UDim2.new(0,16,0,16),}},
{2,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="ripples",Parent={1},Size=UDim2.new(1,0,1,0),}},
{3,"Frame",{BackgroundColor3=Color3.new(0.10196078568697,0.10196078568697,0.10196078568697),BorderSizePixel=0,Name="outline",Parent={1},Size=UDim2.new(0,16,0,16),}},
{4,"Frame",{BackgroundColor3=Color3.new(0.14117647707462,0.14117647707462,0.14117647707462),BorderSizePixel=0,Name="filler",Parent={3},Position=UDim2.new(0,1,0,1),Size=UDim2.new(0,14,0,14),}},
{5,"Frame",{BackgroundColor3=Color3.new(0.90196084976196,0.90196084976196,0.90196084976196),BorderSizePixel=0,Name="top",Parent={4},Size=UDim2.new(0,16,0,0),}},
{6,"Frame",{AnchorPoint=Vector2.new(0,1),BackgroundColor3=Color3.new(0.90196084976196,0.90196084976196,0.90196084976196),BorderSizePixel=0,Name="bottom",Parent={4},Position=UDim2.new(0,0,0,14),Size=UDim2.new(0,16,0,0),}},
{7,"Frame",{BackgroundColor3=Color3.new(0.90196084976196,0.90196084976196,0.90196084976196),BorderSizePixel=0,Name="left",Parent={4},Size=UDim2.new(0,0,0,16),}},
{8,"Frame",{AnchorPoint=Vector2.new(1,0),BackgroundColor3=Color3.new(0.90196084976196,0.90196084976196,0.90196084976196),BorderSizePixel=0,Name="right",Parent={4},Position=UDim2.new(0,14,0,0),Size=UDim2.new(0,0,0,16),}},
{9,"Frame",{AnchorPoint=Vector2.new(0.5,0.5),BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,ClipsDescendants=true,Name="checkmark",Parent={4},Position=UDim2.new(0.5,0,0.5,0),Size=UDim2.new(0,0,0,20),}},
{10,"ImageLabel",{AnchorPoint=Vector2.new(0.5,0.5),BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Image="rbxassetid://6234266378",Parent={9},Position=UDim2.new(0.5,0,0.5,0),ScaleType=3,Size=UDim2.new(0,15,0,11),}},
{11,"ImageLabel",{AnchorPoint=Vector2.new(0.5,0.5),BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://6401617475",ImageColor3=Color3.new(0.20784313976765,0.69803923368454,0.98431372642517),Name="checkmark2",Parent={4},Position=UDim2.new(0.5,0,0.5,0),Size=UDim2.new(0,12,0,12),Visible=false,}},
{12,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://6425281788",ImageTransparency=0.20000000298023,Name="middle",Parent={4},ScaleType=2,Size=UDim2.new(1,0,1,0),TileSize=UDim2.new(0,2,0,2),Visible=false,}},
{13,"UICorner",{CornerRadius=UDim.new(0,2),Parent={3},}},
}
local i=h.outline
local j=i.filler
local k=j.checkmark
local l=h.ripples


local m,n,o,p=j.top,j.bottom,j.left,j.right

aI.Gui=h
aI.GuiElems={
Top=m,
Bottom=n,
Left=o,
Right=p,
Outline=i,
Filler=j,
Checkmark=k,
Checkmark2=j.checkmark2,
Middle=j.middle
}

h.Activated:Connect(function()
if aq.CheckMouseInGui(h)then
if aI.Style==0 then
ripple(l,aI.Disabled and aI.Colors.Disabled or aI.Colors.Primary)
end

if not aI.Disabled then
aI:SetState(not aI.Toggled,true)
else
aI:Paint()
end

aI.OnInput:Fire()
end
end)



























aI:Paint()
end

aw.Collapse=function(aI,g)
local h=aI.GuiElems
if g then
aF(h.Top,aB(14,14),"In","Quart",0.26666666666666666,true)
aF(h.Bottom,aB(14,14),"In","Quart",0.26666666666666666,true)
aF(h.Left,aB(14,14),"In","Quart",0.26666666666666666,true)
aF(h.Right,aB(14,14),"In","Quart",0.26666666666666666,true)
else
h.Top.Size=aB(14,14)
h.Bottom.Size=aB(14,14)
h.Left.Size=aB(14,14)
h.Right.Size=aB(14,14)
end
end

aw.Expand=function(aI,g)
local h=aI.GuiElems
if g then
aF(h.Top,aB(14,0),"InOut","Quart",0.26666666666666666,true)
aF(h.Bottom,aB(14,0),"InOut","Quart",0.26666666666666666,true)
aF(h.Left,aB(0,14),"InOut","Quart",0.26666666666666666,true)
aF(h.Right,aB(0,14),"InOut","Quart",0.26666666666666666,true)
else
h.Top.Size=aB(14,0)
h.Bottom.Size=aB(14,0)
h.Left.Size=aB(0,14)
h.Right.Size=aB(0,14)
end
end

aw.Paint=function(aI)
local g=aI.GuiElems

if aI.Style==0 then
local h=aI.Disabled and aI.Colors.Disabled
g.Outline.BackgroundColor3=h or(aI.Toggled and aI.Colors.Primary)or aI.Colors.Secondary
local i=h or aI.Colors.Primary
g.Top.BackgroundColor3=i
g.Bottom.BackgroundColor3=i
g.Left.BackgroundColor3=i
g.Right.BackgroundColor3=i
else
g.Outline.BackgroundColor3=aI.Disabled and aI.Colors.Disabled or aI.Colors.Secondary
g.Filler.BackgroundColor3=aI.Disabled and aI.Colors.DisabledBackground or aI.Colors.Background
g.Checkmark2.ImageColor3=aI.Disabled and aI.Colors.DisabledCheck or aI.Colors.Primary
end
end

aw.SetState=function(aI,g,h)
aI.Toggled=g

if aI.OutlineColorTween then aI.OutlineColorTween:Cancel()end
local i=tick()
aI.LastSetStateTime=i

if aI.Toggled then
if aI.Style==0 then
if h then
aI.OutlineColorTween=am.TweenService:Create(aI.GuiElems.Outline,aG(0.26666666666666666,Enum.EasingStyle.Circular,Enum.EasingDirection.Out),{BackgroundColor3=aI.Colors.Primary})
aI.OutlineColorTween:Play()
aH(0.15,function()
if i~=aI.LastSetStateTime then return end
aI:Paint()
aF(aI.GuiElems.Checkmark,aB(14,20),"Out","Bounce",0.13333333333333333,true)
end)
else
aI.GuiElems.Outline.BackgroundColor3=aI.Colors.Primary
aI:Paint()
aI.GuiElems.Checkmark.Size=aB(14,20)
end
aI:Collapse(h)
else
aI:Paint()
aI.GuiElems.Checkmark2.Visible=true
aI.GuiElems.Middle.Visible=false
end
else
if aI.Style==0 then
if h then
aI.OutlineColorTween=am.TweenService:Create(aI.GuiElems.Outline,aG(0.26666666666666666,Enum.EasingStyle.Circular,Enum.EasingDirection.In),{BackgroundColor3=aI.Colors.Secondary})
aI.OutlineColorTween:Play()
aH(0.15,function()
if i~=aI.LastSetStateTime then return end
aI:Paint()
aF(aI.GuiElems.Checkmark,aB(0,20),"Out","Quad",6.666666666666666E-2,true)
end)
else
aI.GuiElems.Outline.BackgroundColor3=aI.Colors.Secondary
aI:Paint()
aI.GuiElems.Checkmark.Size=aB(0,20)
end
aI:Expand(h)
else
aI:Paint()
aI.GuiElems.Checkmark2.Visible=false
aI.GuiElems.Middle.Visible=aI.Toggled==nil
end
end
end

local aI={__index=aw}

local function new(g)
local h=setmetatable({
Toggled=false,
Disabled=false,
OnInput=aq.Signal.new(),
Style=g or 0,
Colors={
Background=ax(36,36,36),
Primary=ax(49,176,230),
Secondary=ax(25,25,25),
Disabled=ax(64,64,64),
DisabledBackground=ax(52,52,52),
DisabledCheck=ax(80,80,80)
}
},aI)
initGui(h)
return h
end

local function fromFrame(g)
local h=setmetatable({
Toggled=false,
Disabled=false,
Colors={
Background=ax(36,36,36),
Primary=ax(49,176,230),
Secondary=ax(25,25,25),
Disabled=ax(64,64,64),
DisabledBackground=ax(52,52,52)
}
},aI)
initGui(h,g)
return h
end

return{new=new,fromFrame}
end)()

aq.BrickColorPicker=(function()
local aw={}
local ax=0
local az=am.Players.LocalPlayer:GetMouse()
local aA=4
local aB=27
local aC=1
local aD=8

local aF={
Color3.fromRGB(17,17,17),
Color3.fromRGB(99,95,98),
Color3.fromRGB(163,162,165),
Color3.fromRGB(205,205,205),
Color3.fromRGB(223,223,222),
Color3.fromRGB(237,234,234),
Color3.fromRGB(27,42,53),
Color3.fromRGB(91,93,105),
Color3.fromRGB(159,161,172),
Color3.fromRGB(202,203,209),
Color3.fromRGB(231,231,236),
Color3.fromRGB(248,248,248)
}

local function isMouseInHexagon(aG,aH)
local aI=aH.X-aG.AbsolutePosition.X
local g=aH.Y-aG.AbsolutePosition.Y
if aI>=aA and aI<aA+aB then
aI=aI-4
local h=(13-math.min(aI,26-aI))/13
if g>=aC+aD*h and g<aG.AbsoluteSize.Y-aC-aD*h then
return true
end
end
return false
end

local function hexInput(aG,aH,aI)
aH.InputBegan:Connect(function(g)
if g.UserInputType==Enum.UserInputType.MouseButton1 or g.UserInputType==Enum.UserInputType.Touch then
if isMouseInHexagon(aH,g.Position)then
aG.OnSelect:Fire(aI)
aG:Close()
end
end
end)

aH.InputChanged:Connect(function(g)
if g.UserInputType==Enum.UserInputType.MouseMovement or g.UserInputType==Enum.UserInputType.Touch then
if isMouseInHexagon(aH,g.Position)then
aG.OnPreview:Fire(aI)
end
end
end)
end

local function createGui(aG)
local aH=ao{
{1,"ScreenGui",{Name="BrickColor",}},
{2,"Frame",{Active=true,BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderColor3=Color3.new(0.1294117718935,0.1294117718935,0.1294117718935),Parent={1},Position=UDim2.new(0.40000000596046,0,0.40000000596046,0),Size=UDim2.new(0,337,0,380),}},
{3,"TextButton",{BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),BorderSizePixel=0,Font=3,Name="MoreColors",Parent={2},Position=UDim2.new(0,5,1,-30),Size=UDim2.new(1,-10,0,25),Text="More Colors",TextColor3=Color3.new(1,1,1),TextSize=14,}},
{4,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Image="rbxassetid://1281023007",ImageColor3=Color3.new(0.33333334326744,0.33333334326744,0.49803924560547),Name="Hex",Parent={2},Size=UDim2.new(0,35,0,35),Visible=false,}},
}
local aI=aH.Frame
local g=aI.Hex

for h=1,13 do
local i=math.min(h,14-h)+6
for j=1,i do
local k=BrickColor.palette(ax).Color
local l=g:Clone()
l.Position=UDim2.new(0,(j-1)*25-(i-7)*13+78+1,0,(h-1)*23+4)
l.ImageColor3=k
l.Visible=true
hexInput(aG,l,k)
l.Parent=aI
ax=ax+1
end
end

for h=1,12 do
local i=aF[h]
local j=g:Clone()
j.Position=UDim2.new(0,(h-1)*25-65+78+3,0,308)
j.ImageColor3=i
j.Visible=true
hexInput(aG,j,i)
j.Parent=aI
ax=ax+1
end

aI.MoreColors.MouseButton1Click:Connect(function()
aG.OnMoreColors:Fire()
aG:Close()
end)

aG.Gui=aH
end

aw.SetMoreColorsVisible=function(aG,aH)
local aI=aG.Gui.Frame
aI.Size=UDim2.new(0,337,0,380-(not aH and 33 or 0))
aI.MoreColors.Visible=aH
end

aw.Show=function(aG,aH,aI,g)
aG.PrevColor=g or aG.PrevColor

local h=false

local i,j=aH or az.X,aI or az.Y
local k,l=az.ViewSizeX,az.ViewSizeY
aq.ShowGui(aG.Gui)
local m,n=aG.Gui.Frame.AbsoluteSize.X,aG.Gui.Frame.AbsoluteSize.Y

if i+m>k then i=aG.ReverseX and i-m or k-m end
if j+n>l then h=true end

local o=false
if aG.CloseEvent then aG.CloseEvent:Disconnect()end

aG.CloseEvent=am.UserInputService.InputBegan:Connect(function(p)
if not o or(p.UserInputType~=Enum.UserInputType.MouseButton1 and p.UserInputType~=Enum.UserInputType.Touch)then
return
end

if not aq.CheckMouseInGui(aG.Gui.Frame)then
aG.CloseEvent:Disconnect()
aG:Close()
end
end)


if h then
local p=j-n-(aG.ReverseYOffset or 0)
j=p>=0 and p or 0
end

aG.Gui.Frame.Position=UDim2.new(0,i,0,j)

aq.FastWait()
o=true
end

aw.Close=function(aG)
aG.Gui.Parent=nil
aG.OnCancel:Fire()
end

local aG={__index=aw}

local function new()
local aH=setmetatable({
OnPreview=aq.Signal.new(),
OnSelect=aq.Signal.new(),
OnCancel=aq.Signal.new(),
OnMoreColors=aq.Signal.new(),
PrevColor=Color3.new(0,0,0)
},aG)
createGui(aH)
return aH
end

return{new=new}
end)()

aq.ColorPicker=(function()


local function new()
local aw=setmetatable({},{})

aw.OnSelect=aq.Signal.new()
aw.OnCancel=aq.Signal.new()
aw.OnPreview=aq.Signal.new()

local ax=ao{
{1,"Frame",{BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderSizePixel=0,ClipsDescendants=true,Name="Content",Position=UDim2.new(0,0,0,20),Size=UDim2.new(1,0,1,-20),}},
{2,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Name="BasicColors",Parent={1},Position=UDim2.new(0,5,0,5),Size=UDim2.new(0,180,0,200),}},
{3,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={2},Position=UDim2.new(0,0,0,-5),Size=UDim2.new(1,0,0,26),Text="Basic Colors",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
{4,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Blue",Parent={1},Position=UDim2.new(1,-63,0,255),Size=UDim2.new(0,52,0,16),}},
{5,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),Font=3,Name="Input",Parent={4},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,50,0,16),Text="0",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
{6,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="ArrowFrame",Parent={5},Position=UDim2.new(1,-16,0,0),Size=UDim2.new(0,16,1,0),}},
{7,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Up",Parent={6},Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
{8,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={7},Size=UDim2.new(0,16,0,8),}},
{9,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={8},Position=UDim2.new(0,8,0,3),Size=UDim2.new(0,1,0,1),}},
{10,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={8},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
{11,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={8},Position=UDim2.new(0,6,0,5),Size=UDim2.new(0,5,0,1),}},
{12,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Down",Parent={6},Position=UDim2.new(0,0,0,8),Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
{13,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={12},Size=UDim2.new(0,16,0,8),}},
{14,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={13},Position=UDim2.new(0,8,0,5),Size=UDim2.new(0,1,0,1),}},
{15,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={13},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
{16,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={13},Position=UDim2.new(0,6,0,3),Size=UDim2.new(0,5,0,1),}},
{17,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={4},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Blue:",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
{18,"Frame",{BackgroundColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),BorderSizePixel=0,ClipsDescendants=true,Name="ColorSpaceFrame",Parent={1},Position=UDim2.new(1,-261,0,4),Size=UDim2.new(0,222,0,202),}},
{19,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),BorderSizePixel=0,Image="rbxassetid://1072518406",Name="ColorSpace",Parent={18},Position=UDim2.new(0,1,0,1),Size=UDim2.new(0,220,0,200),}},
{20,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="Scope",Parent={19},Position=UDim2.new(0,210,0,190),Size=UDim2.new(0,20,0,20),}},
{21,"Frame",{BackgroundColor3=Color3.new(0,0,0),BorderSizePixel=0,Name="Line",Parent={20},Position=UDim2.new(0,9,0,0),Size=UDim2.new(0,2,0,20),}},
{22,"Frame",{BackgroundColor3=Color3.new(0,0,0),BorderSizePixel=0,Name="Line",Parent={20},Position=UDim2.new(0,0,0,9),Size=UDim2.new(0,20,0,2),}},
{23,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Name="CustomColors",Parent={1},Position=UDim2.new(0,5,0,210),Size=UDim2.new(0,180,0,90),}},
{24,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={23},Size=UDim2.new(1,0,0,20),Text="Custom Colors (RC = Set)",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
{25,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Green",Parent={1},Position=UDim2.new(1,-63,0,233),Size=UDim2.new(0,52,0,16),}},
{26,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),Font=3,Name="Input",Parent={25},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,50,0,16),Text="0",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
{27,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="ArrowFrame",Parent={26},Position=UDim2.new(1,-16,0,0),Size=UDim2.new(0,16,1,0),}},
{28,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Up",Parent={27},Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
{29,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={28},Size=UDim2.new(0,16,0,8),}},
{30,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={29},Position=UDim2.new(0,8,0,3),Size=UDim2.new(0,1,0,1),}},
{31,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={29},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
{32,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={29},Position=UDim2.new(0,6,0,5),Size=UDim2.new(0,5,0,1),}},
{33,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Down",Parent={27},Position=UDim2.new(0,0,0,8),Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
{34,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={33},Size=UDim2.new(0,16,0,8),}},
{35,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={34},Position=UDim2.new(0,8,0,5),Size=UDim2.new(0,1,0,1),}},
{36,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={34},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
{37,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={34},Position=UDim2.new(0,6,0,3),Size=UDim2.new(0,5,0,1),}},
{38,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={25},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Green:",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
{39,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Hue",Parent={1},Position=UDim2.new(1,-180,0,211),Size=UDim2.new(0,52,0,16),}},
{40,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),Font=3,Name="Input",Parent={39},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,50,0,16),Text="0",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
{41,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="ArrowFrame",Parent={40},Position=UDim2.new(1,-16,0,0),Size=UDim2.new(0,16,1,0),}},
{42,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Up",Parent={41},Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
{43,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={42},Size=UDim2.new(0,16,0,8),}},
{44,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={43},Position=UDim2.new(0,8,0,3),Size=UDim2.new(0,1,0,1),}},
{45,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={43},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
{46,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={43},Position=UDim2.new(0,6,0,5),Size=UDim2.new(0,5,0,1),}},
{47,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Down",Parent={41},Position=UDim2.new(0,0,0,8),Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
{48,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={47},Size=UDim2.new(0,16,0,8),}},
{49,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={48},Position=UDim2.new(0,8,0,5),Size=UDim2.new(0,1,0,1),}},
{50,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={48},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
{51,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={48},Position=UDim2.new(0,6,0,3),Size=UDim2.new(0,5,0,1),}},
{52,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={39},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Hue:",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
{53,"Frame",{BackgroundColor3=Color3.new(1,1,1),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Name="Preview",Parent={1},Position=UDim2.new(1,-260,0,211),Size=UDim2.new(0,35,1,-245),}},
{54,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Red",Parent={1},Position=UDim2.new(1,-63,0,211),Size=UDim2.new(0,52,0,16),}},
{55,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),Font=3,Name="Input",Parent={54},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,50,0,16),Text="0",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
{56,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="ArrowFrame",Parent={55},Position=UDim2.new(1,-16,0,0),Size=UDim2.new(0,16,1,0),}},
{57,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Up",Parent={56},Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
{58,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={57},Size=UDim2.new(0,16,0,8),}},
{59,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={58},Position=UDim2.new(0,8,0,3),Size=UDim2.new(0,1,0,1),}},
{60,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={58},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
{61,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={58},Position=UDim2.new(0,6,0,5),Size=UDim2.new(0,5,0,1),}},
{62,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Down",Parent={56},Position=UDim2.new(0,0,0,8),Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
{63,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={62},Size=UDim2.new(0,16,0,8),}},
{64,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={63},Position=UDim2.new(0,8,0,5),Size=UDim2.new(0,1,0,1),}},
{65,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={63},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
{66,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={63},Position=UDim2.new(0,6,0,3),Size=UDim2.new(0,5,0,1),}},
{67,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={54},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Red:",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
{68,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Sat",Parent={1},Position=UDim2.new(1,-180,0,233),Size=UDim2.new(0,52,0,16),}},
{69,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),Font=3,Name="Input",Parent={68},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,50,0,16),Text="0",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
{70,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="ArrowFrame",Parent={69},Position=UDim2.new(1,-16,0,0),Size=UDim2.new(0,16,1,0),}},
{71,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Up",Parent={70},Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
{72,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={71},Size=UDim2.new(0,16,0,8),}},
{73,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={72},Position=UDim2.new(0,8,0,3),Size=UDim2.new(0,1,0,1),}},
{74,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={72},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
{75,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={72},Position=UDim2.new(0,6,0,5),Size=UDim2.new(0,5,0,1),}},
{76,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Down",Parent={70},Position=UDim2.new(0,0,0,8),Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
{77,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={76},Size=UDim2.new(0,16,0,8),}},
{78,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={77},Position=UDim2.new(0,8,0,5),Size=UDim2.new(0,1,0,1),}},
{79,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={77},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
{80,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={77},Position=UDim2.new(0,6,0,3),Size=UDim2.new(0,5,0,1),}},
{81,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={68},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Sat:",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
{82,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Val",Parent={1},Position=UDim2.new(1,-180,0,255),Size=UDim2.new(0,52,0,16),}},
{83,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),Font=3,Name="Input",Parent={82},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,50,0,16),Text="255",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
{84,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="ArrowFrame",Parent={83},Position=UDim2.new(1,-16,0,0),Size=UDim2.new(0,16,1,0),}},
{85,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Up",Parent={84},Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
{86,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={85},Size=UDim2.new(0,16,0,8),}},
{87,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={86},Position=UDim2.new(0,8,0,3),Size=UDim2.new(0,1,0,1),}},
{88,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={86},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
{89,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={86},Position=UDim2.new(0,6,0,5),Size=UDim2.new(0,5,0,1),}},
{90,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Down",Parent={84},Position=UDim2.new(0,0,0,8),Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
{91,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={90},Size=UDim2.new(0,16,0,8),}},
{92,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={91},Position=UDim2.new(0,8,0,5),Size=UDim2.new(0,1,0,1),}},
{93,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={91},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
{94,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={91},Position=UDim2.new(0,6,0,3),Size=UDim2.new(0,5,0,1),}},
{95,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={82},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Val:",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
{96,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Font=3,Name="Cancel",Parent={1},Position=UDim2.new(1,-105,1,-28),Size=UDim2.new(0,100,0,25),Text="Cancel",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,}},
{97,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Font=3,Name="Ok",Parent={1},Position=UDim2.new(1,-210,1,-28),Size=UDim2.new(0,100,0,25),Text="OK",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,}},
{98,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Image="rbxassetid://1072518502",Name="ColorStrip",Parent={1},Position=UDim2.new(1,-30,0,5),Size=UDim2.new(0,13,0,200),}},
{99,"Frame",{BackgroundColor3=Color3.new(0.3137255012989,0.3137255012989,0.3137255012989),BackgroundTransparency=1,BorderSizePixel=0,Name="ArrowFrame",Parent={1},Position=UDim2.new(1,-16,0,1),Size=UDim2.new(0,5,0,208),}},
{100,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={99},Position=UDim2.new(0,-2,0,-4),Size=UDim2.new(0,8,0,16),}},
{101,"Frame",{BackgroundColor3=Color3.new(0,0,0),BorderSizePixel=0,Parent={100},Position=UDim2.new(0,2,0,8),Size=UDim2.new(0,1,0,1),}},
{102,"Frame",{BackgroundColor3=Color3.new(0,0,0),BorderSizePixel=0,Parent={100},Position=UDim2.new(0,3,0,7),Size=UDim2.new(0,1,0,3),}},
{103,"Frame",{BackgroundColor3=Color3.new(0,0,0),BorderSizePixel=0,Parent={100},Position=UDim2.new(0,4,0,6),Size=UDim2.new(0,1,0,5),}},
{104,"Frame",{BackgroundColor3=Color3.new(0,0,0),BorderSizePixel=0,Parent={100},Position=UDim2.new(0,5,0,5),Size=UDim2.new(0,1,0,7),}},
{105,"Frame",{BackgroundColor3=Color3.new(0,0,0),BorderSizePixel=0,Parent={100},Position=UDim2.new(0,6,0,4),Size=UDim2.new(0,1,0,9),}},
}
local az=aq.Window.new()
az.Resizable=false
az.Alignable=false
az:SetTitle"Color Picker"
az:Resize(450,330)
for aA,aB in pairs(ax:GetChildren())do
aB.Parent=az.GuiElems.Content
end
aw.Window=az
aw.Gui=az.Gui
local aA=az.Gui.Main
local aB=aA.TopBar
local aC=aA.Content
local aD=aC.ColorSpaceFrame.ColorSpace
local aF=aC.ColorStrip
local aG=aC.Preview
local aH=aC.BasicColors
local aI=aC.CustomColors
local g=aC.Ok
local h=aC.Cancel local i=
aB.Close

local j=aD.Scope
local k=aC.ArrowFrame.Arrow

local l=aC.Hue.Input
local m=aC.Sat.Input
local n=aC.Val.Input

local o=aC.Red.Input
local p=aC.Green.Input
local q=aC.Blue.Input

local r=am.UserInputService
local s=am.Players.LocalPlayer:GetMouse()

local t,u,v=0,0,1
local w,x,y=1,1,1
local z=Color3.new(0,0,0)

local A={Color3.new(0,0,0),Color3.new(0.66666668653488,0,0),Color3.new(0,0.33333334326744,0),Color3.new(0.66666668653488,0.33333334326744,0),Color3.new(0,0.66666668653488,0),Color3.new(0.66666668653488,0.66666668653488,0),Color3.new(0,1,0),Color3.new(0.66666668653488,1,0),Color3.new(0,0,0.49803924560547),Color3.new(0.66666668653488,0,0.49803924560547),Color3.new(0,0.33333334326744,0.49803924560547),Color3.new(0.66666668653488,0.33333334326744,0.49803924560547),Color3.new(0,0.66666668653488,0.49803924560547),Color3.new(0.66666668653488,0.66666668653488,0.49803924560547),Color3.new(0,1,0.49803924560547),Color3.new(0.66666668653488,1,0.49803924560547),Color3.new(0,0,1),Color3.new(0.66666668653488,0,1),Color3.new(0,0.33333334326744,1),Color3.new(0.66666668653488,0.33333334326744,1),Color3.new(0,0.66666668653488,1),Color3.new(0.66666668653488,0.66666668653488,1),Color3.new(0,1,1),Color3.new(0.66666668653488,1,1),Color3.new(0.33333334326744,0,0),Color3.new(1,0,0),Color3.new(0.33333334326744,0.33333334326744,0),Color3.new(1,0.33333334326744,0),Color3.new(0.33333334326744,0.66666668653488,0),Color3.new(1,0.66666668653488,0),Color3.new(0.33333334326744,1,0),Color3.new(1,1,0),Color3.new(0.33333334326744,0,0.49803924560547),Color3.new(1,0,0.49803924560547),Color3.new(0.33333334326744,0.33333334326744,0.49803924560547),Color3.new(1,0.33333334326744,0.49803924560547),Color3.new(0.33333334326744,0.66666668653488,0.49803924560547),Color3.new(1,0.66666668653488,0.49803924560547),Color3.new(0.33333334326744,1,0.49803924560547),Color3.new(1,1,0.49803924560547),Color3.new(0.33333334326744,0,1),Color3.new(1,0,1),Color3.new(0.33333334326744,0.33333334326744,1),Color3.new(1,0.33333334326744,1),Color3.new(0.33333334326744,0.66666668653488,1),Color3.new(1,0.66666668653488,1),Color3.new(0.33333334326744,1,1),Color3.new(1,1,1)}
local B={}

local function updateColor(C)
local D,E,F=219-t*219,199-u*199,199-v*199
Color3.fromHSV(t,u,v)

if C==2 or not C then
l.Text=tostring(math.ceil(359*t))
m.Text=tostring(math.ceil(255*u))
n.Text=tostring(math.floor(255*v))
end
if C==1 or not C then
o.Text=tostring(math.floor(255*w))
p.Text=tostring(math.floor(255*x))
q.Text=tostring(math.floor(255*y))
end

z=Color3.new(w,x,y)
j.Position=UDim2.new(0,(D-9),0,(E-9))
aF.ImageColor3=Color3.fromHSV(t,u,1)
k.Position=UDim2.new(0,-2,0,(F-4))
aG.BackgroundColor3=z

aw.Color=z
aw.OnPreview:Fire(z)
end

local function handleInputBegan(C,D)
if C.UserInputType==Enum.UserInputType.MouseButton1 or C.UserInputType==Enum.UserInputType.Touch then
while r:IsMouseButtonPressed(Enum.UserInputType.MouseButton1)do
D()task.wait()
end
end
end

local function colorSpaceInput()
local C=s.X-aD.AbsolutePosition.X
local D=s.Y-aD.AbsolutePosition.Y

if C<0 then C=0 elseif C>219 then C=219 end
if D<0 then D=0 elseif D>199 then D=199 end

t=(219-C)/219
u=(199-D)/199

local E=Color3.fromHSV(t,u,v)
w,x,y=E.R,E.G,E.B
updateColor()
end

local function colorStripInput()
local C=s.Y-aF.AbsolutePosition.Y

if C<0 then C=0 elseif C>199 then C=199 end

v=(199-C)/199

local D=Color3.fromHSV(t,u,v)
w,x,y=D.R,D.G,D.B
updateColor()
end

aD.InputBegan:Connect(function(C)handleInputBegan(C,colorSpaceInput)end)
aF.InputBegan:Connect(function(C)handleInputBegan(C,colorStripInput)end)

local function hookButtons(C,D)
C.ArrowFrame.Up.InputBegan:Connect(function(E)
if E.UserInputType==Enum.UserInputType.MouseButton1 or E.UserInputType==Enum.UserInputType.Touch then

local F=tick()
local G=true
local H=tonumber(C.Text)

if not H then return end

releaseEvent=r.InputEnded:Connect(function(I)
if I.UserInputType==Enum.UserInputType.MouseButton1 or I.UserInputType==Enum.UserInputType.Touch then
releaseEvent:Disconnect()
G=false
end
end)

H=H+1
D(H)
while G do
if tick()-F>0.3 then
H=H+1
D(H)
F=tick()
end
task.wait(0.1)
end
end
end)

C.ArrowFrame.Down.InputBegan:Connect(function(E)
if E.UserInputType==Enum.UserInputType.MouseButton1 or E.UserInputType==Enum.UserInputType.Touch then

local F=tick()
local G=true
local H=tonumber(C.Text)

if not H then return end

releaseEvent=r.InputEnded:Connect(function(I)
if I.UserInputType==Enum.UserInputType.MouseButton1 or I.UserInputType==Enum.UserInputType.Touch then
releaseEvent:Disconnect()
G=false
end
end)

H=H-1
D(H)
while G do
if tick()-F>0.3 then
H=H-1
D(H)
F=tick()
end
task.wait(0.1)
end
end
end)
end













local function updateHue(C)
local D=tonumber(C)
if D then
t=math.clamp(math.floor(D),0,359)/359
local E=Color3.fromHSV(t,u,v)
w,x,y=E.r,E.g,E.b

l.Text=tostring(t*359)
updateColor(1)
end
end
l.FocusLost:Connect(function()updateHue(l.Text)end)hookButtons(l,l)

local function updateSat(C)
local D=tonumber(C)
if D then
u=math.clamp(math.floor(D),0,255)/255
local E=Color3.fromHSV(t,u,v)
w,x,y=E.r,E.g,E.b
m.Text=tostring(u*255)
updateColor(1)
end
end
m.FocusLost:Connect(function()updateSat(m.Text)end)hookButtons(m,updateSat)

local function updateVal(C)
local D=tonumber(C)
if D then
v=math.clamp(math.floor(D),0,255)/255
local E=Color3.fromHSV(t,u,v)
w,x,y=E.r,E.g,E.b
n.Text=tostring(v*255)
updateColor(1)
end
end
n.FocusLost:Connect(function()updateVal(n.Text)end)hookButtons(n,updateVal)

local function updateRed(C)
local D=tonumber(C)
if D then
w=math.clamp(math.floor(D),0,255)/255
local E=Color3.new(w,x,y)
t,u,v=Color3.toHSV(E)
o.Text=tostring(w*255)
updateColor(2)
end
end
o.FocusLost:Connect(function()updateRed(o.Text)end)hookButtons(o,updateRed)

local function updateGreen(C)
local D=tonumber(C)
if D then
x=math.clamp(math.floor(D),0,255)/255
local E=Color3.new(w,x,y)
t,u,v=Color3.toHSV(E)
p.Text=tostring(x*255)
updateColor(2)
end
end
p.FocusLost:Connect(function()updateGreen(p.Text)end)hookButtons(p,updateGreen)

local function updateBlue(C)
local D=tonumber(C)
if D then
y=math.clamp(math.floor(D),0,255)/255
local E=Color3.new(w,x,y)
t,u,v=Color3.toHSV(E)
q.Text=tostring(y*255)
updateColor(2)
end
end
q.FocusLost:Connect(function()updateBlue(q.Text)end)hookButtons(q,updateBlue)

local C=Instance.new"TextButton"
C.Name="Choice"
C.Size=UDim2.new(0,25,0,18)
C.BorderColor3=Color3.fromRGB(55,55,55)
C.Text=""
C.AutoButtonColor=false

local D=0
local E=0
for F,G in pairs(A)do
local H=C:Clone()
H.BackgroundColor3=G
H.Position=UDim2.new(0,1+30*E,0,21+23*D)

H.MouseButton1Click:Connect(function()
w,x,y=G.r,G.g,G.b
local I=Color3.new(w,x,y)
t,u,v=Color3.toHSV(I)
updateColor()
end)

H.Parent=aH
E=E+1
if E==6 then D=D+1 E=0 end
end

D=0
E=0
for F=1,12 do
local G=B[F]or Color3.new(0,0,0)
local H=C:Clone()
H.BackgroundColor3=G
H.Position=UDim2.new(0,1+30*E,0,20+23*D)

H.MouseButton1Click:Connect(function()
local I=B[F]or Color3.new(0,0,0)
w,x,y=I.r,I.g,I.b
t,u,v=Color3.toHSV(I)
updateColor()
end)

H.MouseButton2Click:Connect(function()
B[F]=z
H.BackgroundColor3=z
end)

H.Parent=aI
E=E+1
if E==6 then D=D+1 E=0 end
end

g.MouseButton1Click:Connect(function()aw.OnSelect:Fire(z)az:Close()end)
g.InputBegan:Connect(function(F)if F.UserInputType==Enum.UserInputType.MouseMovement or F.UserInputType==Enum.UserInputType.Touch then g.BackgroundTransparency=0.4 end end)
g.InputEnded:Connect(function(F)if F.UserInputType==Enum.UserInputType.MouseMovement or F.UserInputType==Enum.UserInputType.Touch then g.BackgroundTransparency=0 end end)


h.MouseButton1Click:Connect(function()aw.OnCancel:Fire()az:Close()end)
h.InputBegan:Connect(function(F)if F.UserInputType==Enum.UserInputType.MouseMovement or F.UserInputType==Enum.UserInputType.Touch then h.BackgroundTransparency=0.4 end end)
h.InputEnded:Connect(function(F)if F.UserInputType==Enum.UserInputType.MouseMovement or F.UserInputType==Enum.UserInputType.Touch then h.BackgroundTransparency=0 end end)

updateColor()

aw.SetColor=function(F,G)
w,x,y=G.r,G.g,G.b
t,u,v=Color3.toHSV(G)
updateColor()
end

aw.Show=function(F)
F.Window:Show()
end

return aw
end

return{new=new}
end)()

aq.NumberSequenceEditor=(function()
local function new()
local aw=setmetatable({},{})
aw.OnSelect=aq.Signal.new()
aw.OnCancel=aq.Signal.new()
aw.OnPreview=aq.Signal.new()

local ax=ao{
{1,"Frame",{BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderSizePixel=0,ClipsDescendants=true,Name="Content",Position=UDim2.new(0,0,0,20),Size=UDim2.new(1,0,1,-20),}},
{2,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Time",Parent={1},Position=UDim2.new(0,40,0,210),Size=UDim2.new(0,60,0,20),}},
{3,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),ClipsDescendants=true,Font=3,Name="Input",Parent={2},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,58,0,20),Text="0",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
{4,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={2},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Time",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
{5,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Font=3,Name="Close",Parent={1},Position=UDim2.new(1,-90,0,210),Size=UDim2.new(0,80,0,20),Text="Close",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,}},
{6,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Font=3,Name="Reset",Parent={1},Position=UDim2.new(1,-180,0,210),Size=UDim2.new(0,80,0,20),Text="Reset",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,}},
{7,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Font=3,Name="Delete",Parent={1},Position=UDim2.new(0,380,0,210),Size=UDim2.new(0,80,0,20),Text="Delete",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,}},
{8,"Frame",{BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Name="NumberLineOutlines",Parent={1},Position=UDim2.new(0,10,0,20),Size=UDim2.new(1,-20,0,170),}},
{9,"Frame",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),Name="NumberLine",Parent={1},Position=UDim2.new(0,10,0,20),Size=UDim2.new(1,-20,0,170),}},
{10,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Value",Parent={1},Position=UDim2.new(0,170,0,210),Size=UDim2.new(0,60,0,20),}},
{11,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={10},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Value",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
{12,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),ClipsDescendants=true,Font=3,Name="Input",Parent={10},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,58,0,20),Text="0",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
{13,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Envelope",Parent={1},Position=UDim2.new(0,300,0,210),Size=UDim2.new(0,60,0,20),}},
{14,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),ClipsDescendants=true,Font=3,Name="Input",Parent={13},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,58,0,20),Text="0",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
{15,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={13},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Envelope",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
}
local az=aq.Window.new()
az.Resizable=false
az:Resize(680,265)
az:SetTitle"NumberSequence Editor"
aw.Window=az
aw.Gui=az.Gui
for aA,aB in pairs(ax:GetChildren())do
aB.Parent=az.GuiElems.Content
end
local aA=az.Gui
local aB=aA.Main
local aC=aB.TopBar
local aD=aB.Content
local aF=aD.NumberLine
local aG=aD.NumberLineOutlines
local aH=aD.Time.Input
local aI=aD.Value.Input
local g=aD.Envelope.Input
local h=aD.Delete
local i=aD.Reset
local j=aD.Close local k=
aC.Close

local l={{1,0,3},{8,0.05,1},{5,0.6,2},{4,0.7,4},{6,1,4}}
local m={}
local n={}
local o=l[1]
local p=l[#l]
local q
local r
local s

local t=am.UserInputService
local u=am.Players.LocalPlayer:GetMouse()

for v=2,10 do
local w=Instance.new"Frame"
w.BackgroundTransparency=0.5
w.BackgroundColor3=Color3.new(0.3764705882352941,0.3764705882352941,0.3764705882352941)
w.BorderSizePixel=0
w.Size=UDim2.new(0,1,1,0)
w.Position=UDim2.new((v-1)/(10),0,0,0)
w.Parent=aG
end

for v=2,4 do
local w=Instance.new"Frame"
w.BackgroundTransparency=0.5
w.BackgroundColor3=Color3.new(0.3764705882352941,0.3764705882352941,0.3764705882352941)
w.BorderSizePixel=0
w.Size=UDim2.new(1,0,0,1)
w.Position=UDim2.new(0,0,(v-1)/(4),0)
w.Parent=aG
end

local v=Instance.new"Frame"
v.BackgroundColor3=Color3.new(0,0,0)
v.BorderSizePixel=0
v.Size=UDim2.new(0,1,0,1)

local w=Instance.new"Frame"
w.BackgroundColor3=Color3.new(0,0,0)
w.BorderSizePixel=0
w.Size=UDim2.new(0,1,0,0)

for x=1,aF.AbsoluteSize.X do
local y=w:Clone()
n[x]=y
y.Name="E"..tostring(x)
y.BackgroundTransparency=0.5
y.BackgroundColor3=Color3.new(0.7803921568627451,0.17254901960784313,0.10980392156862745)
y.Position=UDim2.new(0,x-1,0,0)
y.Parent=aF
end

for x=1,aF.AbsoluteSize.X do
local y=w:Clone()
m[x]=y
y.Name=tostring(x)
y.Position=UDim2.new(0,x-1,0,0)
y.Parent=aF
end

local x=Instance.new"Frame"
x.BackgroundTransparency=1
x.BackgroundColor3=Color3.new(0,0,0)
x.BorderSizePixel=0
x.Size=UDim2.new(0,7,0,20)
x.Visible=false
x.ZIndex=2
local y=Instance.new("Frame",x)
y.Name="Line"
y.BackgroundColor3=Color3.new(0,0,0)
y.BorderSizePixel=0
y.Position=UDim2.new(0,3,0,0)
y.Size=UDim2.new(0,1,0,20)
y.ZIndex=2

local z,A=x:Clone(),x:Clone()
z.Parent=aF
A.Parent=aF

local function buildSequence()
local B={}
for C,D in pairs(l)do
table.insert(B,NumberSequenceKeypoint.new(D[2],D[1],D[3]))
end
aw.Sequence=NumberSequence.new(B)
aw.OnSelect:Fire(aw.Sequence)
end

local function round(B,C)
local D=10^C
return math.floor(B*D+0.5)/D
end

local function updateInputs(B)
if B then
r=B
local C,D,E=B[2],B[1],B[3]
aH.Text=round(C,(C<0.01 and 5)or(C<0.1 and 4)or 3)
aI.Text=round(D,(D<0.01 and 5)or(D<0.1 and 4)or(D<1 and 3)or 2)
g.Text=round(E,(E<0.01 and 5)or(E<0.1 and 4)or(D<1 and 3)or 2)

local F=aF.AbsoluteSize.Y*(B[3]/10)
z.Position=UDim2.new(0,B[4].Position.X.Offset-1,0,B[4].Position.Y.Offset-F-17)
z.Visible=true
A.Position=UDim2.new(0,B[4].Position.X.Offset-1,0,B[4].Position.Y.Offset+F+2)
A.Visible=true
end
end

z.InputBegan:Connect(function(B)
if(B.UserInputType~=Enum.UserInputType.MouseButton1 and B.UserInputType~=Enum.UserInputType.Touch)or not r or aq.CheckMouseInGui(r[4].Select)then return end

local C,D
local E=aF.AbsoluteSize.Y
local F=math.abs(z.AbsolutePosition.Y-u.Y)

z.Line.Position=UDim2.new(0,2,0,0)
z.Line.Size=UDim2.new(0,3,0,20)

D=t.InputEnded:Connect(function(G)
if G.UserInputType~=Enum.UserInputType.MouseButton1 and G.UserInputType~=Enum.UserInputType.Touch then return end
C:Disconnect()
D:Disconnect()
z.Line.Position=UDim2.new(0,3,0,0)
z.Line.Size=UDim2.new(0,1,0,20)
end)

C=t.InputChanged:Connect(function(G)
if G.UserInputType==Enum.UserInputType.MouseMovement or G.UserInputType==Enum.UserInputType.Touch then
local H=(r[4].AbsolutePosition.Y+2)-(u.Y-F)-19
local I=10*(math.max(H,0)/E)
local J=math.min(r[1],10-r[1])
r[3]=math.min(I,J)
aw:Redraw()
buildSequence()
updateInputs(r)
end
end)
end)

A.InputBegan:Connect(function(B)
if(B.UserInputType~=Enum.UserInputType.MouseButton1 and B.UserInputType~=Enum.UserInputType.Touch)or not r or aq.CheckMouseInGui(r[4].Select)then return end

local C,D
local E=aF.AbsoluteSize.Y
local F=math.abs(A.AbsolutePosition.Y-u.Y)

A.Line.Position=UDim2.new(0,2,0,0)
A.Line.Size=UDim2.new(0,3,0,20)

D=t.InputEnded:Connect(function(G)
if G.UserInputType~=Enum.UserInputType.MouseButton1 and G.UserInputType~=Enum.UserInputType.Touch then return end
C:Disconnect()
D:Disconnect()
A.Line.Position=UDim2.new(0,3,0,0)
A.Line.Size=UDim2.new(0,1,0,20)
end)

C=t.InputChanged:Connect(function(G)
if G.UserInputType==Enum.UserInputType.MouseMovement or G.UserInputType==Enum.UserInputType.Touch then
local H=(u.Y+(20-F))-(r[4].AbsolutePosition.Y+2)-19
local I=10*(math.max(H,0)/E)
local J=math.min(r[1],10-r[1])
r[3]=math.min(I,J)
aw:Redraw()
buildSequence()
updateInputs(r)
end
end)
end)

local function placePoint(B)
local C=Instance.new"Frame"
C.Name="Point"
C.BorderSizePixel=0
C.Size=UDim2.new(0,5,0,5)
C.Position=UDim2.new(0,math.floor((aF.AbsoluteSize.X-1)*B[2])-2,0,aF.AbsoluteSize.Y*(10-B[1])/10-2)
C.BackgroundColor3=Color3.new(0,0,0)

local D=Instance.new"Frame"
D.Name="Select"
D.BackgroundTransparency=1
D.BackgroundColor3=Color3.new(0.7803921568627451,0.17254901960784313,0.10980392156862745)
D.Position=UDim2.new(0,-2,0,-2)
D.Size=UDim2.new(0,9,0,9)
D.Parent=C

C.Parent=aF


D.InputBegan:Connect(function(E)
if E.UserInputType==Enum.UserInputType.MouseMovement or E.UserInputType==Enum.UserInputType.Touch then
for F,G in pairs(l)do
G[4].Select.BackgroundTransparency=1
end

D.BackgroundTransparency=0
updateInputs(B)
end

if(E.UserInputType==Enum.UserInputType.MouseButton1 or E.UserInputType==Enum.UserInputType.Touch)and not q then
r=B
local F,G
q=true
D.BackgroundColor3=Color3.new(0.9764705882352941,0.7490196078431373,0.23137254901960785)

local H=B[3]

G=t.InputEnded:Connect(function(I)
if I.UserInputType~=Enum.UserInputType.MouseButton1 and I.UserInputType~=Enum.UserInputType.Touch then return end

F:Disconnect()
G:Disconnect()
q=nil
D.BackgroundColor3=Color3.new(0.7803921568627451,0.17254901960784313,0.10980392156862745)
end)

F=t.InputChanged:Connect(function(I)
if I.UserInputType==Enum.UserInputType.MouseMovement or I.UserInputType==Enum.UserInputType.Touch then
local J=aF.AbsoluteSize.X-1
local K=(I.Position.X-aF.AbsolutePosition.X)
if K<0 then K=0 end
if K>J then K=J end

local L=aF.AbsoluteSize.Y-1
local M=(I.Position.Y-aF.AbsolutePosition.Y)
if M<0 then M=0 end
if M>L then M=L end

if B~=o and B~=p then
B[2]=K/J
end

B[1]=10-(M/L)*10
local N=math.min(B[1],10-B[1])
B[3]=math.min(H,N)
aw:Redraw()
updateInputs(B)

for O,P in pairs(l)do
P[4].Select.BackgroundTransparency=1
end

D.BackgroundTransparency=0
buildSequence()
end
end)
end
end)

return C
end

local function placePoints()
for B,C in pairs(l)do
C[4]=placePoint(C)
end
end

local function redraw(B)
local C=aF.AbsoluteSize
table.sort(l,function(D,E)return D[2]<E[2]end)
for D,E in pairs(l)do
E[4].Position=UDim2.new(0,math.floor((C.X-1)*E[2])-2,0,(C.Y-1)*(10-E[1])/10-2)
end
m[1].Size=UDim2.new(0,1,0,0)
for D=1,#l-1 do
local E=l[D]
local F=l[D+1]
local G=F[4].Position.Y.Offset-E[4].Position.Y.Offset
local H=F[4].Position.X.Offset-E[4].Position.X.Offset
local I=G/H

local J=E[3]
local K=F[3]

local L=math.abs(I)
local M=0
local N=math.abs(F[4].Position.Y.Offset-E[4].Position.Y.Offset)

for O=math.min(E[4].Position.X.Offset+1,F[4].Position.X.Offset),F[4].Position.X.Offset do
if H==0 and G==0 then return end
local P=math.floor(L)
local Q=m[O+3]
if Q then
if M+P>N then P=N-M end
if math.sign(I)==-1 then
Q.Position=UDim2.new(0,O+2,0,E[4].Position.Y.Offset+-(M+P)+2)
else
Q.Position=UDim2.new(0,O+2,0,E[4].Position.Y.Offset+M+2)
end
Q.Size=UDim2.new(0,1,0,math.max(P,1))
end
M=M+P
L=L-P+math.abs(I)

local R=(O-E[4].Position.X.Offset)/(F[4].Position.X.Offset-E[4].Position.X.Offset)
local S=J+(K-J)*R
local T=(S/10)*C.Y

local U=n[O+3]
if U then
U.Position=UDim2.new(0,O+2,0,m[O+3].Position.Y.Offset-math.floor(T))
U.Size=UDim2.new(0,1,0,math.floor(T*2))
end
end
end
end
aw.Redraw=redraw



local function loadSequence(B,C)
s=C
for D,E in pairs(l)do if E[4]then E[4]:Destroy()end end
l={}
for D,E in pairs(C.Keypoints)do
local F=math.min(E.Value,10-E.Value)
local G={E.Value,E.Time,math.min(E.Envelope,F)}
G[4]=placePoint(G)
table.insert(l,G)
end
o=l[1]
p=l[#l]
q=nil
redraw()
z.Visible=false
A.Visible=false
end
aw.SetSequence=loadSequence

aH.FocusLost:Connect(function()
local B=r
local C=tonumber(aH.Text)
if B and C and B~=o and B~=p then
C=math.clamp(C,0,1)
B[2]=C
redraw()
buildSequence()
updateInputs(B)
end
end)

aI.FocusLost:Connect(function()
local B=r
local C=tonumber(aI.Text)
if B and C then
local D=B[3]
C=math.clamp(C,0,10)
B[1]=C
local E=math.min(B[1],10-B[1])
B[3]=math.min(D,E)
redraw()
buildSequence()
updateInputs(B)
end
end)

g.FocusLost:Connect(function()
local B=r
local C=tonumber(g.Text)
if B and C then
C=math.clamp(C,0,5)
local D=math.min(B[1],10-B[1])
B[3]=math.min(C,D)
redraw()
buildSequence()
updateInputs(B)
end
end)

local function buttonAnimations(B,C)
B.InputBegan:Connect(function(D)if D.UserInputType==Enum.UserInputType.MouseMovement or D.UserInputType==Enum.UserInputType.Touch then B.BackgroundTransparency=(C and 0.5 or 0.4)end end)
B.InputEnded:Connect(function(D)if D.UserInputType==Enum.UserInputType.MouseMovement or D.UserInputType==Enum.UserInputType.Touch then B.BackgroundTransparency=(C and 1 or 0)end end)
end

aF.InputBegan:Connect(function(B)
if(B.UserInputType==Enum.UserInputType.MouseButton1 or B.UserInputType==Enum.UserInputType.Touch)and#l<20 then

if aq.CheckMouseInGui(z)or aq.CheckMouseInGui(A)then return end

for C,D in pairs(l)do
if aq.CheckMouseInGui(D[4].Select)then
return
end
end

local C=aF.AbsoluteSize.X-1
local D=(B.Position.X-aF.AbsolutePosition.X)
if D<0 then D=0 end
if D>C then D=C end

local E=aF.AbsoluteSize.Y-1
local F=(B.Position.Y-aF.AbsolutePosition.Y)
if F<0 then F=0 end
if F>E then F=E end

local G=D/C
local H={10-(F/E)*10,G,0}
H[4]=placePoint(H)
table.insert(l,H)
redraw()
buildSequence()
end
end)

h.MouseButton1Click:Connect(function()
if r and r~=o and r~=p then
for B,C in pairs(l)do
if C==r then
C[4]:Destroy()
table.remove(l,B)
break
end
end
q=nil
redraw()
buildSequence()
updateInputs(l[1])
end
end)

i.MouseButton1Click:Connect(function()
if s then
aw:SetSequence(s)
buildSequence()
end
end)

j.MouseButton1Click:Connect(function()
az:Close()
end)

buttonAnimations(h)
buttonAnimations(i)
buttonAnimations(j)

placePoints()
redraw()

aw.Show=function(B)
az:Show()
end

return aw
end

return{new=new}
end)()

aq.ColorSequenceEditor=(function()
local function new()
local aw=setmetatable({},{})
aw.OnSelect=aq.Signal.new()
aw.OnCancel=aq.Signal.new()
aw.OnPreview=aq.Signal.new()
aw.OnPickColor=aq.Signal.new()

local ax=ao{
{1,"Frame",{BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderSizePixel=0,ClipsDescendants=true,Name="Content",Position=UDim2.new(0,0,0,20),Size=UDim2.new(1,0,1,-20),}},
{2,"Frame",{BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Name="ColorLine",Parent={1},Position=UDim2.new(0,10,0,5),Size=UDim2.new(1,-20,0,70),}},
{3,"Frame",{BackgroundColor3=Color3.new(1,1,1),BorderSizePixel=0,Name="Gradient",Parent={2},Size=UDim2.new(1,0,1,0),}},
{4,"UIGradient",{Parent={3},}},
{5,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="Arrows",Parent={1},Position=UDim2.new(0,1,0,73),Size=UDim2.new(1,-2,0,16),}},
{6,"Frame",{BackgroundColor3=Color3.new(0,0,0),BackgroundTransparency=0.5,BorderSizePixel=0,Name="Cursor",Parent={1},Position=UDim2.new(0,10,0,0),Size=UDim2.new(0,1,0,80),}},
{7,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Time",Parent={1},Position=UDim2.new(0,40,0,95),Size=UDim2.new(0,100,0,20),}},
{8,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),ClipsDescendants=true,Font=3,Name="Input",Parent={7},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,98,0,20),Text="0",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
{9,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={7},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Time",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
{10,"Frame",{BackgroundColor3=Color3.new(1,1,1),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Name="ColorBox",Parent={1},Position=UDim2.new(0,220,0,95),Size=UDim2.new(0,20,0,20),}},
{11,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={10},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Color",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
{12,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),BorderSizePixel=0,Font=3,Name="Close",Parent={1},Position=UDim2.new(1,-90,0,95),Size=UDim2.new(0,80,0,20),Text="Close",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,}},
{13,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),BorderSizePixel=0,Font=3,Name="Reset",Parent={1},Position=UDim2.new(1,-180,0,95),Size=UDim2.new(0,80,0,20),Text="Reset",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,}},
{14,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),BorderSizePixel=0,Font=3,Name="Delete",Parent={1},Position=UDim2.new(0,280,0,95),Size=UDim2.new(0,80,0,20),Text="Delete",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,}},
{15,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={1},Size=UDim2.new(0,16,0,16),Visible=false,}},
{16,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={15},Position=UDim2.new(0,8,0,3),Size=UDim2.new(0,1,0,2),}},
{17,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={15},Position=UDim2.new(0,7,0,5),Size=UDim2.new(0,3,0,2),}},
{18,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={15},Position=UDim2.new(0,6,0,7),Size=UDim2.new(0,5,0,2),}},
{19,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={15},Position=UDim2.new(0,5,0,9),Size=UDim2.new(0,7,0,2),}},
{20,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={15},Position=UDim2.new(0,4,0,11),Size=UDim2.new(0,9,0,2),}},
}
local az=aq.Window.new()
az.Resizable=false
az:Resize(650,150)
az:SetTitle"ColorSequence Editor"
aw.Window=az
aw.Gui=az.Gui
for aA,aB in pairs(ax:GetChildren())do
aB.Parent=az.GuiElems.Content
end
local aA=az.Gui
local aB=aA.Main
local aC=aB.TopBar
local aD=aB.Content
local aF=aD.ColorLine
local aG=aF.Gradient.UIGradient
local aH=aD.Arrows
local aI=aD.Arrow
local g=aD.Cursor
local h=aD.Time.Input
local i=aD.ColorBox
local j=aD.Delete
local k=aD.Reset
local l=aD.Close
local m=aC.Close

local n=am.UserInputService
am.Players.LocalPlayer:GetMouse()

local o={{Color3.new(1,0,1),0},{Color3.new(0.2,0.9,0.2),0.2},{Color3.new(0.4,0.5,0.9),0.7},{Color3.new(0.6,1,1),1}}
local p

local q=o[1]
local r=o[#o]

local s
local t

local u=Instance.new"Frame"
u.BorderSizePixel=0
u.Size=UDim2.new(0,1,1,0)

aw.Sequence=ColorSequence.new(Color3.new(1,1,1))
local function buildSequence(v)
local w={}
table.sort(o,function(x,y)return x[2]<y[2]end)
for x,y in pairs(o)do
table.insert(w,ColorSequenceKeypoint.new(y[2],y[1]))
end
aw.Sequence=ColorSequence.new(w)
if not v then aw.OnSelect:Fire(aw.Sequence)end
end

local function round(v,w)
local x=10^w
return math.floor(v*x+0.5)/x
end

local function updateInputs(v)
if v then
t=v
local w=v[2]
h.Text=round(w,(w<0.01 and 5)or(w<0.1 and 4)or 3)
i.BackgroundColor3=v[1]
end
end

local function placeArrow(v,w)
local x=aI:Clone()
x.Position=UDim2.new(0,v-1,0,0)
x.Visible=true
x.Parent=aH

x.InputBegan:Connect(function(y)
if y.UserInputType==Enum.UserInputType.MouseMovement or y.UserInputType==Enum.UserInputType.Touch then
g.Visible=true
g.Position=UDim2.new(0,9+x.Position.X.Offset,0,0)
end

if y.UserInputType==Enum.UserInputType.MouseButton1 or y.UserInputType==Enum.UserInputType.Touch then
updateInputs(w)
if w==q or w==r or s then return end

local z,A
s=true

A=n.InputEnded:Connect(function(B)
if B.UserInputType~=Enum.UserInputType.MouseButton1 and B.UserInputType~=Enum.UserInputType.Touch then return end
z:Disconnect()
A:Disconnect()
s=nil
g.Visible=false
end)

z=n.InputChanged:Connect(function(B)
if B.UserInputType==Enum.UserInputType.MouseMovement or B.UserInputType==Enum.UserInputType.Touch then
local C=aF.AbsoluteSize.X-1
local D=(B.Position.X-aF.AbsolutePosition.X)
if D<0 then D=0 end
if D>C then D=C end local E=
D/C
w[2]=D/C
updateInputs(w)
g.Visible=true
g.Position=UDim2.new(0,9+x.Position.X.Offset,0,0)
buildSequence()
aw:Redraw()
end
end)
end
end)

x.InputEnded:Connect(function(y)
if y.UserInputType==Enum.UserInputType.MouseMovement or y.UserInputType==Enum.UserInputType.Touch then
g.Visible=false
end
end)



return x
end

local function placeArrows()
for v,w in pairs(o)do
w[3]=placeArrow(math.floor((aF.AbsoluteSize.X-1)*w[2])+1,w)
end
end

local function redraw(v)
aG.Color=aw.Sequence or ColorSequence.new(Color3.new(1,1,1))

for w=2,#o do
local x=o[w]
local y=math.floor((aF.AbsoluteSize.X-1)*x[2])+1
x[3].Position=UDim2.new(0,y,0,0)
end
end
aw.Redraw=redraw

local function loadSequence(v,w)
p=w
for x,y in pairs(o)do if y[3]then y[3]:Destroy()end end
o={}
s=nil
for x,y in pairs(w.Keypoints)do
local z={y.Value,y.Time}
z[3]=placeArrow(y.Time,z)
table.insert(o,z)
end
q=o[1]
r=o[#o]
s=nil
updateInputs(o[1])
buildSequence(true)
redraw()
end
aw.SetSequence=loadSequence

local function buttonAnimations(v,w)
v.InputBegan:Connect(function(x)if x.UserInputType==Enum.UserInputType.MouseMovement or x.UserInputType==Enum.UserInputType.Touch then v.BackgroundTransparency=(w and 0.5 or 0.4)end end)
v.InputEnded:Connect(function(x)if x.UserInputType==Enum.UserInputType.MouseMovement or x.UserInputType==Enum.UserInputType.Touch then v.BackgroundTransparency=(w and 1 or 0)end end)
end

aF.InputBegan:Connect(function(v)
if(v.UserInputType==Enum.UserInputType.MouseButton1 or v.UserInputType==Enum.UserInputType.Touch)and#o<20 then
local w=aF.AbsoluteSize.X-1
local x=(v.Position.X-aF.AbsolutePosition.X)
if x<0 then x=0 end
if x>w then x=w end

local y=x/w
local z
local A
for B,C in pairs(o)do
if C[2]>=y then
z=o[math.max(B-1,1)]
A=o[B]
break
end
end
local B=z[1]:lerp(A[1],(y-z[2])/(A[2]-z[2]))
local C={B,y}
C[3]=placeArrow(C[2],C)
table.insert(o,C)
updateInputs(C)
buildSequence()
redraw()
end
end)

aF.InputChanged:Connect(function(v)
if(v.UserInputType==Enum.UserInputType.MouseMovement or v.UserInputType==Enum.UserInputType.Touch)then
local w=aF.AbsoluteSize.X-1
local x=(v.Position.X-aF.AbsolutePosition.X)
if x<0 then x=0 end
if x>w then x=w end
g.Visible=true
g.Position=UDim2.new(0,10+x,0,0)
end
end)

aF.InputEnded:Connect(function(v)
if(v.UserInputType==Enum.UserInputType.MouseMovement or v.UserInputType==Enum.UserInputType.Touch)then
local w=false
for x,y in pairs(o)do
if aq.CheckMouseInGui(y[3])then
w=y[3]
end
end
g.Visible=w and true or false
if w then g.Position=UDim2.new(0,9+w.Position.X.Offset,0,0)end
end
end)

h:GetPropertyChangedSignal"Text":Connect(function()
local v=t
local w=tonumber(h.Text)
if v and w and v~=q and v~=r then
w=math.clamp(w,0,1)
v[2]=w
buildSequence()
redraw()
end
end)

i.InputBegan:Connect(function(v)
if(v.UserInputType==Enum.UserInputType.MouseButton1 or v.UserInputType==Enum.UserInputType.Touch)then
local w=aw.ColorPicker
if not w then
w=aq.ColorPicker.new()
w.Window:SetTitle"ColorSequence Color Picker"

w.OnSelect:Connect(function(x)
if t then
t[1]=x
end
buildSequence()
redraw()
end)

aw.ColorPicker=w
end

w.Window:ShowAndFocus()
end
end)

j.MouseButton1Click:Connect(function()
if t and t~=q and t~=r then
for v,w in pairs(o)do
if w==t then
w[3]:Destroy()
table.remove(o,v)
break
end
end
s=nil
updateInputs(o[1])
buildSequence()
redraw()
end
end)

k.MouseButton1Click:Connect(function()
if p then
aw:SetSequence(p)
end
end)

l.MouseButton1Click:Connect(function()
az:Close()
end)

m.MouseButton1Click:Connect(function()
az:Close()
end)

buttonAnimations(j)
buttonAnimations(k)
buttonAnimations(l)

placeArrows()
redraw()

aw.Show=function(v)
az:Show()
end

return aw
end

return{new=new}
end)()

aq.ViewportTextBox=(function()
local aw=am.TextService

local ax={
OffsetX=0,
TextBox=at,
CursorPos=-1,
Gui=at,
View=at
}
local az={}
az.Update=function(aA)
local aB=aA.CursorPos or-1
local aC=aA.TextBox.Text
if aC==""then aA.TextBox.Position=UDim2.new(0,0,0,0)return end
if aB==-1 then return end

local aD=aC:sub(1,aB-1)
local aF
local aG=-aA.TextBox.Position.X.Offset
local aH=aG+aA.View.AbsoluteSize.X

local aI=aw:GetTextSize(aC,aA.TextBox.TextSize,aA.TextBox.Font,Vector2.new(999999999,100)).X
local g=aw:GetTextSize(aD,aA.TextBox.TextSize,aA.TextBox.Font,Vector2.new(999999999,100)).X

if g>aH then
aF=math.max(-1,g-aA.View.AbsoluteSize.X+2)
elseif g<aG then
aF=math.max(-1,g-2)
elseif aI<aH then
aF=math.max(-1,aI-aA.View.AbsoluteSize.X+2)
end

if aF then
aA.TextBox.Position=UDim2.new(0,-aF,0,0)
aA.TextBox.Size=UDim2.new(1,aF,1,0)
end
end

az.GetText=function(aA)
return aA.TextBox.Text
end

az.SetText=function(aA,aB)
aA.TextBox.Text=aB
end

local aA=getGuiMT(ax,az)

local function convert(aB)
local aC=initObj(ax,aA)

local aD=Instance.new"Frame"
aD.BackgroundTransparency=aB.BackgroundTransparency
aD.BackgroundColor3=aB.BackgroundColor3
aD.BorderSizePixel=aB.BorderSizePixel
aD.BorderColor3=aB.BorderColor3
aD.Position=aB.Position
aD.Size=aB.Size
aD.ClipsDescendants=true
aD.Name=aB.Name
aB.BackgroundTransparency=1
aB.Position=UDim2.new(0,0,0,0)
aB.Size=UDim2.new(1,0,1,0)
aB.TextXAlignment=Enum.TextXAlignment.Left
aB.Name="Input"

aC.TextBox=aB
aC.View=aD
aC.Gui=aD

aB.Changed:Connect(function(aF)
if aF=="Text"or aF=="CursorPosition"or aF=="AbsoluteSize"then
local aG=aC.TextBox.CursorPosition
if aG~=-1 then aC.CursorPos=aG end
aC:Update()
end
end)

aC:Update()

aD.Parent=aB.Parent
aB.Parent=aD

return aC
end

local function new()
local aB=Instance.new"TextBox"
aB.Size=UDim2.new(0,100,0,20)
aB.BackgroundColor3=ad.Theme.TextBox
aB.BorderColor3=ad.Theme.Outline3
aB.ClearTextOnFocus=false
aB.TextColor3=ad.Theme.Text
aB.Font=Enum.Font.SourceSans
aB.TextSize=14
aB.Text=""
return convert(aB)
end

return{new=new,convert=convert}
end)()

aq.Label=(function()
local aw,ax={},{}

local az=getGuiMT(aw,ax)

local function new()
local aA=Instance.new"TextLabel"
aA.BackgroundTransparency=1
aA.TextXAlignment=Enum.TextXAlignment.Left
aA.TextColor3=ad.Theme.Text
aA.TextTransparency=0.1
aA.Size=UDim2.new(0,100,0,20)
aA.Font=Enum.Font.SourceSans
aA.TextSize=14

local aB=setmetatable({
Gui=aA
},az)
return aB
end

return{new=new}
end)()

aq.Frame=(function()
local aw,ax={},{}

local az=getGuiMT(aw,ax)

local function new()
local aA=Instance.new"Frame"
aA.BackgroundColor3=ad.Theme.Main1
aA.BorderColor3=ad.Theme.Outline1
aA.Size=UDim2.new(0,50,0,50)

local aB=setmetatable({
Gui=aA
},az)
return aB
end

return{new=new}
end)()

aq.Button=(function()
local aw={
Gui=at,
Anim=at,
Disabled=false,
OnClick=au,
OnDown=au,
OnUp=au,
AllowedButtons={1}
}
local ax={}
local az=table.find

ax.Trigger=function(aA,aB,aC)
if not aA.Disabled and az(aA.AllowedButtons,aC)then
aA["On"..aB]:Fire(aC)
end
end

ax.SetDisabled=function(aA,aB)
aA.Disabled=aB

if aB then
aA.Anim:Disable()
aA.Gui.TextTransparency=0.5
else
aA.Anim.Enable()
aA.Gui.TextTransparency=0
end
end

local aA=getGuiMT(aw,ax)

local function new()
local aB=Instance.new"TextButton"
aB.AutoButtonColor=false
aB.TextColor3=ad.Theme.Text
aB.TextTransparency=0.1
aB.Size=UDim2.new(0,100,0,20)
aB.Font=Enum.Font.SourceSans
aB.TextSize=14
aB.BackgroundColor3=ad.Theme.Button
aB.BorderColor3=ad.Theme.Outline2

local aC=initObj(aw,aA)
aC.Gui=aB
aC.Anim=aq.ButtonAnim(aB,{Mode=2,StartColor=ad.Theme.Button,HoverColor=ad.Theme.ButtonHover,PressColor=ad.Theme.ButtonPress,OutlineColor=ad.Theme.Outline2})

aB.MouseButton1Click:Connect(function()aC:Trigger("Click",1)end)
aB.MouseButton1Down:Connect(function()aC:Trigger("Down",1)end)
aB.MouseButton1Up:Connect(function()aC:Trigger("Up",1)end)

aB.MouseButton2Click:Connect(function()aC:Trigger("Click",2)end)
aB.MouseButton2Down:Connect(function()aC:Trigger("Down",2)end)
aB.MouseButton2Up:Connect(function()aC:Trigger("Up",2)end)

return aC
end

return{new=new}
end)()

aq.DropDown=(function()
local aw={
Gui=at,
Anim=at,
Context=at,
Selected=at,
Disabled=false,
CanBeEmpty=true,
Options={},
GuiElems={},
OnSelect=au
}
local ax={}

ax.Update=function(az)
local aA=az.Options

if#aA>0 then
if not az.Selected then
if not az.CanBeEmpty then
az.Selected=aA[1]
az.GuiElems.Label.Text=aA[1]
else
az.GuiElems.Label.Text="- Select -"
end
else
az.GuiElems.Label.Text=az.Selected
end
else
az.GuiElems.Label.Text="- Select -"
end
end

ax.ShowOptions=function(az)
local aA=az.Context

aA.Width=az.Gui.AbsoluteSize.X
aA.ReverseYOffset=az.Gui.AbsoluteSize.Y
aA:Show(az.Gui.AbsolutePosition.X,az.Gui.AbsolutePosition.Y+aA.ReverseYOffset)
end

ax.SetOptions=function(az,aA)
az.Options=aA

local aB=az.Context
local aC=az.Options
aB:Clear()

local aD=function(aD)az.Selected=aD az.OnSelect:Fire(aD)az:Update()end

if az.CanBeEmpty then
aB:Add{Name="- Select -",function()az.Selected=nil az.OnSelect:Fire(nil)az:Update()end}
end

for aF=1,#aC do
aB:Add{Name=aC[aF],OnClick=aD}
end

az:Update()
end

ax.SetSelected=function(az,aA)
az.Selected=type(aA)=="number"and az.Options[aA]or aA
az:Update()
end

local az=getGuiMT(aw,ax)

local function new()
local aA=Instance.new"TextButton"
aA.AutoButtonColor=false
aA.Text=""
aA.Size=UDim2.new(0,100,0,20)
aA.BackgroundColor3=ad.Theme.TextBox
aA.BorderColor3=ad.Theme.Outline3

local aB=aq.Label.new()
aB.Position=UDim2.new(0,2,0,0)
aB.Size=UDim2.new(1,-22,1,0)
aB.TextTruncate=Enum.TextTruncate.AtEnd
aB.Parent=aA
local aC=ao{
{1,"Frame",{BackgroundTransparency=1,Name="EnumArrow",Position=UDim2.new(1,-16,0,2),Size=UDim2.new(0,16,0,16),}},
{2,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={1},Position=UDim2.new(0,8,0,9),Size=UDim2.new(0,1,0,1),}},
{3,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={1},Position=UDim2.new(0,7,0,8),Size=UDim2.new(0,3,0,1),}},
{4,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={1},Position=UDim2.new(0,6,0,7),Size=UDim2.new(0,5,0,1),}},
}
aC.Parent=aA

local aD=initObj(aw,az)
aD.Gui=aA
aD.Anim=aq.ButtonAnim(aA,{Mode=2,StartColor=ad.Theme.TextBox,LerpTo=ad.Theme.Button,LerpDelta=0.15})
aD.Context=aq.ContextMenu.new()
aD.Context.Iconless=true
aD.Context.MaxHeight=200
aD.Selected=nil
aD.GuiElems={Label=aB}
aA.MouseButton1Down:Connect(function()aD:ShowOptions()end)
aD:Update()
return aD
end

return{new=new}
end)()

aq.ClickSystem=(function()
local aw={
LastItem=at,
OnDown=au,
OnRelease=au,
AllowedButtons={1},
Combo=0,
MaxCombo=2,
ComboTime=0.5,
Items={},
ItemCons={},
ClickId=-1,
LastButton=""
}
local ax={}







ax.Trigger=function(az,aA,aB,aC,aD)
if table.find(az.AllowedButtons,aB)then
if az.LastButton~=aB or az.LastItem~=aA or az.Combo==az.MaxCombo or tick()-az.ClickId>az.ComboTime then
az.Combo=0
az.LastButton=aB
az.LastItem=aA
end

az.Combo=az.Combo+1
az.ClickId=tick()

task.spawn(function()
if az.InputDown then
az.InputDown=false
else
az.InputDown=tick()

aA.MouseButton1Up:Once(function()
az.InputDown=false
end)

while az.InputDown and not ae.Dragging do
if(tick()-az.InputDown)>=0.4 then
az.InputDown=false
az.OnRelease:Fire(aA,az.Combo,2,Vector2.new(aC,aD))
break
end;task.wait()
end
end
end)

local aF
aF=am.UserInputService.InputEnded:Connect(function(aG)
if aG.UserInputType==Enum.UserInputType["MouseButton"..aB]then
aF:Disconnect()
if aq.CheckMouseInGui(aA)and az.LastButton==aB and az.LastItem==aA then
az.OnRelease:Fire(aA,az.Combo,aB)
end
end
end)

az.OnDown:Fire(aA,az.Combo,aB)
end
end

ax.Add=function(az,aA)
if table.find(az.Items,aA)then return end

local aB={}
aB[1]=aA.MouseButton1Down:Connect(function(aC,aD)az:Trigger(aA,1,aC,aD)end)
aB[2]=aA.MouseButton2Down:Connect(function(aC,aD)az:Trigger(aA,2,aC,aD)end)

az.ItemCons[aA]=aB
az.Items[#az.Items+1]=aA
end

ax.Remove=function(az,aA)
local aB=table.find(az.Items,aA)
if not aB then return end

for aC,aD in pairs(az.ItemCons[aA])do
aD:Disconnect()
end
az.ItemCons[aA]=nil
table.remove(az.Items,aB)
end

local az={__index=ax}

local function new()
local aA=initObj(aw,az)

return aA
end

return{new=new}
end)()

return aq
end

return{InitDeps=initDeps,InitAfterMain=initAfterMain,Main=main}
end,
Console=function()




local aa,ab,ac,ad
local ae,af,ag,ah
local ai,aj,al,am,an,ao,ap

local function initDeps(aq)
aa=aq.Main
ab=aq.Lib
ac=aq.Apps
ad=aq.Settings

ai=aq.API
aj=aq.RMD
al=aq.env
am=aq.service
an=aq.plr
ao=aq.create
ap=aq.createSimple
end

local function initAfterMain()
ae=ac.Explorer
af=ac.Properties
ag=ac.ScriptViewer
ah=ac.Notebook
end

local function main()
local aq={}

local ar,as

local at=500



local au={};


ar=ab.Window.new()
ar:SetTitle"Console"
ar:Resize(500,400)
aq.Window=ar


as=Instance.new("ImageButton",ar.GuiElems.Content);
as.BorderSizePixel=0;
as.AutoButtonColor=false;
as.BackgroundTransparency=1;
as.BackgroundColor3=Color3.fromRGB(47,47,47);
as.Selectable=false;
as.Size=UDim2.new(1,0,1,0);
as.BorderColor3=Color3.fromRGB(0,0,0);
as.Name=[[Console]];
as.Position=UDim2.new(0,0,0,0);



au["3"]=ab.Frame.new().Gui
au["3"].Parent=as
au["3"].BorderSizePixel=0;
au["3"].BackgroundColor3=Color3.fromRGB(37,37,37);
au["3"].AnchorPoint=Vector2.new(0.5,1);
au["3"].ClipsDescendants=true;
au["3"].Size=UDim2.new(1,-8,0,22);
au["3"].Position=UDim2.new(0.5,0,1,-5);
au["3"].BorderColor3=Color3.fromRGB(0,0,0);
au["3"].Name=[[CommandLine]];



au["4"]=Instance.new("UIStroke",au["3"]);
au["4"].Transparency=0.65;
au["4"].Thickness=1.25;



au["5"]=Instance.new("ScrollingFrame",au["3"]);
au["5"].Active=true;
au["5"].ScrollingDirection=Enum.ScrollingDirection.X;
au["5"].BorderSizePixel=0;
au["5"].CanvasSize=UDim2.new(0,0,0,0);
au["5"].ElasticBehavior=Enum.ElasticBehavior.Never;
au["5"].TopImage=[[rbxasset://textures/ui/Scroll/scroll-middle.png]];
au["5"].BackgroundColor3=Color3.fromRGB(255,255,255);
au["5"].HorizontalScrollBarInset=Enum.ScrollBarInset.Always;
au["5"].BottomImage=[[rbxasset://textures/ui/Scroll/scroll-middle.png]];
au["5"].AutomaticCanvasSize=Enum.AutomaticSize.X;
au["5"].Size=UDim2.new(1,0,1,0);
au["5"].ScrollBarImageColor3=Color3.fromRGB(57,57,57);
au["5"].BorderColor3=Color3.fromRGB(0,0,0);
au["5"].ScrollBarThickness=2;
au["5"].BackgroundTransparency=1;


au["6"]=Instance.new("TextBox",au["5"]);
au["6"].CursorPosition=-1;
au["6"].TextXAlignment=Enum.TextXAlignment.Left;
au["6"].PlaceholderColor3=Color3.fromRGB(211,211,211);
au["6"].BorderSizePixel=0;
au["6"].TextSize=13;
au["6"].TextColor3=Color3.fromRGB(211,211,211);
au["6"].BackgroundColor3=Color3.fromRGB(255,255,255);
au["6"].FontFace=Font.new([[rbxasset://fonts/families/Inconsolata.json]],Enum.FontWeight.Regular,Enum.FontStyle.Normal);
au["6"].AutomaticSize=Enum.AutomaticSize.X;
au["6"].ClearTextOnFocus=false;
au["6"].PlaceholderText=[[Run a command]];
au["6"].Size=UDim2.new(0,246,0,22);
au["6"].BorderColor3=Color3.fromRGB(0,0,0);
au["6"].Text=[[]];
au["6"].BackgroundTransparency=1;



au["7"]=Instance.new("UIPadding",au["6"]);
au["7"].PaddingLeft=UDim.new(0,7);



au["8"]=Instance.new("TextLabel",au["5"]);
au["8"].Interactable=false;
au["8"].ZIndex=2;
au["8"].BorderSizePixel=0;
au["8"].TextSize=13;
au["8"].TextXAlignment=Enum.TextXAlignment.Left;
au["8"].BackgroundColor3=Color3.fromRGB(255,255,255);
au["8"].FontFace=Font.new([[rbxasset://fonts/families/Inconsolata.json]],Enum.FontWeight.Regular,Enum.FontStyle.Normal);
au["8"].TextColor3=Color3.fromRGB(255,255,255);
au["8"].BackgroundTransparency=1;
au["8"].RichText=true;
au["8"].Size=UDim2.new(0,246,0,22);
au["8"].BorderColor3=Color3.fromRGB(0,0,0);
au["8"].Text=[[]];
au["8"].Selectable=true;
au["8"].AutomaticSize=Enum.AutomaticSize.X;
au["8"].Name=[[Highlight]];



au["9"]=Instance.new("UIPadding",au["8"]);
au["9"].PaddingLeft=UDim.new(0,7);

au.backgroundOutput=Instance.new("Frame",as);
au.backgroundOutput.BorderSizePixel=0;
au.backgroundOutput.BackgroundColor3=Color3.fromRGB(36,36,36);
au.backgroundOutput.Name=[[BackgroundOutput]];
au.backgroundOutput.AnchorPoint=Vector2.new(0,0);
au.backgroundOutput.Size=UDim2.new(1,-8,1,-55);
au.backgroundOutput.Position=UDim2.new(0,4,0,23);
au.backgroundOutput.BorderColor3=Color3.fromRGB(0,0,0);
au.backgroundOutput.ZIndex=1;

local aw=ab.ScrollBar.new()
aw.Gui.Parent=as
aw.Gui.Size=UDim2.new(0,16,1,-55);
aw.Gui.Position=UDim2.new(1,-20,0,23);
aw.Gui.Up.ZIndex=3
aw.Gui.Down.ZIndex=3


au.a=Instance.new("ScrollingFrame",as);
au.a.Active=true;
au.a.BorderSizePixel=0;
au.a.CanvasSize=UDim2.new(0,0,0,0);
au.a.TopImage='';
au.a.BackgroundColor3=Color3.fromRGB(36,36,36);
au.a.BackgroundTransparency=1
au.a.Name=[[Output]];
au.a.ScrollBarImageTransparency=0;
au.a.BottomImage='';
au.a.AnchorPoint=Vector2.new(0,0);
au.a.AutomaticCanvasSize=Enum.AutomaticSize.Y;
au.a.Size=UDim2.new(1,-8,1,-55);
au.a.Position=UDim2.new(0,4,0,23);
au.a.BorderColor3=Color3.fromRGB(0,0,0);
au.a.ScrollBarImageColor3=Color3.fromRGB(70,70,70)
au.a.ScrollBarThickness=16;
au.a.ZIndex=1;

au.a:GetPropertyChangedSignal"AbsoluteWindowSize":Connect(function()
if au.a.AbsoluteCanvasSize~=au.a.AbsoluteWindowSize then
aw.Gui.Visible=true
else
aw.Gui.Visible=false
end
end)


au.b=Instance.new("UIListLayout",au.a);
au.b.SortOrder=Enum.SortOrder.LayoutOrder;



au.c=Instance.new("UIStroke",au.a);
au.c.Transparency=0.7;
au.c.Thickness=1.25;
au.c.Color=Color3.fromRGB(12,12,12);



au.d=Instance.new("NumberValue",au.a);
au.d.Name=[[OutputTextSize]];
au.d.Value=15;



au.e=Instance.new("NumberValue",au.a);
au.e.Name=[[OutputLimit]];
au.e.Value=at;



au.f=Instance.new("UIPadding",au.a);
au.f.PaddingTop=UDim.new(0,2);



au["10"]=Instance.new("Frame",as);
au["10"].BorderSizePixel=0;
au["10"].BackgroundColor3=Color3.fromRGB(37,37,37);
au["10"].ClipsDescendants=true;
au["10"].Size=UDim2.new(0,37,0,15);
au["10"].Position=UDim2.new(0,4,0,4);
au["10"].BorderColor3=Color3.fromRGB(0,0,0);
au["10"].Name=[[TextSizeBox]];



au["11"]=Instance.new("TextBox",au["10"]);
au["11"].PlaceholderColor3=Color3.fromRGB(108,108,108);
au["11"].BorderSizePixel=0;
au["11"].TextWrapped=true;
au["11"].TextSize=15;
au["11"].TextColor3=Color3.fromRGB(211,211,211);
au["11"].TextScaled=true;
au["11"].BackgroundColor3=Color3.fromRGB(255,255,255);
au["11"].FontFace=Font.new([[rbxasset://fonts/families/Inconsolata.json]],Enum.FontWeight.Regular,Enum.FontStyle.Normal);
au["11"].PlaceholderText=[[Size]];
au["11"].Size=UDim2.new(1,0,1,0);
au["11"].BorderColor3=Color3.fromRGB(0,0,0);
au["11"].Text=[[]];
au["11"].BackgroundTransparency=1;



au["12"]=Instance.new("UIPadding",au["11"]);
au["12"].PaddingTop=UDim.new(0,2);
au["12"].PaddingRight=UDim.new(0,5);
au["12"].PaddingLeft=UDim.new(0,5);
au["12"].PaddingBottom=UDim.new(0,2);



au["13"]=Instance.new("UIStroke",au["10"]);
au["13"].Transparency=0.65;
au["13"].Thickness=1.25;



au["14"]=Instance.new("ImageButton",as);
au["14"].BorderSizePixel=0;
au["14"].BackgroundColor3=Color3.fromRGB(57,57,57);
au["14"].Size=UDim2.new(0,37,0,15);
au["14"].BorderColor3=Color3.fromRGB(0,0,0);
au["14"].Name=[[Clear]];
au["14"].Position=UDim2.new(1,-42,0,4);



au["15"]=Instance.new("TextLabel",au["14"]);
au["15"].TextWrapped=true;
au["15"].Interactable=false;
au["15"].BorderSizePixel=0;
au["15"].TextSize=20;
au["15"].TextScaled=true;
au["15"].BackgroundColor3=Color3.fromRGB(255,255,255);
au["15"].FontFace=Font.new([[rbxasset://fonts/families/SourceSansPro.json]],Enum.FontWeight.Regular,Enum.FontStyle.Normal);
au["15"].TextColor3=Color3.fromRGB(255,255,255);
au["15"].BackgroundTransparency=1;
au["15"].Size=UDim2.new(1,0,1,0);
au["15"].BorderColor3=Color3.fromRGB(0,0,0);
au["15"].Text=[[Clear]];



au["16"]=Instance.new("UIPadding",au["14"]);
au["16"].PaddingTop=UDim.new(0,1);
au["16"].PaddingBottom=UDim.new(0,1);



au["17"]=Instance.new("TextBox",as);
au["17"].Visible=false;
au["17"].Active=false;
au["17"].Name=[[OutputTemplate]];
au["17"].TextXAlignment=Enum.TextXAlignment.Left;
au["17"].BorderSizePixel=0;
au["17"].TextEditable=false;
au["17"].TextWrapped=true;
au["17"].TextSize=15;
au["17"].TextColor3=Color3.fromRGB(171,171,171);
au["17"].BackgroundColor3=Color3.fromRGB(255,255,255);
au["17"].RichText=true;
au["17"].FontFace=Font.new([[rbxasset://fonts/families/SourceSansPro.json]],Enum.FontWeight.Regular,Enum.FontStyle.Normal);
au["17"].AutomaticSize=Enum.AutomaticSize.Y;
au["17"].Selectable=false;
au["17"].ClearTextOnFocus=false;
au["17"].Size=UDim2.new(1,0,0,1);
au["17"].Position=UDim2.new(0,20,0,0);
au["17"].BorderColor3=Color3.fromRGB(0,0,0);
au["17"].Text=[[(timestamp) <font color="rgb(255, 255, 255)">Output</font>]];
au["17"].BackgroundTransparency=1;



au["18"]=Instance.new("UIPadding",au["17"]);
au["18"].PaddingRight=UDim.new(0,6);
au["18"].PaddingLeft=UDim.new(0,6);



au["19"]=Instance.new("ImageButton",as);
au["19"].BorderSizePixel=0;
au["19"].BackgroundColor3=Color3.fromRGB(57,57,57);
au["19"].Size=UDim2.new(0,60,0,15);
au["19"].BorderColor3=Color3.fromRGB(0,0,0);
au["19"].Name=[[CtrlScroll]];
au["19"].Position=UDim2.new(0,46,0,4);



au["1a"]=Instance.new("TextLabel",au["19"]);
au["1a"].TextWrapped=true;
au["1a"].Interactable=false;
au["1a"].BorderSizePixel=0;
au["1a"].TextSize=20;
au["1a"].TextScaled=true;
au["1a"].BackgroundColor3=Color3.fromRGB(255,255,255);
au["1a"].FontFace=Font.new([[rbxasset://fonts/families/SourceSansPro.json]],Enum.FontWeight.Regular,Enum.FontStyle.Normal);
au["1a"].TextColor3=Color3.fromRGB(255,255,255);
au["1a"].BackgroundTransparency=1;
au["1a"].Size=UDim2.new(1,0,1,0);
au["1a"].BorderColor3=Color3.fromRGB(0,0,0);
au["1a"].Text=[[Ctrl Scroll]];



au["1b"]=Instance.new("UIPadding",au["19"]);
au["1b"].PaddingTop=UDim.new(0,1);
au["1b"].PaddingBottom=UDim.new(0,1);


au["20"]=Instance.new("ImageButton",as);
au["20"].BorderSizePixel=0;
au["20"].BackgroundColor3=Color3.fromRGB(57,57,57);
au["20"].Size=UDim2.new(0,60,0,15);
au["20"].BorderColor3=Color3.fromRGB(0,0,0);
au["20"].Name=[[AutoScroll]];
au["20"].Position=UDim2.new(0,110,0,4);



au["1e"]=Instance.new("TextLabel",au["20"]);
au["1e"].TextWrapped=true;
au["1e"].Interactable=false;
au["1e"].BorderSizePixel=0;
au["1e"].TextSize=20;
au["1e"].TextScaled=true;
au["1e"].BackgroundColor3=Color3.fromRGB(255,255,255);
au["1e"].FontFace=Font.new([[rbxasset://fonts/families/SourceSansPro.json]],Enum.FontWeight.Regular,Enum.FontStyle.Normal);
au["1e"].TextColor3=Color3.fromRGB(255,255,255);
au["1e"].BackgroundTransparency=1;
au["1e"].Size=UDim2.new(1,0,1,0);
au["1e"].BorderColor3=Color3.fromRGB(0,0,0);
au["1e"].Text=[[Auto Scroll]];



au["1f"]=Instance.new("UIPadding",au["20"]);
au["1f"].PaddingTop=UDim.new(0,1);
au["1f"].PaddingBottom=UDim.new(0,1);



au["1c"]=Instance.new("LocalScript",au["1"]);
au["1c"].Name=[[ConsoleHandler]];



au["1d"]=Instance.new("ModuleScript",au["1c"]);
au["1d"].Name=[[SyntaxHighlighter]];



local ax=require;
local az={};
local function require(aA)
local aB=az[aA];
if aB then
if not aB.Required then
aB.Required=true;
aB.Value=aB.Closure();
end
return aB.Value
end;
return ax(aA)
end

az[au["1d"] ]={
Closure=function()local aA=
au["1d"];local aB={}
local aC={
lua={
"and","break","or","else","elseif","if","then","until","repeat","while","do","for","in","end",
"local","return","function","export"
},
rbx={
"game","workspace","script","math","string","table","task","wait","select","next","Enum",
"error","warn","tick","assert","shared","loadstring","tonumber","tostring","type",
"typeof","unpack","print","Instance","CFrame","Vector3","Vector2","Color3","UDim","UDim2","Ray","BrickColor",
"OverlapParams","RaycastParams","Axes","Random","Region3","Rect","TweenInfo",
"collectgarbage","not","utf8","pcall","xpcall","_G","setmetatable","getmetatable","os","pairs","ipairs"
},
exploit={
"hookmetamethod","hookfunction","getgc","filtergc","Drawing","getgenv","getsenv","getrenv","getfenv","setfenv",
"decompile","saveinstance","getrawmetatable","setrawmetatable","checkcaller","cloneref","clonefunction",
"iscclosure","islclosure","isexecutorclosure","newcclosure","getfunctionhash","crypt","writefile","appendfile","loadfile","readfile","listfiles",
"makefolder","isfolder","isfile","delfile","delfolder","getcustomasset","fireclickdetector","firetouchinterest","fireproximityprompt"
},
operators={
"#","+","-","*","%","/","^","=","~","=","<",">",",",".","(",")","{","}","[","]",";",":"
}
}

local aD={
numbers=Color3.fromRGB(255,198,0),
boolean=Color3.fromRGB(255,198,0),
operator=Color3.fromRGB(204,204,204),
lua=Color3.fromRGB(132,214,247),
exploit=Color3.fromRGB(171,84,247),
rbx=Color3.fromRGB(248,109,124),
str=Color3.fromRGB(173,241,132),
comment=Color3.fromRGB(102,102,102),
null=Color3.fromRGB(255,198,0),
call=Color3.fromRGB(253,251,172),
self_call=Color3.fromRGB(253,251,172),
local_color=Color3.fromRGB(248,109,115),
function_color=Color3.fromRGB(248,109,115),
self_color=Color3.fromRGB(248,109,115),
local_property=Color3.fromRGB(97,161,241),
}

local function createKeywordSet(aF)
local aG={}
for aH,aI in ipairs(aF)do
aG[aI]=true
end
return aG
end

local aF=createKeywordSet(aC.lua)
local aG=createKeywordSet(aC.exploit)
local aH=createKeywordSet(aC.rbx)
local aI=createKeywordSet(aC.operators)

local function getHighlight(g,h)
local i=g[h]

if aD[i.."_color"]then
return aD[i.."_color"]
end

if tonumber(i)then
return aD.numbers
elseif i=="nil"then
return aD.null
elseif i:sub(1,2)=="--"then
return aD.comment
elseif aI[i]then
return aD.operator
elseif aF[i]then
return aD.rbx
elseif aH[i]then
return aD.lua
elseif aG[i]then
return aD.exploit
elseif i:sub(1,1)=="\""or i:sub(1,1)=="\'"then
return aD.str
elseif i=="true"or i=="false"then
return aD.boolean
end

if g[h+1]=="("then
if g[h-1]==":"then
return aD.self_call
end

return aD.call
end

if g[h-1]=="."then
if g[h-2]=="Enum"then
return aD.rbx
end

return aD.local_property
end
end

function aB.run(g)
local h={}
local i=""

local j=false
local k=false
local l=false

for m=1,#g do
local n=g:sub(m,m)

if k then
if n=="\n"and not l then
table.insert(h,i)
table.insert(h,n)
i=""

k=false
elseif g:sub(m-1,m)=="]]"and l then
i..="]"

table.insert(h,i)
i=""

k=false
l=false
else
i=i..n
end
elseif j then
if n==j and g:sub(m-1,m-1)~="\\"or n=="\n"then
i=i..n
j=false
else
i=i..n
end
else
if g:sub(m,m+1)=="--"then
table.insert(h,i)
i="-"
k=true
l=g:sub(m+2,m+3)=="[["
elseif n=="\""or n=="\'"then
table.insert(h,i)
i=n
j=n
elseif aI[n]then
table.insert(h,i)
table.insert(h,n)
i=""
elseif n:match"[%w_]"then
i=i..n
else
table.insert(h,i)
table.insert(h,n)
i=""
end
end
end

table.insert(h,i)

local m={}

for n,o in ipairs(h)do
local p=getHighlight(h,n)

if p then
local q=string.format("<font color = \"#%s\">%s</font>",p:ToHex(),o:gsub("<","&lt;"):gsub(">","&gt;"))

table.insert(m,q)
else
table.insert(m,o)
end
end

return table.concat(m)
end

return aB
end;
};

aq.Init=function()


local aA=false
local aB=false

local aC=f:GetService"LogService"
local aD=f:GetService"Players"
local aF=aD.LocalPlayer
aF:GetMouse()
local aG=f:GetService"UserInputService"
f:GetService"RunService"

local aH=as
local aI=require(au["1c"].SyntaxHighlighter)
local g=aH.Output.OutputTextSize











if aA==true then
aH.CtrlScroll.BackgroundColor3=Color3.fromRGB(11,90,175)
elseif aA==false then
aH.CtrlScroll.BackgroundColor3=Color3.fromRGB(56,56,56)
end
aH.CtrlScroll.MouseButton1Click:Connect(function()
aA=not aA
if aA==true then
aH.CtrlScroll.BackgroundColor3=Color3.fromRGB(11,90,175)
elseif aA==false then
aH.CtrlScroll.BackgroundColor3=Color3.fromRGB(56,56,56)
end
end)

local h=false
aG.InputBegan:Connect(function(i,j)
if not j then
if i.KeyCode==Enum.KeyCode.LeftControl or i.KeyCode==Enum.KeyCode.RightControl then
h=true
end
end
end)
aG.InputEnded:Connect(function(i,j)
if not j then
if i.KeyCode==Enum.KeyCode.LeftControl or i.KeyCode==Enum.KeyCode.RightControl then
h=false
end
end
end)

if aB==true then
aH.AutoScroll.BackgroundColor3=Color3.fromRGB(11,90,175)
elseif aB==false then
aH.AutoScroll.BackgroundColor3=Color3.fromRGB(56,56,56)
end
aH.AutoScroll.MouseButton1Click:Connect(function()
aB=not aB
if aB==true then
aH.AutoScroll.BackgroundColor3=Color3.fromRGB(11,90,175)
aH.Output.CanvasPosition=Vector2.new(0,9e9)
elseif aB==false then
aH.AutoScroll.BackgroundColor3=Color3.fromRGB(56,56,56)
end
end)


local i={}
local j=aH.Output.OutputLimit

aH.TextSizeBox.TextBox.Text=tostring(g.Value)

aH.TextSizeBox.TextBox:GetPropertyChangedSignal"Text":Connect(function()
local k=tonumber(aH.TextSizeBox.TextBox.Text)
if k then
g.Value=k
end
end)
g:GetPropertyChangedSignal"Value":Connect(function()
aH.TextSizeBox.TextBox.Text=tostring(g.Value)
end)

local k
aH.Output.MouseEnter:Connect(function()
k=aG.InputChanged:Connect(function(l)
if aA and l.UserInputType==Enum.UserInputType.MouseWheel and h==true then
aH.Output.ScrollingEnabled=false
local m=g.Value+l.Position.Z
if m>=1 then
g.Value=m
end
else
aH.Output.ScrollingEnabled=true
end
end)
end)
aH.Output.MouseLeave:Connect(function()
if k then
k:Disconnect()
k=nil
end
end)


aH.Clear.MouseButton1Click:Connect(function()
for l,m in pairs(aH.Output:GetChildren())do
if m:IsA"TextBox"then
m:Destroy()
end
end
end)

local l

aC.MessageOut:Connect(function(m,n)
local o=""
local p=""
local q=aH.OutputTemplate:Clone()
table.insert(i,q)

if#i>j.Value then
local r=table.remove(i,1)
if r and typeof(r)=="Instance"then
r:Destroy()
end
end

p=os.date"%H:%M:%S"..'   '..m
if n==Enum.MessageType.MessageOutput then
o=os.date"%H:%M:%S"..'   <font color="rgb(204, 204, 204)">'..m..'</font>'
q.Text=o
elseif n==Enum.MessageType.MessageWarning then
o=os.date"%H:%M:%S"..'   <b><font color="rgb(255, 142, 60)">'..m..'</font></b>'
q.Text=o
elseif n==Enum.MessageType.MessageError then
o=os.date"%H:%M:%S"..'   <b><font color="rgb(255, 68, 68)">'..m..'</font></b>'
q.Text=o
elseif n==Enum.MessageType.MessageInfo then
o=os.date"%H:%M:%S"..'   <font color="rgb(128, 215, 255)">'..m..'</font>'
q.Text=o
end

q.TextSize=g.Value
g:GetPropertyChangedSignal"Value":Connect(function()
q.TextSize=g.Value
end)

q.Focused:Connect(function()
l=q
q.Text=p
end)
q.FocusLost:Connect(function()
l=nil
q.Text=o
end)

q.Parent=aH.Output
q.Visible=true

if aB then
aH.Output.CanvasPosition=Vector2.new(0,9e9)
end
end)

aH.Output.MouseLeave:Connect(function()
if l then
l:ReleaseFocus()
end
end)

aH.CommandLine.ScrollingFrame.TextBox:GetPropertyChangedSignal"Text":Connect(function()

local m=string.gsub(aH.CommandLine.ScrollingFrame.TextBox.Text,"\n","    ")
aH.CommandLine.ScrollingFrame.TextBox.Text=m

aH.CommandLine.ScrollingFrame.Highlight.Text=aI.run(aH.CommandLine.ScrollingFrame.TextBox.Text)
end)



aH.CommandLine.ScrollingFrame.TextBox.FocusLost:Connect(function(m)
if m and aH.CommandLine.ScrollingFrame.TextBox.Text~=""then
print("> "..aH.CommandLine.ScrollingFrame.TextBox.Text)
loadstring(aH.CommandLine.ScrollingFrame.TextBox.Text)()
end
end)
end

return aq
end

return{InitDeps=initDeps,InitAfterMain=initAfterMain,Main=main}
end,
SaveInstance=function()




local aa,ab,ac,ad
local ae,af,ag,ah
local ai,aj,al,am,an,ao,ap

local function initDeps(aq)
aa=aq.Main
ab=aq.Lib
ac=aq.Apps
ad=aq.Settings

ai=aq.API
aj=aq.RMD
al=aq.env
am=aq.service
an=aq.plr
ao=aq.create
ap=aq.createSimple
end

local function initAfterMain()
ae=ac.Explorer
af=ac.Properties
ag=ac.ScriptViewer
ah=ac.Notebook
end

local function main()
local aq={}
local ar,as
local at="Place_"..f.PlaceId.."_"..am.MarketplaceService:GetProductInfo(f.PlaceId).Name.."_{TIMESTAMP}"


local au={
Decompile=true,
DecompileTimeout=10,
DecompileIgnore={"Chat","CoreGui","CorePackages"},
NilInstances=false,
RemovePlayerCharacters=true,
SavePlayers=false,
MaxThreads=3,
ShowStatus=true,
IgnoreDefaultProps=true,
IsolateStarterPlayer=true
}

local function AddCheckbox(aw,ax)
local az=ab.Frame.new()
az.Gui.Parent=as
az.Gui.Transparency=1
az.Gui.Size=UDim2.new(1,0,0,20)

local aA=Instance.new"UIListLayout"
aA.Parent=az.Gui
aA.FillDirection=Enum.FillDirection.Horizontal
aA.HorizontalAlignment=Enum.HorizontalAlignment.Left
aA.VerticalAlignment=Enum.VerticalAlignment.Center
aA.Padding=UDim.new(0,10)


local aB=ab.Checkbox.new()

aB.Gui.Parent=az.Gui
aB.Gui.Size=UDim2.new(0,15,0,15)


local aC=ab.Label.new()

aC.Gui.Parent=az.Gui
aC.Gui.Size=UDim2.new(1,0,1,-15)
aC.Gui.Text=aw
aC.TextTruncate=Enum.TextTruncate.AtEnd

aB:SetState(ax)

return aB
end

local function AddTextbox(aw,ax,az)
ax=tostring(ax)
local aA=ab.Frame.new()
aA.Gui.Parent=as
aA.Gui.Transparency=1
aA.Gui.Size=UDim2.new(1,0,0,20)

local aB=Instance.new"UIListLayout"
aB.Parent=aA.Gui
aB.FillDirection=Enum.FillDirection.Horizontal
aB.HorizontalAlignment=Enum.HorizontalAlignment.Left
aB.VerticalAlignment=Enum.VerticalAlignment.Center
aB.Padding=UDim.new(0,10)


local aC=ab.ViewportTextBox.new()

aC.Gui.Parent=aA.Gui
if az and type(az)=="number"then
aC.Gui.Size=UDim2.new(0,az,0,15)
else
aC.Gui.Size=UDim2.new(0,45,0,15)
end

aC.Gui.AutomaticSize=Enum.AutomaticSize.X
aC.TextBox.AutomaticSize=Enum.AutomaticSize.X


local aD=ab.Label.new()

aD.Gui.Parent=aA.Gui
aD.Gui.Size=UDim2.new(1,0,1,-15)
aD.Gui.Text=aw
aD.TextTruncate=Enum.TextTruncate.AtEnd

aC:SetText(ax)

return aC
end






































aq.Init=function()
ar=ab.Window.new()
ar:SetTitle"Save Instance"
ar:Resize(350,350)
aq.Window=ar




as=Instance.new"ScrollingFrame"
as.Parent=ar.GuiElems.Content
as.Size=UDim2.new(1,0,1,-40)
as.Position=UDim2.new(0,0,0,0)
as.Transparency=1
as.CanvasSize=UDim2.new(0,0,0,0)
as.AutomaticCanvasSize=Enum.AutomaticSize.Y
as.ScrollBarThickness=16
as.BottomImage=""
as.TopImage=""
as.ScrollBarImageColor3=Color3.fromRGB(70,70,70)
as.ScrollBarImageTransparency=0
as.ZIndex=2
as.BorderSizePixel=0

local aw=ab.ScrollBar.new()
aw.Gui.Parent=ar.GuiElems.Content
aw.Gui.Size=UDim2.new(1,0,1,-40)
aw.Gui.Up.ZIndex=3
aw.Gui.Down.ZIndex=3

as:GetPropertyChangedSignal"AbsoluteWindowSize":Connect(function()
if as.AbsoluteCanvasSize~=as.AbsoluteWindowSize then
aw.Gui.Visible=true
else
aw.Gui.Visible=false
end
end)

local ax=Instance.new"UIListLayout"
ax.Parent=as
ax.Padding=UDim.new(0,5)

local az=Instance.new"UIPadding"
az.Parent=as
az.PaddingBottom=UDim.new(0,5)
az.PaddingLeft=UDim.new(0,10)
az.PaddingRight=UDim.new(0,10)
az.PaddingTop=UDim.new(0,5)



local aA=AddCheckbox("Decompile Scripts (LocalScript and ModuleScript)",au.Decompile)
aA.OnInput:Connect(function()
au.Decompile=aA.Toggled
end)

local aB=AddTextbox("Decompile Timeout (s)",au.DecompileTimeout,15)
aB.TextBox.FocusLost:Connect(function()
au.DecompileTimeout=tonumber(aB.TextBox.Text)
end)

local aC=AddTextbox("Decompiler Max Threads","3",15)
aC.TextBox.FocusLost:Connect(function()
au.MaxThreads=tonumber(aC.TextBox.Text)
end)

local aD=AddTextbox("Decompile Ignore",table.concat(au.DecompileIgnore,","),50)
aD.TextBox.FocusLost:Connect(function()
local aF=aD.TextBox.Text
local aG=string.split(aF,", ")or string.split(aF,",")
local aH={}

for aI,g in ipairs(aG)do
local h=string.split(g,",")or string.split(g,", ")
for i,j in ipairs(h)do
table.insert(aH,j)
end
end
au.DecompileIgnore=aH
end)


local aF=AddCheckbox("Save Nil Instances",au.NilInstances)
aF.OnInput:Connect(function()
au.NilInstances=aF.Toggled
end)

local aG=AddCheckbox("Remove Player Characters",au.RemovePlayerCharacters)
aG.OnInput:Connect(function()
au.RemovePlayerCharacters=aG.Toggled
end)

local aH=AddCheckbox("Save Player Instance",au.SavePlayers)
aH.OnInput:Connect(function()
au.SavePlayers=aH.Toggled
end)

local aI=AddCheckbox("Isolate StarterPlayer",au.IsolateStarterPlayer)
aI.OnInput:Connect(function()
au.IsolateStarterPlayer=aI.Toggled
end)

local g=AddCheckbox("Ignore Default Properties",au.IgnoreDefaultProps)
g.OnInput:Connect(function()
au.IgnoreDefaultProps=g.Toggled
end)

local h=AddCheckbox("Show Status",au.ShowStatus)
h.OnInput:Connect(function()
au.ShowStatus=h.Toggled
end)



local i=ab.ViewportTextBox.new()
i.Gui.Parent=ar.GuiElems.Content
i.Size=UDim2.new(1,0,0,20)
i.Position=UDim2.new(0,0,1,-40)

local j=Instance.new"UIPadding"
j.Parent=i.Gui
j.PaddingLeft=UDim.new(0,5)
j.PaddingRight=UDim.new(0,5)

local k=ab.Frame.new()
k.Gui.Parent=ar.GuiElems.Content
k.Size=UDim2.new(1,0,0,20)
k.Position=UDim2.new(0,0,1,-20)

local l=ab.Label.new()
l.Gui.Parent=ar.GuiElems.Content
l.Size=UDim2.new(1,0,0,20)
l.Position=UDim2.new(0,0,1,-20)
l.Gui.Text="Save"
l.Gui.TextXAlignment=Enum.TextXAlignment.Center

local m=Instance.new"TextButton"
m.Parent=k.Gui
m.Size=UDim2.new(1,0,1,0)
m.Position=UDim2.new(0,0,0,0)
m.Transparency=1

i.TextBox.Text=at
m.MouseButton1Click:Connect(function()
local n=i.TextBox.Text:gsub("{TIMESTAMP}",os.date"%d-%m-%Y_%H-%M-%S")
ar:SetTitle"Save Instance - Saving"
local o,p=pcall(al.saveinstance,f,al.parsefile(n),au)
if o then
ar:SetTitle"Save Instance - Saved"
else
ar:SetTitle"Save Instance - Error"
task.spawn(error("Failed to save the game: "..p))
end
task.wait(5)
ar:SetTitle"Save Instance"
end)
end

return aq
end

return{InitDeps=initDeps,InitAfterMain=initAfterMain,Main=main}
end
}






DefaultSettings=(function()
local ab=Color3.fromRGB
return{
Explorer={
_Recurse=true,
Sorting=true,
TeleportToOffset=Vector3.new(0,0,0),
ClickToRename=true,
AutoUpdateSearch=true,
AutoUpdateMode=0,
PartSelectionBox=true,
GuiSelectionBox=true,
CopyPathUseGetChildren=true
},
Properties={
_Recurse=true,
MaxConflictCheck=50,
ShowDeprecated=false,
ShowHidden=false,
ClearOnFocus=false,
LoadstringInput=true,
NumberRounding=3,
ShowAttributes=false,
MaxAttributes=50,
ScaleType=1
},
Theme={
_Recurse=true,
Main1=ab(52,52,52),
Main2=ab(45,45,45),
Outline1=ab(33,33,33),
Outline2=ab(55,55,55),
Outline3=ab(30,30,30),
TextBox=ab(38,38,38),
Menu=ab(32,32,32),
ListSelection=ab(11,90,175),
Button=ab(60,60,60),
ButtonHover=ab(68,68,68),
ButtonPress=ab(40,40,40),
Highlight=ab(75,75,75),
Text=ab(255,255,255),
PlaceholderText=ab(100,100,100),
Important=ab(255,0,0),
ExplorerIconMap="",
MiscIconMap="",
Syntax={
Text=ab(204,204,204),
Background=ab(36,36,36),
Selection=ab(255,255,255),
SelectionBack=ab(11,90,175),
Operator=ab(204,204,204),
Number=ab(255,198,0),
String=ab(173,241,149),
Comment=ab(102,102,102),
Keyword=ab(248,109,124),
Error=ab(255,0,0),
FindBackground=ab(141,118,0),
MatchingWord=ab(85,85,85),
BuiltIn=ab(132,214,247),
CurrentLine=ab(45,50,65),
LocalMethod=ab(253,251,172),
LocalProperty=ab(97,161,241),
Nil=ab(255,198,0),
Bool=ab(255,198,0),
Function=ab(248,109,124),
Local=ab(248,109,124),
Self=ab(248,109,124),
FunctionName=ab(253,251,172),
Bracket=ab(204,204,204)
},
}
}
end)()


local ab={}
local ac={}
local ad={}

local ae=d.Players.LocalPlayer or d.Players.PlayerAdded:wait()

local af=function(af)
local ag={}
for ah,ai in pairs(af)do ag[ai[1] ]=Instance.new(ai[2])end

for ah,ai in pairs(af)do
for aj,al in pairs(ai[3])do
if type(al)=="table"then
ag[ai[1] ][aj]=ag[al[1] ]
else
ag[ai[1] ][aj]=al
end
end
end

return ag[1]
end

local ag=function(ag,ah)
local ai=Instance.new(ag)
for aj,al in next,ah do
ai[aj]=al
end
return ai
end

Main=(function()
local ah={}

ah.ModuleList={"Explorer","Properties","ScriptViewer","Console","SaveInstance"}
ah.Elevated=false
ah.MissingEnv={}
ah.Version=""
ah.Mouse=ae:GetMouse()
ah.AppControls={}
ah.Apps=ac
ah.MenuApps={}

ah.DisplayOrders={
SideWindow=8,
Window=10,
Menu=100000,
Core=101000
}

ah.GetInitDeps=function()
return{
Main=ah,
Lib=Lib,
Apps=ac,
Settings=ab,

API=API,
RMD=RMD,
env=ad,
service=d,
plr=ae,
create=af,
createSimple=ag
}
end

ah.Error=function(ai)
if rconsoleprint then
rconsoleprint("DEX ERROR: "..tostring(ai).."\n")
wait(9e9)
else
error(ai)
end
end

ah.LoadModule=function(ai)



























local aj

if aa then
aj=aa[ai]()

if not aj then ah.Error("Missing Embedded Module: "..ai)end
end

ah.AppControls[ai]=aj
aj.InitDeps(ah.GetInitDeps())

local al=aj.Main()
ac[ai]=al
return al
end

ah.LoadModules=function()
for ai,aj in pairs(ah.ModuleList)do
local al,am=pcall(ah.LoadModule,aj)
if not al then
ah.Error(("FAILED LOADING %s CAUSE %s"):format(aj,am))
end
end


Explorer=ac.Explorer
Properties=ac.Properties
ScriptViewer=ac.ScriptViewer
Console=ac.Console
SaveInstance=ac.SaveInstance
Notebook=ac.Notebook
local ai={
Explorer=Explorer,
Properties=Properties,
ScriptViewer=ScriptViewer,
Console=Console,
SaveInstance=SaveInstance,
Notebook=Notebook
}

ah.AppControls.Lib.InitAfterMain(ai)
for aj,al in pairs(ah.ModuleList)do
local am=ah.AppControls[al]
if am then
am.InitAfterMain(ai)
end
end
end

ah.InitEnv=function()
setmetatable(ad,{__newindex=function(ai,aj,al)
if not al then ah.MissingEnv[#ah.MissingEnv+1]=aj return end
rawset(ai,aj,al)
end})


ad.readfile=missing("function",readfile)
ad.writefile=missing("function",writefile)
ad.appendfile=missing("function",appendfile)
ad.makefolder=missing("function",makefolder)
ad.listfiles=missing("function",listfiles)
ad.loadfile=missing("function",loadfile)
ad.movefileas=missing("function",movefileas)
ad.saveinstance=missing("function",saveinstance)or(function()

local ai,aj=pcall(function()
return loadstring(e:HttpGet"https://raw.githubusercontent.com/luau/SynSaveInstance/main/saveinstance.luau")()
end)
return ai and aj or nil
end)()
ad.parsefile=function(ai)
return tostring(ai):gsub("[*\\?:<>|]+",""):sub(1,175)
end


ad.getupvalues=missing("function",(debug and debug.getupvalues)or getupvalues or getupvals)
ad.getconstants=missing("function",(debug and debug.getconstants)or getconstants or getconsts)
ad.getinfo=missing("function",(debug and(debug.getinfo or debug.info))or getinfo)
ad.islclosure=missing("function",islclosure or is_l_closure or is_lclosure)
ad.checkcaller=missing("function",checkcaller)

ad.getgc=missing("function",getgc or get_gc_objects)

ad.getscriptbytecode=missing("function",getscriptbytecode)



ad.request=missing("function",request or http_request or(syn and syn.request)or(http and http.request)or(fluxus and fluxus.request))
ad.decompile=missing("function",decompile)or(ad.getscriptbytecode and ad.request and(function()local
ai=pcall(function()
loadstring(e:HttpGet"https://raw.githubusercontent.com/infyiff/backup/refs/heads/main/konstant.lua")()
end)

return(ai and decompile)or nil
end)())
ad.isViableDecompileScript=function(ai)
if ai:IsA"ModuleScript"then
return true
elseif ai:IsA"LocalScript"and(ai.RunContext==Enum.RunContext.Client or ai.RunContext==Enum.RunContext.Legacy)then
return true
elseif ai:IsA"Script"and ai.RunContext==Enum.RunContext.Client then
return true
end
return false
end
ad.protectgui=missing("function",protect_gui or(syn and syn.protect_gui))
ad.gethui=missing("function",gethui or get_hidden_gui)
ad.setclipboard=missing("function",setclipboard or toclipboard or set_clipboard or(Clipboard and Clipboard.set))
ad.getnilinstances=missing("function",getnilinstances or get_nil_instances)
ad.getloadedmodules=missing("function",getloadedmodules)

ad.executor=(function()
local ai=identifyexecutor or getexecutorname or whatexecutor
local aj,al=pcall(function()
return tostring(ai())
end)
return aj and al or"Your executor"
end)()

ah.GuiHolder=ah.Elevated and d.CoreGui or ae:FindFirstChildWhichIsA"PlayerGui"

setmetatable(ad,nil)
end

ah.LoadSettings=function()
local ai,aj=pcall(ad.readfile or error,"DexSettings.json")
if ai and aj and aj~=""then
local al,am=d.HttpService:JSONDecode(aj)
if al and am then
for an,ao in next,am do

end


end
else
ah.ResetSettings()
end
end

ah.ResetSettings=function()
local function recur(ai,aj)
for al,am in pairs(ai)do
if type(am)=="table"and am._Recurse then
if type(aj[al])~="table"then
aj[al]={}
end
recur(am,aj[al])
else
aj[al]=am
end
end
return aj
end
recur(DefaultSettings,ab)
end

local function jsonDecode(ai)
local aj,al=pcall(d.HttpService.JSONDecode,d.HttpService,ai)
return aj and al or aj
end

ah.FetchAPI=function()
local ai,aj
if ah.Elevated then
if ah.LocalDepsUpToDate()then
local al=Lib.ReadFile"dex/rbx_api.dat"
if al then
aj=al
else
ah.DepsVersionData[1]=""
end
end
aj=aj or e:HttpGet("http://setup.roblox.com/"..ah.RobloxVersion.."-API-Dump.json")
else
if script:FindFirstChild"API"then
aj=require(script.API)
else
error"NO API EXISTS"
end
end
ah.RawAPI=aj
ai=jsonDecode(aj)


if not ai then
aj=e:HttpGet"https://raw.githubusercontent.com/infyiff/backup/refs/heads/main/rbx_api.dat"
ah.RawAPI=aj
ai=jsonDecode(aj)
end

local al,am={},{}
local an,ao={},{}

local function insertAbove(ap,aq,ar)
local as=table.find(ap,aq)
if not as then return end
table.remove(ap,as)

local at=table.find(ap,ar)
if not at then return end
table.insert(ap,at,aq)
end

for ap,aq in pairs(ai.Classes)do
local ar={}
ar.Name=aq.Name
ar.Superclass=aq.Superclass
ar.Properties={}
ar.Functions={}
ar.Events={}
ar.Callbacks={}
ar.Tags={}

if aq.Tags then for as,at in pairs(aq.Tags)do ar.Tags[at]=true end end
for as,at in pairs(aq.Members)do
local au={}
au.Name=at.Name
au.Class=aq.Name
au.Security=at.Security
au.Tags={}
if at.Tags then for aw,ax in pairs(at.Tags)do au.Tags[ax]=true end end

local aw=at.MemberType
if aw=="Property"then
local ax=at.Category or"Other"
ax=ax:match"^%s*(.-)%s*$"
if not ao[ax]then
an[#an+1]=ax
ao[ax]=true
end
au.ValueType=at.ValueType
au.Category=ax
au.Serialization=at.Serialization
table.insert(ar.Properties,au)
elseif aw=="Function"then
au.Parameters={}
au.ReturnType=at.ReturnType.Name
for ax,az in pairs(at.Parameters)do
table.insert(au.Parameters,{Name=az.Name,Type=az.Type.Name})
end
table.insert(ar.Functions,au)
elseif aw=="Event"then
au.Parameters={}
for ax,az in pairs(at.Parameters)do
table.insert(au.Parameters,{Name=az.Name,Type=az.Type.Name})
end
table.insert(ar.Events,au)
end
end

al[aq.Name]=ar
end

for ap,aq in pairs(al)do
aq.Superclass=al[aq.Superclass]
end

for ap,aq in pairs(ai.Enums)do
local ar={}
ar.Name=aq.Name
ar.Items={}
ar.Tags={}

if aq.Tags then for as,at in pairs(aq.Tags)do ar.Tags[at]=true end end
for as,at in pairs(aq.Items)do
local au={}
au.Name=at.Name
au.Value=at.Value
table.insert(ar.Items,au)
end

am[aq.Name]=ar
end

local function getMember(ap,aq)
if not al[ap]or not al[ap][aq]then return end
local ar={}

local as=al[ap]
while as do
for at,au in pairs(as[aq])do
ar[#ar+1]=au
end
as=as.Superclass
end

table.sort(ar,function(at,au)return at.Name<au.Name end)
return ar
end

insertAbove(an,"Behavior","Tuning")
insertAbove(an,"Appearance","Data")
insertAbove(an,"Attachments","Axes")
insertAbove(an,"Cylinder","Slider")
insertAbove(an,"Localization","Jump Settings")
insertAbove(an,"Surface","Motion")
insertAbove(an,"Surface Inputs","Surface")
insertAbove(an,"Part","Surface Inputs")
insertAbove(an,"Assembly","Surface Inputs")
insertAbove(an,"Character","Controls")
an[#an+1]="Unscriptable"
an[#an+1]="Attributes"

local ap={}
for aq=1,#an do
ap[an[aq] ]=aq
end

return{
Classes=al,
Enums=am,
CategoryOrder=ap,
GetMember=getMember
}
end

ah.FetchRMD=function()
local ai
if ah.Elevated then
if ah.LocalDepsUpToDate()then
local aj=Lib.ReadFile"dex/rbx_rmd.dat"
if aj then
ai=aj
else
ah.DepsVersionData[1]=""
end
end
ai=ai or e:HttpGet"https://raw.githubusercontent.com/CloneTrooper1019/Roblox-Client-Tracker/roblox/ReflectionMetadata.xml"
else
if script:FindFirstChild"RMD"then
ai=require(script.RMD)
else
error"NO RMD EXISTS"
end
end
ah.RawRMD=ai
local aj=Lib.ParseXML(ai)
local al=aj.children[1].children[1].children
local am=aj.children[1].children[2].children
local an={}

local ao,ap={},{}
for aq,ar in pairs(al)do
local as=""
for at,au in pairs(ar.children)do
if au.tag=="Properties"then
local aw={Properties={},Functions={}}
local ax=au.children
for az,aA in pairs(ax)do
local aB=aA.attrs.name
aB=aB:sub(1,1):upper()..aB:sub(2)
aw[aB]=aA.children[1].text
end
as=aw.Name
ao[as]=aw
elseif au.attrs.class=="ReflectionMetadataProperties"then
local aw=au.children
for ax,az in pairs(aw)do
if az.attrs.class=="ReflectionMetadataMember"then
local aA={}
if az.children[1].tag=="Properties"then
local aB=az.children[1].children
for aC,aD in pairs(aB)do
if aD.attrs then
local aF=aD.attrs.name
aF=aF:sub(1,1):upper()..aF:sub(2)
aA[aF]=aD.children[1].text
end
end
if aA.PropertyOrder then
local aC=an[as]
if not aC then aC={}an[as]=aC end
aC[aA.Name]=tonumber(aA.PropertyOrder)
end
ao[as].Properties[aA.Name]=aA
end
end
end
elseif au.attrs.class=="ReflectionMetadataFunctions"then
local aw=au.children
for ax,az in pairs(aw)do
if az.attrs.class=="ReflectionMetadataMember"then
local aA={}
if az.children[1].tag=="Properties"then
local aB=az.children[1].children
for aC,aD in pairs(aB)do
if aD.attrs then
local aF=aD.attrs.name
aF=aF:sub(1,1):upper()..aF:sub(2)
aA[aF]=aD.children[1].text
end
end
ao[as].Functions[aA.Name]=aA
end
end
end
end
end
end

for aq,ar in pairs(am)do
local as=""
for at,au in pairs(ar.children)do
if au.tag=="Properties"then
local aw={Items={}}
local ax=au.children
for az,aA in pairs(ax)do
local aB=aA.attrs.name
aB=aB:sub(1,1):upper()..aB:sub(2)
aw[aB]=aA.children[1].text
end
as=aw.Name
ap[as]=aw
elseif au.attrs.class=="ReflectionMetadataEnumItem"then
local aw={}
if au.children[1].tag=="Properties"then
local ax=au.children[1].children
for az,aA in pairs(ax)do
local aB=aA.attrs.name
aB=aB:sub(1,1):upper()..aB:sub(2)
aw[aB]=aA.children[1].text
end
ap[as].Items[aw.Name]=aw
end
end
end
end

return{Classes=ao,Enums=ap,PropertyOrders=an}
end

ah.ShowGui=function(ai)
if ad.gethui then
ai.Parent=ad.gethui()
elseif ad.protectgui then
ad.protectgui(ai)
ai.Parent=ah.GuiHolder
else
ai.Parent=ah.GuiHolder
end
end

ah.CreateIntro=function(ai)
local aj=af{
{1,"ScreenGui",{Name="Intro",}},
{2,"Frame",{Active=true,BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BorderSizePixel=0,Name="Main",Parent={1},Position=UDim2.new(0.5,-175,0.5,-100),Size=UDim2.new(0,350,0,200),}},
{3,"Frame",{BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderSizePixel=0,ClipsDescendants=true,Name="Holder",Parent={2},Size=UDim2.new(1,0,1,0),}},
{4,"UIGradient",{Parent={3},Rotation=30,Transparency=NumberSequence.new{NumberSequenceKeypoint.new(0,1,0),NumberSequenceKeypoint.new(1,1,0),},}},
{5,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=4,Name="Title",Parent={3},Position=UDim2.new(0,-190,0,15),Size=UDim2.new(0,100,0,50),Text="Dex",TextColor3=Color3.new(1,1,1),TextSize=50,TextTransparency=1,}},
{6,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Desc",Parent={3},Position=UDim2.new(0,-230,0,60),Size=UDim2.new(0,180,0,25),Text="Ultimate Debugging Suite",TextColor3=Color3.new(1,1,1),TextSize=18,TextTransparency=1,}},
{7,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="StatusText",Parent={3},Position=UDim2.new(0,20,0,110),Size=UDim2.new(0,180,0,25),Text="Fetching API",TextColor3=Color3.new(1,1,1),TextSize=14,TextTransparency=1,}},
{8,"Frame",{BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BorderSizePixel=0,Name="ProgressBar",Parent={3},Position=UDim2.new(0,110,0,145),Size=UDim2.new(0,0,0,4),}},
{9,"Frame",{BackgroundColor3=Color3.new(0.2392156869173,0.56078433990479,0.86274510622025),BorderSizePixel=0,Name="Bar",Parent={8},Size=UDim2.new(0,0,1,0),}},
{10,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://2764171053",ImageColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),Parent={8},ScaleType=1,Size=UDim2.new(1,0,1,0),SliceCenter=Rect.new(2,2,254,254),}},
{11,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Creator",Parent={2},Position=UDim2.new(1,-110,1,-20),Size=UDim2.new(0,105,0,20),Text="Developed by Moon",TextColor3=Color3.new(1,1,1),TextSize=14,TextXAlignment=1,}},
{12,"UIGradient",{Parent={11},Transparency=NumberSequence.new{NumberSequenceKeypoint.new(0,1,0),NumberSequenceKeypoint.new(1,1,0),},}},
{13,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Version",Parent={2},Position=UDim2.new(1,-110,1,-35),Size=UDim2.new(0,105,0,20),Text=ah.Version,TextColor3=Color3.new(1,1,1),TextSize=14,TextXAlignment=1,}},
{14,"UIGradient",{Parent={13},Transparency=NumberSequence.new{NumberSequenceKeypoint.new(0,1,0),NumberSequenceKeypoint.new(1,1,0),},}},
{15,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Image="rbxassetid://1427967925",Name="Outlines",Parent={2},Position=UDim2.new(0,-5,0,-5),ScaleType=1,Size=UDim2.new(1,10,1,10),SliceCenter=Rect.new(6,6,25,25),TileSize=UDim2.new(0,20,0,20),}},
{16,"UIGradient",{Parent={15},Rotation=-30,Transparency=NumberSequence.new{NumberSequenceKeypoint.new(0,1,0),NumberSequenceKeypoint.new(1,1,0),},}},
{17,"UIGradient",{Parent={2},Rotation=-30,Transparency=NumberSequence.new{NumberSequenceKeypoint.new(0,1,0),NumberSequenceKeypoint.new(1,1,0),},}},
}
ah.ShowGui(aj)
local al=aj.Main.UIGradient
local am=aj.Main.Outlines.UIGradient
local an=aj.Main.Holder.UIGradient
local ao=aj.Main.Holder.Title
local ap=aj.Main.Holder.Desc
local aq=aj.Main.Version
local ar=aq.UIGradient
local as=aj.Main.Creator
local at=as.UIGradient
local au=aj.Main.Holder.StatusText
local aw=aj.Main.Holder.ProgressBar
local ax=d.TweenService

local az=d.RunService.RenderStepped
local aA=az.wait
local aB=function(aB)
if not aB then return aA(az)end
local aC=tick()
while tick()-aC<aB do aA(az)end
end

au.Text=ai

local function tweenNumber(aC,aD,aF)
local aG=Instance.new"IntValue"
aG.Value=0
aG.Changed:Connect(aF)
local aH=ax:Create(aG,aD,{Value=aC})
aH:Play()
aH.Completed:Connect(function()
aG:Destroy()
end)
end

local aC=TweenInfo.new(0.4,Enum.EasingStyle.Quad,Enum.EasingDirection.Out)
tweenNumber(100,aC,function(aD)
aD=aD/200
local aF=NumberSequenceKeypoint.new(0,0)
local aG=NumberSequenceKeypoint.new(aD,0)
local aH=NumberSequenceKeypoint.new(math.min(0.5,aD+math.min(0.05,aD)),1)
if aG.Time==aH.Time then aH=aG end
local aI=NumberSequenceKeypoint.new(1-aD,0)
local g=NumberSequenceKeypoint.new(math.max(0.5,1-aD-math.min(0.05,aD)),1)
if aI.Time==g.Time then g=aI end
local h=NumberSequenceKeypoint.new(1,0)
al.Transparency=NumberSequence.new{aF,aG,aH,g,aI,h}
am.Transparency=NumberSequence.new{aF,aG,aH,g,aI,h}
end)

aB(0.4)

tweenNumber(100,aC,function(aD)
aD=aD/166.66
local aF=NumberSequenceKeypoint.new(0,0)
local aG=NumberSequenceKeypoint.new(aD,0)
local aH=NumberSequenceKeypoint.new(aD+0.01,1)
local aI=NumberSequenceKeypoint.new(1,1)
an.Transparency=NumberSequence.new{aF,aG,aH,aI}
end)

ax:Create(ao,aC,{Position=UDim2.new(0,60,0,15),TextTransparency=0}):Play()
ax:Create(ap,aC,{Position=UDim2.new(0,20,0,60),TextTransparency=0}):Play()

local function rightTextTransparency(aD)
tweenNumber(100,aC,function(aF)
aF=aF/100
local aG=NumberSequenceKeypoint.new(1-aF,0)
local aH=NumberSequenceKeypoint.new(math.max(0,1-aF-0.01),1)
if aG.Time==aH.Time then aH=aG end
local aI=NumberSequenceKeypoint.new(0,aG==aH and 0 or 1)
local g=NumberSequenceKeypoint.new(1,0)
aD.Transparency=NumberSequence.new{aI,aH,aG,g}
end)
end
rightTextTransparency(ar)
rightTextTransparency(at)

aB(0.9)

local aD=TweenInfo.new(0.25,Enum.EasingStyle.Quad,Enum.EasingDirection.Out)

ax:Create(au,aD,{Position=UDim2.new(0,20,0,120),TextTransparency=0}):Play()
ax:Create(aw,aD,{Position=UDim2.new(0,60,0,145),Size=UDim2.new(0,100,0,4)}):Play()

aB(0.25)

local function setProgress(aF,aG)
au.Text=aF
ax:Create(aw.Bar,aD,{Size=UDim2.new(aG,0,1,0)}):Play()
end

local function close()
ax:Create(ao,aD,{TextTransparency=1}):Play()
ax:Create(ap,aD,{TextTransparency=1}):Play()
ax:Create(aq,aD,{TextTransparency=1}):Play()
ax:Create(as,aD,{TextTransparency=1}):Play()
ax:Create(au,aD,{TextTransparency=1}):Play()
ax:Create(aw,aD,{BackgroundTransparency=1}):Play()
ax:Create(aw.Bar,aD,{BackgroundTransparency=1}):Play()
ax:Create(aw.ImageLabel,aD,{ImageTransparency=1}):Play()

tweenNumber(100,TweenInfo.new(0.4,Enum.EasingStyle.Back,Enum.EasingDirection.In),function(aF)
aF=aF/250
local aG=NumberSequenceKeypoint.new(0,0)
local aH=NumberSequenceKeypoint.new(0.6+aF,0)
local aI=NumberSequenceKeypoint.new(math.min(1,0.601+aF),1)
if aH.Time==aI.Time then aI=aH end
local g=NumberSequenceKeypoint.new(1,aH==aI and 0 or 1)
an.Transparency=NumberSequence.new{aG,aH,aI,g}
end)

aB(0.5)
aj.Main.BackgroundTransparency=1
am.Rotation=30

tweenNumber(100,aC,function(aF)
aF=aF/100
local aG=NumberSequenceKeypoint.new(0,1)
local aH=NumberSequenceKeypoint.new(aF,1)
local aI=NumberSequenceKeypoint.new(math.min(1,aF+math.min(0.05,aF)),0)
if aH.Time==aI.Time then aI=aH end
local g=NumberSequenceKeypoint.new(1,aH==aI and 1 or 0)
am.Transparency=NumberSequence.new{aG,aH,aI,g}
an.Transparency=NumberSequence.new{aG,aH,aI,g}
end)

aB(0.45)
aj:Destroy()
end

return{SetProgress=setProgress,Close=close}
end

ah.CreateApp=function(ai)
if ah.MenuApps[ai.Name]then return end
local aj={}

local al=ah.AppTemplate:Clone()

local am=ai.Icon
if ai.IconMap and am then
if type(am)=="number"then
ai.IconMap:Display(al.Main.Icon,am)
elseif type(am)=="string"then
ai.IconMap:DisplayByKey(al.Main.Icon,am)
end
elseif type(am)=="string"then
al.Main.Icon.Image=am
else
al.Main.Icon.Image=""
end

local function updateState()
al.Main.BackgroundTransparency=ai.Open and 0 or(Lib.CheckMouseInGui(al.Main)and 0 or 1)
al.Main.Highlight.Visible=ai.Open
end

local function enable(an)
if ai.Open then return end
ai.Open=true
updateState()
if not an then
if ai.Window then ai.Window:Show()end
if ai.OnClick then ai.OnClick(ai.Open)end
end
end

local function disable(an)
if not ai.Open then return end
ai.Open=false
updateState()
if not an then
if ai.Window then ai.Window:Hide()end
if ai.OnClick then ai.OnClick(ai.Open)end
end
end

updateState()

local an=d.TextService:GetTextSize(ai.Name,14,Enum.Font.SourceSans,Vector2.new(62,999999)).Y
al.Main.Size=UDim2.new(1,0,0,math.clamp(46+an,60,74))
al.Main.AppName.Text=ai.Name

al.Main.InputBegan:Connect(function(ao)
if(ao.UserInputType==Enum.UserInputType.MouseMovement or ao.UserInputType==Enum.UserInputType.Touch)then
al.Main.BackgroundTransparency=0
al.Main.BackgroundColor3=ab.Theme.ButtonHover
end
end)

al.Main.InputEnded:Connect(function(ao)
if(ao.UserInputType==Enum.UserInputType.MouseMovement or ao.UserInputType==Enum.UserInputType.Touch)then
al.Main.BackgroundTransparency=ai.Open and 0 or 1
al.Main.BackgroundColor3=ab.Theme.Button
end
end)

al.Main.MouseButton1Click:Connect(function()
if ai.Open then disable()else enable()end
end)

local ao=ai.Window
if ao then
ao.OnActivate:Connect(function()enable(true)end)
ao.OnDeactivate:Connect(function()disable(true)end)
end

al.Visible=true
al.Parent=ah.AppsContainer
ah.AppsFrame.CanvasSize=UDim2.new(0,0,0,ah.AppsContainerGrid.AbsoluteCellCount.Y*82+8)

aj.Enable=enable
aj.Disable=disable
ah.MenuApps[ai.Name]=aj
return aj
end

ah.SetMainGuiOpen=function(ai)
ah.MainGuiOpen=ai

ah.MainGui.OpenButton.Text=ai and"X"or"Dex"
if ai then ah.MainGui.OpenButton.MainFrame.Visible=true end
ah.MainGui.OpenButton.MainFrame:TweenSize(ai and UDim2.new(0,224,0,200)or UDim2.new(0,0,0,0),Enum.EasingDirection.Out,Enum.EasingStyle.Quad,0.2,true)

d.TweenService:Create(ah.MainGui.OpenButton,TweenInfo.new(0.2,Enum.EasingStyle.Quad,Enum.EasingDirection.Out),{BackgroundTransparency=ai and 0 or(Lib.CheckMouseInGui(ah.MainGui.OpenButton)and 0 or 0.2)}):Play()

if ah.MainGuiMouseEvent then ah.MainGuiMouseEvent:Disconnect()end

if not ai then
local aj=tick()
ah.MainGuiCloseTime=aj
coroutine.wrap(function()
Lib.FastWait(0.2)
if not ah.MainGuiOpen and aj==ah.MainGuiCloseTime then ah.MainGui.OpenButton.MainFrame.Visible=false end
end)()
else
ah.MainGuiMouseEvent=d.UserInputService.InputBegan:Connect(function(aj)
if(aj.UserInputType==Enum.UserInputType.MouseButton1 or aj.UserInputType==Enum.UserInputType.Touch)and not Lib.CheckMouseInGui(ah.MainGui.OpenButton)and not Lib.CheckMouseInGui(ah.MainGui.OpenButton.MainFrame)then

ah.SetMainGuiOpen(false)
end
end)
end
end

ah.CreateMainGui=function()
local ai=af{
{1,"ScreenGui",{IgnoreGuiInset=true,Name="MainMenu",}},
{2,"TextButton",{AnchorPoint=Vector2.new(0.5,0),AutoButtonColor=false,BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderSizePixel=0,Font=4,Name="OpenButton",Parent={1},Position=UDim2.new(0.5,0,0,2),Size=UDim2.new(0,32,0,32),Text="Dex",TextColor3=Color3.new(1,1,1),TextSize=16,TextTransparency=0.20000000298023,}},
{3,"UICorner",{CornerRadius=UDim.new(0,4),Parent={2},}},
{4,"Frame",{AnchorPoint=Vector2.new(0.5,0),BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),ClipsDescendants=true,Name="MainFrame",Parent={2},Position=UDim2.new(0.5,0,1,-4),Size=UDim2.new(0,224,0,200),}},
{5,"UICorner",{CornerRadius=UDim.new(0,4),Parent={4},}},
{6,"Frame",{BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),Name="BottomFrame",Parent={4},Position=UDim2.new(0,0,1,-24),Size=UDim2.new(1,0,0,24),}},
{7,"UICorner",{CornerRadius=UDim.new(0,4),Parent={6},}},
{8,"Frame",{BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BorderSizePixel=0,Name="CoverFrame",Parent={6},Size=UDim2.new(1,0,0,4),}},
{9,"Frame",{BackgroundColor3=Color3.new(0.1294117718935,0.1294117718935,0.1294117718935),BorderSizePixel=0,Name="Line",Parent={8},Position=UDim2.new(0,0,0,-1),Size=UDim2.new(1,0,0,1),}},
{10,"TextButton",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Settings",Parent={6},Position=UDim2.new(1,-48,0,0),Size=UDim2.new(0,24,1,0),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,}},
{11,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://6578871732",ImageTransparency=0.20000000298023,Name="Icon",Parent={10},Position=UDim2.new(0,4,0,4),Size=UDim2.new(0,16,0,16),}},
{12,"TextButton",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Information",Parent={6},Position=UDim2.new(1,-24,0,0),Size=UDim2.new(0,24,1,0),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,}},
{13,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://6578933307",ImageTransparency=0.20000000298023,Name="Icon",Parent={12},Position=UDim2.new(0,4,0,4),Size=UDim2.new(0,16,0,16),}},
{14,"ScrollingFrame",{Active=true,AnchorPoint=Vector2.new(0.5,0),BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderColor3=Color3.new(0.1294117718935,0.1294117718935,0.1294117718935),BorderSizePixel=0,Name="AppsFrame",Parent={4},Position=UDim2.new(0.5,0,0,0),ScrollBarImageColor3=Color3.new(0,0,0),ScrollBarThickness=4,Size=UDim2.new(0,222,1,-25),}},
{15,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Name="Container",Parent={14},Position=UDim2.new(0,7,0,8),Size=UDim2.new(1,-14,0,2),}},
{16,"UIGridLayout",{CellSize=UDim2.new(0,66,0,74),Parent={15},SortOrder=2,}},
{17,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Name="App",Parent={1},Size=UDim2.new(0,100,0,100),Visible=false,}},
{18,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderSizePixel=0,Font=3,Name="Main",Parent={17},Size=UDim2.new(1,0,0,60),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
{19,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://6579106223",ImageRectSize=Vector2.new(32,32),Name="Icon",Parent={18},Position=UDim2.new(0.5,-16,0,4),ScaleType=4,Size=UDim2.new(0,32,0,32),}},
{20,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="AppName",Parent={18},Position=UDim2.new(0,2,0,38),Size=UDim2.new(1,-4,1,-40),Text="Explorer",TextColor3=Color3.new(1,1,1),TextSize=14,TextTransparency=0.10000000149012,TextTruncate=1,TextWrapped=true,TextYAlignment=0,}},
{21,"Frame",{BackgroundColor3=Color3.new(0,0.66666668653488,1),BorderSizePixel=0,Name="Highlight",Parent={18},Position=UDim2.new(0,0,1,-2),Size=UDim2.new(1,0,0,2),}},
}
ah.MainGui=ai
ah.AppsFrame=ai.OpenButton.MainFrame.AppsFrame
ah.AppsContainer=ah.AppsFrame.Container
ah.AppsContainerGrid=ah.AppsContainer.UIGridLayout
ah.AppTemplate=ai.App
ah.MainGuiOpen=false

local aj=ai.OpenButton
aj.BackgroundTransparency=0.2
aj.MainFrame.Size=UDim2.new(0,0,0,0)
aj.MainFrame.Visible=false
aj.MouseButton1Click:Connect(function()
ah.SetMainGuiOpen(not ah.MainGuiOpen)
end)

aj.InputBegan:Connect(function(al)
if al.UserInputType==Enum.UserInputType.MouseMovement or al.UserInputType==Enum.UserInputType.Touch then
d.TweenService:Create(ah.MainGui.OpenButton,TweenInfo.new(0,Enum.EasingStyle.Quad,Enum.EasingDirection.Out),{BackgroundTransparency=0}):Play()
end
end)

aj.InputEnded:Connect(function(al)
if al.UserInputType==Enum.UserInputType.MouseMovement or al.UserInputType==Enum.UserInputType.Touch then
d.TweenService:Create(ah.MainGui.OpenButton,TweenInfo.new(0,Enum.EasingStyle.Quad,Enum.EasingDirection.Out),{BackgroundTransparency=ah.MainGuiOpen and 0 or 0.2}):Play()
end
end)


ah.CreateApp{Name="Explorer",IconMap=ah.LargeIcons,Icon="Explorer",Open=true,Window=Explorer.Window}

ah.CreateApp{Name="Properties",IconMap=ah.LargeIcons,Icon="Properties",Open=true,Window=Properties.Window}

ah.CreateApp{Name="Script Viewer",IconMap=ah.LargeIcons,Icon="Script_Viewer",Window=ScriptViewer.Window}

local al
ah.CreateApp{Name="Click part to select",IconMap=ah.LargeIcons,Icon=6,OnClick=function(am)
if am then
local an=ah.Mouse
al=an.Button1Down:Connect(function()
pcall(function()
local ao=an.Target
if a[ao]then
b:Set(a[ao])
Explorer.ViewNode(a[ao])
end
end)
end)
else if al~=nil then al:Disconnect()al=nil end end
end}

ah.CreateApp{Name="Console",IconMap=ah.LargeIcons,Icon="Output",Window=Console.Window}

ah.CreateApp{Name="Save Instance",IconMap=ah.LargeIcons,Icon="Watcher",Window=SaveInstance.Window}

Lib.ShowGui(ai)
end

ah.SetupFilesystem=function()
if not ad.writefile or not ad.makefolder then return end local
ai, aj=ad.writefile, ad.makefolder
aj"dex"
aj"dex/assets"
aj"dex/saved"
aj"dex/plugins"
aj"dex/ModuleCache"
end

ah.LocalDepsUpToDate=function()
return ah.DepsVersionData and ah.ClientVersion==ah.DepsVersionData[1]
end

ah.Init=function()
ah.Elevated=pcall(function()d.CoreGui:GetFullName()end)
ah.InitEnv()
ah.LoadSettings()
ah.SetupFilesystem()


local ai=ah.CreateIntro"Initializing Library"
Lib=ah.LoadModule"Lib"
Lib.FastWait()





ah.MiscIcons=Lib.IconMap.new("http://www.roblox.com/asset/?id=6511490623",256,256,16,16)

ah.MiscIcons:SetDict{Reference=
0;Cut=
1;Cut_Disabled=
2;Copy=
3;Copy_Disabled=
4;Paste=
5;Paste_Disabled=
6;Delete=
7;Delete_Disabled=
8;Group=
9;Group_Disabled=
10;Ungroup=
11;Ungroup_Disabled=
12;TeleportTo=
13;Rename=
14;JumpToParent=
15;ExploreData=
16;Save=
17;CallFunction=
18;CallRemote=
19;Undo=
20,Undo_Disabled=
21;Redo=
22;Redo_Disabled=
23;Expand_Over=
24;Expand=
25;Collapse_Over=
26;Collapse=
27;SelectChildren=
28;SelectChildren_Disabled=
29;InsertObject=
30;ViewScript=
31;AddStar=
32;RemoveStar=
33;Script_Disabled=
34;LocalScript_Disabled=
35;Play=
36;Pause=
37;Rename_Disabled=
38;
}
ah.LargeIcons=Lib.IconMap.new("rbxassetid://6579106223",256,256,32,32)
ah.LargeIcons:SetDict{
Explorer=0,Properties=1,Script_Viewer=2,Watcher=3,Output=4
}


ai.SetProgress("Fetching Roblox Version",0.2)
if ah.Elevated then
local aj=Lib.ReadFile"dex/deps_version.dat"
ah.ClientVersion=Version()

if aj then
ah.DepsVersionData=string.split(aj,"\n")
if ah.LocalDepsUpToDate()then
ah.RobloxVersion=ah.DepsVersionData[2]
end
end
ah.RobloxVersion=ah.RobloxVersion or e:HttpGet"http://setup.roblox.com/versionQTStudio"


if#ah.RobloxVersion<1 then
ah.RobloxVersion=e:HttpGet"https://raw.githubusercontent.com/infyiff/backup/refs/heads/main/deps_version.dat":gsub("%s+","")
end
end


ai.SetProgress("Fetching API",0.35)
API=ah.FetchAPI()
Lib.FastWait()
ai.SetProgress("Fetching RMD",0.5)
RMD=ah.FetchRMD()
Lib.FastWait()


if ah.Elevated and ad.writefile and not ah.LocalDepsUpToDate()then
ad.writefile("dex/deps_version.dat",ah.ClientVersion.."\n"..ah.RobloxVersion)
ad.writefile("dex/rbx_api.dat",ah.RawAPI)
ad.writefile("dex/rbx_rmd.dat",ah.RawRMD)
end


ai.SetProgress("Loading Modules",0.75)
ah.AppControls.Lib.InitDeps(ah.GetInitDeps())
ah.LoadModules()
Lib.FastWait()


ai.SetProgress("Initializing Modules",0.9)
Explorer.Init()
Properties.Init()
ScriptViewer.Init()
Console.Init()
SaveInstance.Init()
Lib.FastWait()


ai.SetProgress("Complete",1)
coroutine.wrap(function()
Lib.FastWait(1.25)
ai.Close()
end)()


Lib.Window.Init()
ah.CreateMainGui()
Explorer.Window:Show{Align="right",Pos=1,Size=0.5,Silent=true}
Properties.Window:Show{Align="right",Pos=2,Size=0.5,Silent=true}
Lib.DeferFunc(function()Lib.Window.ToggleSide"right"end)
end

return ah
end)()


Main.Init()
